{"version":3,"sources":["webpack:///./src/components/stake/index.vue?dbb2","webpack:///./src/components/stake/stake/index.vue?4a91","webpack:///./src/components/stake/stake/mixins/discount.js","webpack:///src/components/stake/stake/index.vue","webpack:///./src/components/stake/stake/index.vue?39eb","webpack:///./src/components/stake/stake/index.vue","webpack:///src/components/stake/index.vue","webpack:///./src/components/stake/index.vue?ff4d","webpack:///./src/components/stake/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","staticStyle","balance","model","value","callback","$$v","stakeCount","expression","$v","$invalid","on","stake","_v","_s","_e","stakedBalance","unstakeCount","unstake","discount","data","feeDiscount","computed","watch","val","getFeeDiscount","methods","svxSupply","eos","getTableRows","then","res","parseFloat","rows","supply","svxPower","scatter","name","svxpower","component","VBtn","VCard","VCol","VContainer","VRow","VTextField"],"mappings":"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","file":"chunk-2d21b48d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',{staticClass:\"justify-center mt-0\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"lg\":\"8\",\"md\":\"6\"}},[_c('balance'),_c('dashboard'),_c('stake')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"max-width\":\"576px\"}},[_c('v-card',{staticClass:\"px-5 py-5\",attrs:{\"elevation\":\"3\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\",\"sm\":\"12\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"min\":\"0\",\"max\":_vm.balance,\"label\":(\"Max \" + _vm.balance)},model:{value:(_vm.stakeCount),callback:function ($$v) {_vm.stakeCount=$$v},expression:\"stakeCount\"}}),_c('v-btn',{attrs:{\"color\":\"primary\",\"block\":\"\",\"elevation\":\"0\",\"disabled\":_vm.$v.stakeCount.$invalid},on:{\"click\":_vm.stake}},[_c('span',[_vm._v(\"Stake \")]),(_vm.stakeCount > 0)?_c('span',{staticClass:\"mr-2\"},[_vm._v(\" \"+_vm._s(_vm.stakeCount)+\" SVX\")]):_vm._e()])],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\",\"sm\":\"12\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"min\":\"0\",\"max\":_vm.stakedBalance,\"label\":(\"Max \" + _vm.stakedBalance)},model:{value:(_vm.unstakeCount),callback:function ($$v) {_vm.unstakeCount=$$v},expression:\"unstakeCount\"}}),_c('v-btn',{attrs:{\"color\":\"primary\",\"block\":\"\",\"elevation\":\"0\",\"disabled\":_vm.$v.unstakeCount.$invalid},on:{\"click\":_vm.unstake}},[_c('span',[_vm._v(\"Unstake \")]),(_vm.unstakeCount > 0)?_c('span',{staticClass:\"mr-2\"},[_vm._v(\" \"+_vm._s(_vm.unstakeCount)+\" SVX\")]):_vm._e()])],1)],1),_c('div',{staticClass:\"mt-5 ml-5\"},[_c('div',{staticClass:\"grey--text\"},[_vm._v(\"Staked \"+_vm._s(_vm.stakedBalance)+\" SVX\")]),(_vm.discount >= 5)?_c('div',{staticClass:\"grey--text\"},[_vm._v(\"Discount \"+_vm._s(_vm.discount)+\"%\")]):_vm._e()])],1),_c('div',{staticClass:\"grey--text mt-5 ml-5\"},[_vm._v(\" Stake 777k+ SVX for automatic node payouts \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n    data: () => ({\n        feeDiscount: 0\n    }),\n    computed: {\n        discount() {\n            let discount = 0\n\n            if (this.feeDiscount < 5) discount = 0\n            else if (this.feeDiscount <= 10) discount = 5;\n            else if (this.feeDiscount < 15) discount = 10;\n            else if (this.feeDiscount < 20) discount = 15\n            else if (this.feeDiscount < 25) discount = 20\n            else if (this.feeDiscount < 30) discount = 25\n            else if (this.feeDiscount < 35) discount = 30\n            else if (this.feeDiscount < 40) discount = 35\n            else if (this.feeDiscount < 45) discount = 40\n            else if (this.feeDiscount < 50) discount = 45\n            else if (this.feeDiscount < 55) discount - 50\n            else if (this.feeDiscount < 60) discount = 55\n            else if (this.feeDiscount < 65) discount = 60\n            else if (this.feeDiscount < 70) discount = 65\n            else if (this.feeDiscount < 75) discount = 70\n            else if (this.feeDiscount >= 80) discount = 75\n\n            return discount\n        }\n    },\n    mounted() {\n        // this.getFeeDiscount()\n    },\n    watch: {\n        scatter(val) {\n            if (val) this.getFeeDiscount()\n        },\n    },\n    methods: {\n        async getFeeDiscount() {\n            const svxSupply = await this.eos.getTableRows({\n                \"json\": \"true\", \"code\": \"svxmintofeos\", \"scope\": \"SVX\", \"table\": \"stat\"\n            }).then((res) => parseFloat(res.rows[0].supply))\n\n            const svxPower = await this.eos.getTableRows({\n                \"json\": \"true\", \"code\": \"svxmintofeos\", \"scope\": this.scatter.name, \"table\": \"accounts\"\n            }).then((res) => parseFloat(res.rows[0].svxpower))\n\n            if (svxSupply && svxPower) {\n                this.feeDiscount = (svxPower / svxSupply) * 10000\n            }\n        }\n    }\n}","<template>\n<v-container style=\"max-width: 576px\">\n<v-card class=\"px-5 py-5\" elevation=3>\n    <v-row>\n        <v-col cols=12 md=6 sm=12>\n            \n                <v-text-field type=\"number\" min=\"0\" :max=\"balance\" v-model=\"stakeCount\" :label=\"`Max ${balance}`\">\n                </v-text-field>\n                <v-btn color=\"primary\" block elevation=0 @click=\"stake\" :disabled=\"$v.stakeCount.$invalid\">\n                    <span>Stake </span>\n                    <span class=\"mr-2\" v-if=\"stakeCount > 0\"> {{stakeCount}} SVX</span>\n                </v-btn>\n                \n            \n            \n\n        </v-col>\n        <v-col cols=12 md=6 sm=12>\n            \n                <v-text-field type=\"number\" min=\"0\" :max=\"stakedBalance\" v-model=\"unstakeCount\"\n                    :label=\"`Max ${stakedBalance}`\"></v-text-field>\n                <v-btn color=\"primary\" block elevation=0 @click=\"unstake\" :disabled=\"$v.unstakeCount.$invalid\">\n                    <span>Unstake </span>\n                    <span class=\"mr-2\" v-if=\"unstakeCount > 0\"> {{unstakeCount}} SVX</span>\n                </v-btn>\n            \n\n\n            \n        </v-col>\n    </v-row>\n    <div class=\"mt-5 ml-5\">\n                <div class=\"grey--text\">Staked {{stakedBalance}} SVX</div>\n                <div class=\"grey--text\" v-if=\"discount >= 5\">Discount {{discount}}%</div>\n            </div>\n</v-card>\n\n<div class=\"grey--text mt-5 ml-5\">\n                Stake 777k+ SVX for automatic node payouts\n</div>\n\n</v-container>           \n</template>\n\n\n<script>\n    import { mapState } from 'vuex'\n    import { required, between } from \"vuelidate/lib/validators\"\n\n    import discountMixin from './mixins/discount'\n    export default {\n        mixins: [discountMixin],\n        data: () => ({\n            stakeCount: 0,\n            unstakeCount: 0,\n            balance: 0,\n            stakedBalance: 0,\n\n            polling: null,\n        }),\n        computed: {\n            ...mapState({\n                eos: state => state.blockchain.eos,\n                scatter: state => state.blockchain.scatter,\n            }),\n        },\n        watch: {\n            scatter(val) {\n                if (val) this.getBalance()\n            },\n        },\n        validations() {\n            return {\n                stakeCount: {\n                    required,\n                    between: between(1, parseFloat(this.balance)),\n                },\n                unstakeCount: {\n                    required,\n                    between: between(1, parseFloat(this.stakedBalance)),\n                }\n            }\n        },\n        mounted() {\n            // this.getBalance()\n            this.polling = setInterval(() => {\n                this.getBalance()\n                this.getFeeDiscount() // from mixin\n            }, 1000)\n        },\n        methods: {\n            stake() {\n                if (confirm(`Stake ${this.stakeCount} SVX?`))\n                    this.eos.transaction({\n                        actions: [{\n                            account: 'svxmintofeos',\n                            name: 'stake',\n                            authorization: [{\n                                actor: this.scatter.name,\n                                permission: \"active\"\n                            }],\n                            data: {\n                                \"account\": this.scatter.name,\n                                \"value\": this.$options.filters.eosAmountFormat(this.stakeCount)\n                            }\n\n                        }]\n                    })\n                        .then(() => {\n                            this.$notice.success(`Staked ${this.stakeCount} SVX`)\n                            this.getBalance() // reload data\n                            this.clear()\n                        })\n                        .catch(error => {\n                            console.error('[stake | stake]', error)\n                            this.$notice.error('Stake error')\n                        })\n            },\n            unstake() {\n                if (confirm(`Un-Stake ${this.unstakeCount} SVX?`))\n                    this.eos.transaction({\n                        actions: [{\n                            account: 'svxmintofeos',\n                            name: 'unstake',\n                            authorization: [{\n                                actor: this.scatter.name,\n                                permission: \"active\"\n                            }],\n                            data: {\n                                \"account\": this.scatter.name,\n                                \"value\": this.$options.filters.eosAmountFormat(this.unstakeCount)\n                            }\n                        }]\n                    })\n                        .then(() => {\n                            this.$notice.success(`Unstaked ${this.unstakeCount} SVX`)\n                            this.getBalance() // reload data\n                            this.clear()\n                        })\n                        .catch(error => {\n                            console.error('[stake | unstake]', error)\n                            this.$notice.error('Unstake error')\n                        })\n            },\n            getBalance() {\n                this.eos.getTableRows({\n                    \"json\": \"true\",\n                    \"code\": \"svxmintofeos\",\n                    \"scope\": this.scatter.name,\n                    \"table\": \"accounts\"\n                }).then(res => {\n                    const userBalance = parseFloat(res.rows[0].balance)\n                    const storeBalance = parseFloat(res.rows[0].storebalance)\n\n                    this.balance = Math.round(userBalance - storeBalance)\n                    this.stakedBalance = Math.round(storeBalance)\n\n                })\n\n            },\n            clear() {\n                this.stakeCount = 0\n                this.unstakeCount = 0\n            }\n\n        },\n        beforeDestroy() {\n            if (this.polling) clearInterval(this.polling)\n        },\n    }\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=31cdb19a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VRow,VTextField})\n","<template>\n    <v-container>\n        <v-row class=\"justify-center mt-0\">\n            <v-col cols=12 sm=12 lg=8 md=6>\n                <balance  />\n                <dashboard />\n                <stake />\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n<script>\n    import stake from './stake'\n    export default {\n        components: { stake }\n    }\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8dc9f104&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VContainer,VRow})\n"],"sourceRoot":""}