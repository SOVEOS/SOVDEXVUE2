(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ce05e0e"],{"0a06":function(t,e,i){"use strict";var r=i("c532"),s=i("30b5"),n=i("f6b4"),o=i("5270"),a=i("4a7b");function h(t){this.defaults=t,this.interceptors={request:new n,response:new n}}h.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=a(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],i=Promise.resolve(t);this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));while(e.length)i=i.then(e.shift(),e.shift());return i},h.prototype.getUri=function(t){return t=a(this.defaults,t),s(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,i){return this.request(r.merge(i||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){h.prototype[t]=function(e,i,s){return this.request(r.merge(s||{},{method:t,url:e,data:i}))}})),t.exports=h},"0df6":function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},"13b3":function(t,e,i){},"1bfb":function(t,e,i){},"1d2b":function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return t.apply(e,i)}}},"22ac":function(t,e,i){"use strict";var r=i("47aa"),s=i.n(r);s.a},2444:function(t,e,i){"use strict";(function(e){var r=i("c532"),s=i("c8af"),n={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function a(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=i("b50d")),t}var h={adapter:a(),transformRequest:[function(t,e){return s(e,"Accept"),s(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){h.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){h.headers[t]=r.merge(n)})),t.exports=h}).call(this,i("4362"))},"282c":function(t,e,i){},"2a46":function(t,e,i){"use strict";var r=i("282c"),s=i.n(r);s.a},"2d83":function(t,e,i){"use strict";var r=i("387f");t.exports=function(t,e,i,s,n){var o=new Error(t);return r(o,e,i,s,n)}},"2e67":function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"30b5":function(t,e,i){"use strict";var r=i("c532");function s(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var n;if(i)n=i(e);else if(r.isURLSearchParams(e))n=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(s(e)+"="+s(t))})))})),n=o.join("&")}if(n){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}},"387f":function(t,e,i){"use strict";t.exports=function(t,e,i,r,s){return t.config=e,i&&(t.code=i),t.request=r,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},3934:function(t,e,i){"use strict";var r=i("c532");t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function s(t){var r=t;return e&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=s(window.location.href),function(e){var i=r.isString(e)?s(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},"467f":function(t,e,i){"use strict";var r=i("2d83");t.exports=function(t,e,i){var s=i.config.validateStatus;!s||s(i.status)?t(i):e(r("Request failed with status code "+i.status,i.config,null,i.request,i))}},"47aa":function(t,e,i){},"4a7b":function(t,e,i){"use strict";var r=i("c532");t.exports=function(t,e){e=e||{};var i={},s=["url","method","params","data"],n=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(s,(function(t){"undefined"!==typeof e[t]&&(i[t]=e[t])})),r.forEach(n,(function(s){r.isObject(e[s])?i[s]=r.deepMerge(t[s],e[s]):"undefined"!==typeof e[s]?i[s]=e[s]:r.isObject(t[s])?i[s]=r.deepMerge(t[s]):"undefined"!==typeof t[s]&&(i[s]=t[s])})),r.forEach(o,(function(r){"undefined"!==typeof e[r]?i[r]=e[r]:"undefined"!==typeof t[r]&&(i[r]=t[r])}));var a=s.concat(n).concat(o),h=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return r.forEach(h,(function(r){"undefined"!==typeof e[r]?i[r]=e[r]:"undefined"!==typeof t[r]&&(i[r]=t[r])})),i}},5270:function(t,e,i){"use strict";var r=i("c532"),s=i("c401"),n=i("2e67"),o=i("2444");function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){a(t),t.headers=t.headers||{},t.data=s(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]}));var e=t.adapter||o.adapter;return e(t).then((function(e){return a(t),e.data=s(e.data,e.headers,t.transformResponse),e}),(function(e){return n(e)||(a(t),e&&e.response&&(e.response.data=s(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},"608c":function(t,e,i){},"7a77":function(t,e,i){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},"7aac":function(t,e,i){"use strict";var r=i("c532");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,i,s,n,o){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),r.isString(s)&&a.push("path="+s),r.isString(n)&&a.push("domain="+n),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"83b9":function(t,e,i){"use strict";var r=i("d925"),s=i("e683");t.exports=function(t,e){return t&&!r(e)?s(t,e):e}},"8df4":function(t,e,i){"use strict";var r=i("7a77");function s(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new r(t),e(i.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var t,e=new s((function(e){t=e}));return{token:e,cancel:t}},t.exports=s},afdd:function(t,e,i){"use strict";var r=i("8336");e["a"]=r["a"]},b50d:function(t,e,i){"use strict";var r=i("c532"),s=i("467f"),n=i("30b5"),o=i("83b9"),a=i("c345"),h=i("3934"),l=i("2d83");t.exports=function(t){return new Promise((function(e,u){var c=t.data,p=t.headers;r.isFormData(c)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",v=t.auth.password||"";p.Authorization="Basic "+btoa(d+":"+v)}var m=o(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),n(m,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?f.response:f.responseText,n={data:r,status:f.status,statusText:f.statusText,headers:i,config:t,request:f};s(e,u,n),f=null}},f.onabort=function(){f&&(u(l("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){u(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),u(l(e,t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=i("7aac"),g=(t.withCredentials||h(m))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(p[t.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(p,(function(t,e){"undefined"===typeof c&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(b){if("json"!==t.responseType)throw b}"function"===typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),u(t),f=null)})),void 0===c&&(c=null),f.send(c)}))}},b936:function(t,e,i){},bc3a:function(t,e,i){t.exports=i("cee4")},c345:function(t,e,i){"use strict";var r=i("c532"),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,n,o={};return t?(r.forEach(t.split("\n"),(function(t){if(n=t.indexOf(":"),e=r.trim(t.substr(0,n)).toLowerCase(),i=r.trim(t.substr(n+1)),e){if(o[e]&&s.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}})),o):o}},c3f0:function(t,e,i){"use strict";var r=i("80d2");const s=t=>{const{touchstartX:e,touchendX:i,touchstartY:r,touchendY:s}=t,n=.5,o=16;t.offsetX=i-e,t.offsetY=s-r,Math.abs(t.offsetY)<n*Math.abs(t.offsetX)&&(t.left&&i<e-o&&t.left(t),t.right&&i>e+o&&t.right(t)),Math.abs(t.offsetX)<n*Math.abs(t.offsetY)&&(t.up&&s<r-o&&t.up(t),t.down&&s>r+o&&t.down(t))};function n(t,e){const i=t.changedTouches[0];e.touchstartX=i.clientX,e.touchstartY=i.clientY,e.start&&e.start(Object.assign(t,e))}function o(t,e){const i=t.changedTouches[0];e.touchendX=i.clientX,e.touchendY=i.clientY,e.end&&e.end(Object.assign(t,e)),s(e)}function a(t,e){const i=t.changedTouches[0];e.touchmoveX=i.clientX,e.touchmoveY=i.clientY,e.move&&e.move(Object.assign(t,e))}function h(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>n(t,e),touchend:t=>o(t,e),touchmove:t=>a(t,e)}}function l(t,e,i){const s=e.value,n=s.parent?t.parentElement:t,o=s.options||{passive:!0};if(!n)return;const a=h(e.value);n._touchHandlers=Object(n._touchHandlers),n._touchHandlers[i.context._uid]=a,Object(r["r"])(a).forEach(t=>{n.addEventListener(t,a[t],o)})}function u(t,e,i){const s=e.value.parent?t.parentElement:t;if(!s||!s._touchHandlers)return;const n=s._touchHandlers[i.context._uid];Object(r["r"])(n).forEach(t=>{s.removeEventListener(t,n[t])}),delete s._touchHandlers[i.context._uid]}const c={inserted:l,unbind:u};e["a"]=c},c401:function(t,e,i){"use strict";var r=i("c532");t.exports=function(t,e,i){return r.forEach(i,(function(i){t=i(t,e)})),t}},c532:function(t,e,i){"use strict";var r=i("1d2b"),s=Object.prototype.toString;function n(t){return"[object Array]"===s.call(t)}function o(t){return"undefined"===typeof t}function a(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function h(t){return"[object ArrayBuffer]"===s.call(t)}function l(t){return"undefined"!==typeof FormData&&t instanceof FormData}function u(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function c(t){return"string"===typeof t}function p(t){return"number"===typeof t}function f(t){return null!==t&&"object"===typeof t}function d(t){return"[object Date]"===s.call(t)}function v(t){return"[object File]"===s.call(t)}function m(t){return"[object Blob]"===s.call(t)}function y(t){return"[object Function]"===s.call(t)}function g(t){return f(t)&&y(t.pipe)}function b(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function w(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function x(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),n(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function M(){var t={};function e(e,i){"object"===typeof t[i]&&"object"===typeof e?t[i]=M(t[i],e):t[i]=e}for(var i=0,r=arguments.length;i<r;i++)x(arguments[i],e);return t}function C(){var t={};function e(e,i){"object"===typeof t[i]&&"object"===typeof e?t[i]=C(t[i],e):t[i]="object"===typeof e?C({},e):e}for(var i=0,r=arguments.length;i<r;i++)x(arguments[i],e);return t}function T(t,e,i){return x(e,(function(e,s){t[s]=i&&"function"===typeof e?r(e,i):e})),t}t.exports={isArray:n,isArrayBuffer:h,isBuffer:a,isFormData:l,isArrayBufferView:u,isString:c,isNumber:p,isObject:f,isUndefined:o,isDate:d,isFile:v,isBlob:m,isFunction:y,isStream:g,isURLSearchParams:b,isStandardBrowserEnv:S,forEach:x,merge:M,deepMerge:C,extend:T,trim:w}},c8af:function(t,e,i){"use strict";var r=i("c532");t.exports=function(t,e){r.forEach(t,(function(i,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[r])}))}},cee4:function(t,e,i){"use strict";var r=i("c532"),s=i("1d2b"),n=i("0a06"),o=i("4a7b"),a=i("2444");function h(t){var e=new n(t),i=s(n.prototype.request,e);return r.extend(i,n.prototype,e),r.extend(i,e),i}var l=h(a);l.Axios=n,l.create=function(t){return h(o(l.defaults,t))},l.Cancel=i("7a77"),l.CancelToken=i("8df4"),l.isCancel=i("2e67"),l.all=function(t){return Promise.all(t)},l.spread=i("0df6"),t.exports=l,t.exports.default=l},d925:function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},e683:function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},f6b4:function(t,e,i){"use strict";var r=i("c532");function s(){this.handlers=[]}s.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},s.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},s.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=s},f9cc:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"content-header"},[i("markets")],1),i("div",{staticClass:"content-body"},[i("v-container",{staticClass:"fill-height",staticStyle:{"max-width":"1280px"}},[i("v-row",{staticClass:"fill-height",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"market-layout--chart",attrs:{cols:"12"}},[t.renderComponent?i("chart",{attrs:{symbol:t.symbol}}):t._e()],1),i("v-col",{staticClass:"d-flex justify-center market-layout--createOrder",attrs:{cols:"12"}},[i("createOrder",{staticStyle:{width:"100%"},attrs:{symbol:t.symbol}})],1)],1)],1)],1)])},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"content-header"},[i("intervals")],1),i("div",{staticClass:"content-body d-flex justify-center align-center",staticStyle:{position:"relative"}},[i("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:!t.isDataLoaded,expression:"!isDataLoaded"}],attrs:{width:3,size:"70",indeterminate:""}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDataLoaded,expression:"isDataLoaded"}],ref:"chart",staticClass:"fill"}),i("span",{staticClass:"grey--text text-sm legend",domProps:{innerHTML:t._s(t.legend)}})],1)])},o=[];function a(t){return new u(t)}var h,l,u=function(){function t(t){var e=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return e._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(e){return e!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(e){return e.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var e=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+e+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();
/*!
 * @license
 * TradingView Lightweight Charts v2.0.0
 * Copyright (c) 2019 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */function c(t,e){var i,r=((i={})[0]=[],i[1]=[t.lineWidth,t.lineWidth],i[2]=[2*t.lineWidth,2*t.lineWidth],i[3]=[6*t.lineWidth,6*t.lineWidth],i[4]=[t.lineWidth,4*t.lineWidth],i)[e];t.setLineDash(r)}function p(t,e,i,r){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i,e+s),t.lineTo(r,e+s),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(h||(h={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(l||(l={}));var f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function d(t,e){function i(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var v=function(){return(v=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function m(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),s=0;for(e=0;e<i;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}function y(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function g(t){if(void 0===t)throw new Error("Value is undefined");return t}function b(t){if(null===t)throw new Error("Value is null");return t}function w(t){return b(g(t))}function S(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=0,s=e;r<s.length;r++){var n=s[r];for(var o in n)void 0!==n[o]&&("object"!=typeof n[o]||void 0===t[o]?t[o]=n[o]:S(t[o],n[o]))}return t}function x(t){return"number"==typeof t&&isFinite(t)}function M(t){return"number"==typeof t&&t%1==0}function C(t){return"string"==typeof t}function T(t){return!(t<=0||t>0)}function k(t){return"boolean"==typeof t}function _(t){var e,i,r,s=t;if(!s||"object"!=typeof s)return s;for(i in e=Array.isArray(s)?[]:{},s)s.hasOwnProperty(i)&&(r=s[i],e[i]=r&&"object"==typeof r?_(r):r);return e}function R(t){return null!==t}function P(t){return null===t?void 0:t}var E,A,V,L,$=function(){function t(){this.t=[]}return t.prototype.setRenderers=function(t){this.t=t},t.prototype.draw=function(t,e,i,r){this.t.forEach((function(s){t.save(),s.draw(t,e,i,r),t.restore()}))},t}(),F=function(){function t(){}return t.prototype.draw=function(t,e,i,r){t.save(),t.scale(e,e),this._drawImpl(t,i,r),t.restore()},t.prototype.drawBackground=function(t,e,i,r){t.save(),t.scale(e,e),this._drawBackgroundImpl(t,i,r),t.restore()},t.prototype._drawBackgroundImpl=function(t,e,i){},t}(),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._data=null,e}return d(e,t),e.prototype.setData=function(t){this._data=t},e.prototype._drawImpl=function(t){if(null!==this._data&&null!==this._data.visibleRange){var e=this._data.visibleRange,i=this._data,r=function(r){t.beginPath();for(var s=e.to-1;s>=e.from;--s){var n=i.items[s];t.moveTo(n.x,n.y),t.arc(n.x,n.y,r,0,2*Math.PI)}t.fill()};t.fillStyle=i.backColor,r(i.radius+2),t.fillStyle=i.lineColor,r(i.radius)}},e}(F),D={from:0,to:1},O=function(){function t(t,e){this.i=new $,this.s=[],this.u=[],this.o=!0,this.l=t,this.v=e,this.i.setRenderers(this.s)}return t.prototype.update=function(t){var e=this,i=this.l.serieses();i.length!==this.s.length&&(this.u=i.map((function(){return{items:[{x:0,y:0,time:0,price:0}],lineColor:"",backColor:e.l.options().layout.backgroundColor,radius:0,visibleRange:null}})),this.s=this.u.map((function(t){var e=new B;return e.setData(t),e})),this.i.setRenderers(this.s)),this.o=!0},t.prototype.renderer=function(t,e,i){return this.o&&(this.M(),this.o=!1),this.i},t.prototype.M=function(){var t=this,e=this.l.serieses(),i=this.v.appliedIndex(),r=this.l.timeScale();e.forEach((function(e,s){var n=t.u[s],o=e.markerDataAtIndex(i);if(null!==o){var a=b(e.firstValue());n.lineColor=e.barColorer().barStyle(i).barColor,n.backColor=t.l.options().layout.backgroundColor,n.radius=o.radius,n.items[0].price=o.price,n.items[0].y=e.priceScale().priceToCoordinate(o.price,a.value),n.items[0].time=i,n.items[0].x=r.indexToCoordinate(i),n.visibleRange=D}else n.visibleRange=null}))},t}(),z=function(){function t(t){this.m=t}return t.prototype.draw=function(t,e,i,r){if(null!==this.m){var s=this.m.vertLine.visible,n=this.m.horzLine.visible;if(s||n){t.save();var o=Math.round(this.m.x*e),a=Math.round(this.m.y*e),h=Math.ceil(this.m.w*e),l=Math.ceil(this.m.h*e);t.lineCap="butt",s&&o>=0&&(t.lineWidth=Math.floor(this.m.vertLine.lineWidth*e),t.strokeStyle=this.m.vertLine.color,t.fillStyle=this.m.vertLine.color,c(t,this.m.vertLine.lineStyle),function(t,e,i,r){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(e+s,i),t.lineTo(e+s,r),t.stroke()}(t,o,0,l)),n&&a>=0&&(t.lineWidth=Math.floor(this.m.horzLine.lineWidth*e),t.strokeStyle=this.m.horzLine.color,t.fillStyle=this.m.horzLine.color,c(t,this.m.horzLine.lineStyle),p(t,a,0,h)),t.restore()}}},t}(),I=function(){function t(t){this.o=!0,this.p={vertLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},horzLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},w:0,h:0,x:0,y:0},this.g=new z(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){return this.o&&this.M(),this.g},t.prototype.M=function(){var t=this.k.visible(),e=b(this.k.pane()),i=e.model().options().crosshair,r=this.p;r.horzLine.visible=t&&this.k.horzLineVisible(e),r.vertLine.visible=t&&this.k.vertLineVisible(),r.horzLine.lineWidth=i.horzLine.width,r.horzLine.lineStyle=i.horzLine.style,r.horzLine.color=i.horzLine.color,r.vertLine.lineWidth=i.vertLine.width,r.vertLine.lineStyle=i.vertLine.style,r.vertLine.color=i.vertLine.color,r.w=e.width(),r.h=e.height(),r.x=this.k.appliedX(),r.y=this.k.appliedY()},t}(),N={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function U(t){return function(t,e,i){return T(e)||e<t?t:e>i?i:Math.round(e)}(0,t,255)}function W(t){return function(t,e,i){return T(e)||e<t?t:e>i?i:Math.round(1e4*e)/1e4}(0,t,1)}function j(t){(t=t.toLowerCase())in N&&(t=N[t]);var e,i,r=(e=t,null!==(i=V.re.exec(e))?V.parse(i):null);if(null!==r)return r;var s=function(t){var e=A.re.exec(t);return null!==e?A.parse(e):null}(t);if(null!==s)return s;var n=function(t){var e=E.re.exec(t);return null!==e?E.parse(e):null}(t);if(null!==n)return n;var o=function(t){var e=L.re.exec(t);return null!==e?L.parse(e):null}(t);return null!==o?[o[0],o[1],o[2]]:null}function q(t){var e=j(t);if(null!==e)return e;throw new Error("Passed color string "+t+" does not match any of the known color representations")}function Y(t,e){if(e<0||e>255)throw new Error("invalid threshold value, valid values are [0, 255]");return function(t){return.199*t[0]+.687*t[1]+.114*t[2]}(t)>=e?"white":"black"}function H(t){return function(t){return 0===t.indexOf("#")}(t)?t:(i=q(t),r=1,"rgba("+(e=[i[0],i[1],i[2],W(r)])[0]+", "+e[1]+", "+e[2]+", "+e[3]+")");var e,i,r}function X(t){return"black"===Y(q(t),160)?"white":"black"}function K(t,e,i,r,s,n){t.fillRect(e,i,n,s),t.fillRect(e+n,i,r-2*n,n),t.fillRect(e+n,i+s-n,r-2*n,n),t.fillRect(e+r-n,i,n,s)}function J(t,e,i){t.save(),t.scale(e,e),i(),t.restore()}function Z(t,e,i,r,s,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,r,s),t.restore()}!function(t){t.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,t.parse=function(t){return[U(parseInt(t[1]+t[1],16)),U(parseInt(t[2]+t[2],16)),U(parseInt(t[3]+t[3],16))]}}(E||(E={})),function(t){t.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,t.parse=function(t){return[U(parseInt(t[1],16)),U(parseInt(t[2],16)),U(parseInt(t[3],16))]}}(A||(A={})),function(t){t.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,t.parse=function(t){return[U(parseInt(t[1],10)),U(parseInt(t[2],10)),U(parseInt(t[3],10))]}}(V||(V={})),function(t){t.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,t.parse=function(t){return[U(parseInt(t[1],10)),U(parseInt(t[2],10)),U(parseInt(t[3],10)),W(parseFloat(t[4]))]}}(L||(L={}));var Q,G=function(){function t(t,e){this.setData(t,e)}return t.prototype.setData=function(t,e){this.m=t,this.N=e},t.prototype.draw=function(t,e,i,r,s,n){if(this.m.visible){t.font=e.font;var o=this.m.tickVisible?e.tickLength:0,a=e.borderSize,h=e.paddingTop,l=e.paddingBottom,u=e.paddingInner,c=e.paddingOuter,p=this.m.text,f=Math.ceil(i.measureText(t,p)),d=e.baselineOffset,v=e.fontSize+h+l,m=Math.ceil(.5*v),y=a+f+u+c+o,g=this.N.coordinate;this.N.fixedCoordinate&&(g=this.N.fixedCoordinate);var b,w,S=(g=Math.round(g))-m,x=S+v,M="right"===s,C=M?r:0,T=Math.ceil(r*n),k=C;if(t.fillStyle=H(this.N.background),t.lineWidth=1,t.lineCap="butt",p){M?(b=C-o,w=(k=C-y)+c):(k=C+y,b=C+o,w=C+a+o+u);var _=Math.max(1,Math.floor(n)),R=Math.max(1,Math.floor(a*n)),P=M?T:0,E=Math.round(S*n),A=Math.round(k*n),V=Math.round(g*n)-Math.floor(.5*n),L=V+_+(V-E),$=Math.round(b*n);t.save(),t.beginPath(),t.moveTo(P,E),t.lineTo(A,E),t.lineTo(A,L),t.lineTo(P,L),t.fill(),t.fillStyle=this.m.borderColor,t.fillRect(M?T-R:0,E,R,L-E),this.m.tickVisible&&(t.fillStyle=this.N.color,t.fillRect(P,V,$-P,_)),t.textAlign="left",t.fillStyle=this.N.color,J(t,n,(function(){t.fillText(p,w,x-l-d)})),t.restore()}}},t.prototype.height=function(t,e){return this.m.visible?t.fontSize+t.paddingTop+t.paddingBottom:0},t}(),tt=function(){function t(t){this.S={coordinate:0,color:"#FFF",background:"#000"},this.D={text:"",visible:!1,tickVisible:!0,borderColor:""},this.C={text:"",visible:!1,tickVisible:!1,borderColor:""},this.o=!0,this.T=new(t||G)(this.D,this.S),this.L=new(t||G)(this.C,this.S)}return t.prototype.text=function(){return this.D.text},t.prototype.background=function(){return this.S.background},t.prototype.color=function(){return X(this.background())},t.prototype.coordinate=function(){return this.A(),this.S.coordinate},t.prototype.update=function(){this.o=!0},t.prototype.height=function(t,e){return void 0===e&&(e=!1),Math.max(this.T.height(t,e),this.L.height(t,e))},t.prototype.getFixedCoordinate=function(){return this.S.fixedCoordinate||0},t.prototype.setFixedCoordinate=function(t){this.S.fixedCoordinate=t},t.prototype.isVisible=function(){return this.A(),this.D.visible||this.C.visible},t.prototype.isAxisLabelVisible=function(){return this.A(),this.D.visible},t.prototype.isPaneLabelVisible=function(){return this.A(),this.C.visible},t.prototype.renderer=function(){return this.A(),this.T.setData(this.D,this.S),this.L.setData(this.C,this.S),this.T},t.prototype.paneRenderer=function(){return this.A(),this.T.setData(this.D,this.S),this.L.setData(this.C,this.S),this.L},t.prototype.A=function(){this.o&&(this._updateRendererData(this.D,this.C,this.S),this.o=!1)},t}(),et=function(t){function e(e,i,r){var s=t.call(this)||this;return s.k=e,s.B=i,s.V=r,s}return d(e,t),e.prototype._updateRendererData=function(t,e,i){t.visible=!1;var r=this.k.options().horzLine;if(r.labelVisible){var s=this.B.firstValue();if(this.k.visible()&&!this.B.isEmpty()&&null!==s){i.background=r.labelBackgroundColor,i.color=X(r.labelBackgroundColor);var n=this.V(this.B);i.coordinate=n.coordinate,t.text=this.B.formatPrice(n.price,s),t.visible=!0}}},e}(tt),it=/[1-9]/g,rt=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,e,i){var r=this;if(null!==this.m&&!1!==this.m.visible&&0!==this.m.text.length){t.font=e.font;var s=Math.round(e.widthCache.measureText(t,this.m.text,it));if(!(s<=0)){t.save();var n=e.paddingHorizontal,o=s+2*n,a=o/2,h=this.m.width,l=this.m.coordinate,u=Math.floor(l-a)+.5;u<0?(l+=Math.abs(0-u),u=Math.floor(l-a)+.5):u+o>h&&(l-=Math.abs(h-(u+o)),u=Math.floor(l-a)+.5);var c=u+o,p=0+e.borderSize+e.paddingTop+e.fontSize+e.paddingBottom;t.fillStyle=this.m.background;var f=Math.round(u*i),d=Math.round(0*i),v=Math.round(c*i),m=Math.round(p*i);t.fillRect(f,d,v-f,m-d);var y=Math.round(this.m.coordinate*i),g=d,w=Math.round((g+e.borderSize+e.tickLength)*i);t.fillStyle=this.m.color;var S=Math.max(1,Math.floor(i)),x=Math.floor(.5*i);t.fillRect(y-x,g,S,w-g);var M=p-e.baselineOffset-e.paddingBottom;t.textAlign="left",t.fillStyle=this.m.color,J(t,i,(function(){t.fillText(b(r.m).text,u+n,M)})),t.restore()}}},t}(),st=function(t){function e(e,i,r){var s=t.call(this)||this;return s.o=!0,s.g=new rt,s.p={visible:!1,background:"#4c525e",color:"white",text:"",width:0,coordinate:NaN},s.v=e,s.F=i,s.V=r,s}return d(e,t),e.prototype.update=function(){this.o=!0},e.prototype.renderer=function(){return this.o&&(this.M(),this.o=!1),this.g.setData(this.p),this.g},e.prototype.M=function(){var t=this.p;t.visible=!1;var e=this.v.options().vertLine;if(e.labelVisible){var i=this.F.timeScale();if(!i.isEmpty()){var r=i.indexToUserTime(this.v.appliedIndex());t.width=i.width();var s=this.V();s.time&&(t.coordinate=s.coordinate,t.text=i.formatDateTime(b(r)),t.visible=!0,t.background=e.labelBackgroundColor,t.color=X(e.labelBackgroundColor))}}},e}(function(){function t(){this._text="",this._background="#585858",this._coordinate=0}return t.prototype.text=function(){return this._text},t.prototype.background=function(){return this._background},t.prototype.color=function(){return"black"===Y(q(this._background),150)?"white":"black"},t.prototype.coordinate=function(){return this._coordinate},t}()),nt=function(){function t(){this._priceScale=null,this.P=0}return t.prototype.zorder=function(){return this.P},t.prototype.setZorder=function(t){this.P=t},t.prototype.priceScale=function(){return this._priceScale},t.prototype.setPriceScale=function(t){this._priceScale=t},t.prototype.priceAxisViews=function(t,e){return[]},t.prototype.paneViews=function(t){return[]},t.prototype.timeAxisViews=function(){return[]},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(Q||(Q={}));var ot=function(t){function e(e,i){var r,s,n=t.call(this)||this;n.I=null,n.O=NaN,n.R=0,n.W=!0,n.U=new Map,n.q=!1,n.j=NaN,n.H=NaN,n.Y=NaN,n.K=NaN,n.F=e,n.$=i,n._=new O(e,n),n.X=(r=function(){return n.O},s=function(){return n.H},function(t){var e=s(),i=r();if(t===b(n.I).defaultPriceScale())return{price:i,coordinate:e};var o=b(t.firstValue());return{price:t.coordinateToPrice(e,o),coordinate:e}});var o=function(t,e){return function(){return{time:n.F.timeScale().indexToUserTime(t()),coordinate:e()}}}((function(){return n.R}),(function(){return n.appliedX()}));return n.Z=new st(n,e,o),n.J=new I(n),n}return d(e,t),e.prototype.index=function(){return this.R},e.prototype.options=function(){return this.$},e.prototype.saveOriginCoord=function(t,e){this.Y=t,this.K=e},e.prototype.clearOriginCoord=function(){this.Y=NaN,this.K=NaN},e.prototype.originCoordX=function(){return this.Y},e.prototype.originCoordY=function(){return this.K},e.prototype.setPosition=function(t,e,i){this.q||(this.q=!0),this.W=!0,this.G(t,e,i)},e.prototype.appliedIndex=function(){return this.R},e.prototype.appliedX=function(){return this.j},e.prototype.appliedY=function(){return this.H},e.prototype.visible=function(){return this.W},e.prototype.clearPosition=function(){this.W=!1,this.tt(),this.O=NaN,this.j=NaN,this.H=NaN,this.I=null,this.clearOriginCoord()},e.prototype.paneViews=function(t){return null!==this.I?[this.J,this._]:[]},e.prototype.horzLineVisible=function(t){return t===this.I&&this.$.horzLine.visible},e.prototype.vertLineVisible=function(){return this.$.vertLine.visible},e.prototype.priceAxisViews=function(t,e){this.W&&this.I===t||this.U.clear();var i=[];return this.I===t&&i.push(this.it(this.U,e,this.X)),i},e.prototype.timeAxisViews=function(){return this.W?[this.Z]:[]},e.prototype.pane=function(){return this.I},e.prototype.updateAllViews=function(){this.U.forEach((function(t){return t.update()})),this.Z.update(),this._.update()},e.prototype.nt=function(t){return t&&!t.defaultPriceScale().isEmpty()?t.defaultPriceScale():null},e.prototype.G=function(t,e,i){this.st(t,e,i)&&this.updateAllViews()},e.prototype.st=function(t,e,i){var r=this.j,s=this.H,n=this.O,o=this.R,a=this.I,h=this.nt(i);this.R=t,this.j=isNaN(t)?NaN:this.F.timeScale().indexToCoordinate(t),this.I=i;var l=null!==h?h.firstValue():null;return null!==h&&null!==l?(this.O=e,this.H=h.priceToCoordinate(e,l)):(this.O=NaN,this.H=NaN),r!==this.j||s!==this.H||o!==this.R||n!==this.O||a!==this.I},e.prototype.tt=function(){var t=this.F.serieses().map((function(t){return t.bars().lastIndex()})).filter(R),e=0===t.length?null:Math.max.apply(Math,t);this.R=null!==e?e:NaN},e.prototype.it=function(t,e,i){var r=t.get(e);return void 0===r&&(r=new et(this,e,i),t.set(e,r)),r},e}(nt),at=".",ht="'";function lt(t,e){if(!x(t))return"n/a";if(!M(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}var ut,ct=function(){function t(t,e,i,r){if(e||(e=1),x(t)&&M(t)||(t=100),t<0)throw new TypeError("invalid base");this.B=t,this.ht=e,this.rt=r,i&&void 0!==r&&r>0&&2!==r&&4!==r&&8!==r||(this.ut=i,this.et())}return t.prototype.format=function(t){var e=t<0?"âˆ’":"";return t=Math.abs(t),this.ut?e+this.ot(t):e+this.ft(t)},t.prototype.et=function(){if(this._fractionalLength=0,this.B>0&&this.ht>0){var t=this.B;for(this.ut&&this.rt&&(t/=this.rt);t>1;)t/=10,this._fractionalLength++}},t.prototype.ft=function(t){var e;e=this.ut?Math.pow(10,this._fractionalLength||0):this.B/this.ht;var i=Math.floor(t),r="",s=void 0!==this._fractionalLength?this._fractionalLength:NaN;if(e>1){var n=+(Math.round(t*e)-i*e).toFixed(this._fractionalLength);n>=e&&(n-=e,i+=1),r=at+lt(+n.toFixed(this._fractionalLength)*this.ht,s)}else i=Math.round(i*e)/e,s>0&&(r=at+lt(0,s));return i.toFixed(0)+r},t.prototype.ot=function(t){var e=this.B/this.ht,i=Math.floor(t),r=Math.round(t*e)-i*e;if(r===e&&(r=0,i+=1),!this._fractionalLength)throw new Error("_fractionalLength is not calculated");var s="";if(this.rt){var n=r%this.rt,o=lt(r=(r-n)/this.rt,this._fractionalLength),a=2===this.rt?["0","5"][n]:8===this.rt?["0","1","2","3","4","5","6","7"][n]:["0","2","5","7"][n];s=o+ht+a}else s=lt(r*this.ht,this._fractionalLength);return i.toString()+ht+s},t}(),pt=function(t){function e(e){return void 0===e&&(e=100),t.call(this,e)||this}return d(e,t),e.prototype.format=function(e){return t.prototype.format.call(this,e)+"%"},e}(ct),ft=function(){function t(){this.at=[]}return t.prototype.subscribe=function(t,e,i){var r={callback:t,linkedObject:e,singleshot:!0===i};this.at.push(r)},t.prototype.unsubscribe=function(t){var e=this.at.findIndex((function(e){return t===e.callback}));e>-1&&this.at.splice(e,1)},t.prototype.unsubscribeAll=function(t){this.at=this.at.filter((function(e){return e.linkedObject===t}))},t.prototype.fire=function(t,e){var i=m(this.at);this.at=this.at.filter((function(t){return!t.singleshot})),i.forEach((function(i){return i.callback(t,e)}))},t.prototype.hasListeners=function(){return this.at.length>0},t.prototype.destroy=function(){this.at=[]},t}(),dt=function(t){function e(e){var i=t.call(this)||this;return i.F=e,i}return d(e,t),e.prototype.model=function(){return this.F},e.prototype.minMove=function(){return 0},e.prototype.autoscaleInfo=function(t,e){return null},e}(nt),vt=function(){function t(t,e){this.ct=t,this.lt=e}return t.prototype.equals=function(t){return null!==t&&this.ct===t.ct&&this.lt===t.lt},t.prototype.clone=function(){return new t(this.ct,this.lt)},t.prototype.minValue=function(){return this.ct},t.prototype.setMinValue=function(t){this.ct=t},t.prototype.maxValue=function(){return this.lt},t.prototype.setMaxValue=function(t){this.lt=t},t.prototype.length=function(){return this.lt-this.ct},t.prototype.isEmpty=function(){return this.lt===this.ct||Number.isNaN(this.lt)||Number.isNaN(this.ct)},t.prototype.merge=function(e){return null===e?this:new t(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))},t.prototype.apply=function(t,e){this.ct=Math.min(this.ct,t),this.lt=Math.max(this.lt,e)},t.prototype.set=function(t,e){this.ct=t,this.lt=e},t.prototype.scaleAroundCenter=function(t){if(x(t)&&0!==this.lt-this.ct){var e=.5*(this.lt+this.ct),i=this.lt-e,r=this.ct-e;i*=t,r*=t,this.lt=e+i,this.ct=e+r}},t.prototype.shift=function(t){x(t)&&(this.lt+=t,this.ct+=t)},t.prototype.containsStrictly=function(t){return t.minValue()>this.ct&&t.maxValue()<this.lt},t}();function mt(t,e,i){return Math.min(Math.max(t,e),i)}function yt(t,e,i){return e-t<=i}function gt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function bt(t){var e=Math.ceil(t);return e%2!=0?e-1:e}function wt(t){var e=Math.ceil(t);return e%2==0?e-1:e}function St(t,e){var i=100*(t-e)/e;return e<0?-i:i}function xt(t,e){var i=St(t.minValue(),e),r=St(t.maxValue(),e);return new vt(i,r)}function Mt(t,e){var i=100*(t-e)/e+100;return e<0?-i:i}function Ct(t,e){var i=Mt(t.minValue(),e),r=Mt(t.maxValue(),e);return new vt(i,r)}function Tt(t){var e=Math.abs(t);if(e<1e-8)return 0;var i=gt(e+1e-4)+4;return t<0?-i:i}function kt(t){var e=Math.abs(t);if(e<1e-8)return 0;var i=Math.pow(10,e-4)-1e-4;return t<0?-i:i}function _t(t){if(null===t)return null;var e=Tt(t.minValue()),i=Tt(t.maxValue());return new vt(e,i)}!function(t){t[t.LogicalOffset=4]="LogicalOffset",t[t.CoordOffset=1e-4]="CoordOffset"}(ut||(ut={}));var Rt=function(){function t(t,e){if(this.vt=t,this.dt=e,function(t){if(t<0)return!1;for(var e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.vt))this.Mt=[2,2.5,2];else{this.Mt=[];for(var i=this.vt;1!==i;){if(i%2==0)this.Mt.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Mt.push(2),this.Mt.push(2.5),i/=5}if(this.Mt.length>100)throw new Error("something wrong with base")}}}return t.prototype.tickSpan=function(t,e,i){for(var r,s,n,o=0===this.vt?0:1/this.vt,a=Math.pow(10,Math.max(0,Math.ceil(gt(t-e)))),h=0,l=this.dt[0];;){var u=yt(a,o,1e-9)&&a>o+1e-9,c=yt(a,i*l,1e-9),p=yt(a,1,1e-9);if(!(u&&c&&p))break;a/=l,l=this.dt[++h%this.dt.length]}if(a<=o+1e-9&&(a=o),a=Math.max(1,a),this.Mt.length>0&&(r=a,s=1,n=1e-9,Math.abs(r-s)<n))for(h=0,l=this.Mt[0];yt(a,i*l,1e-9)&&a>o+1e-9;)a/=l,l=this.Mt[++h%this.Mt.length];return a},t}(),Pt=function(){function t(t,e,i,r){this.wt=[],this.B=t,this.vt=e,this.bt=i,this.pt=r}return t.prototype.setBase=function(t){if(t<0)throw new Error("base < 0");this.vt=t},t.prototype.tickSpan=function(t,e){if(t<e)throw new Error("high < low");var i=this.B.height(),r=(t-e)*this.gt()/i,s=new Rt(this.vt,[2,2.5,2]),n=new Rt(this.vt,[2,2,2.5]),o=new Rt(this.vt,[2.5,2,2]),a=[];return a.push(s.tickSpan(t,e,r)),a.push(n.tickSpan(t,e,r)),a.push(o.tickSpan(t,e,r)),function(t){if(t.length<1)throw Error("array is empty");for(var e=t[0],i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(a)},t.prototype.rebuildTickMarks=function(){var t=this.B,e=t.firstValue();if(null!==e){var i=t.height(),r=this.bt(i-1,e),s=this.bt(0,e),n=this.B.options().entireTextOnly?this.yt()/2:0,o=n,a=i-1-n,h=Math.max(r,s),l=Math.min(r,s);if(h!==l){for(var u=this.tickSpan(h,l),c=h%u,p=h>=l?1:-1,f=null,d=0,v=h-(c+=c<0?u:0);v>l;v-=u){var m=this.pt(v,e,!0);null!==f&&Math.abs(m-f)<this.gt()||m<o||m>a||(d<this.wt.length?(this.wt[d].coord=m,this.wt[d].label=t.formatLogical(v)):this.wt.push({coord:m,label:t.formatLogical(v)}),d++,f=m,t.isLog()&&(u=this.tickSpan(v*p,l)))}this.wt.length=d}else this.wt=[]}else this.wt=[]},t.prototype.marks=function(){return this.wt},t.prototype.yt=function(){return this.B.fontSize()},t.prototype.gt=function(){return Math.ceil(2.5*this.yt())},t}(),Et=function(){function t(t){this.kt=t}return t.prototype.format=function(t){var e="";return t<0&&(e="-",t=-t),t<995?e+this.Nt(t):t<999995?e+this.Nt(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Nt(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Nt(t/1e9)+"B")},t.prototype.Nt=function(t){var e=Math.pow(10,this.kt);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.kt).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,e){return e}))},t}();function At(t,e,i,r){if(0!==e.length){var s=e[r.from].x,n=e[r.from].y;t.moveTo(s,n);for(var o=r.from+1;o<r.to;++o){var a=e[o];if(1===i){var h=e[o-1].y,l=a.x;t.lineTo(l,h)}t.lineTo(a.x,a.y)}}}var Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._data=null,e}return d(e,t),e.prototype.setData=function(t){this._data=t},e.prototype._drawImpl=function(t){if(null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange){t.lineCap="butt",t.strokeStyle=this._data.lineColor,t.lineWidth=this._data.lineWidth,c(t,this._data.lineStyle),t.lineWidth=1,t.beginPath(),t.moveTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.items[this._data.visibleRange.from].y),At(t,this._data.items,this._data.lineType,this._data.visibleRange),t.lineTo(this._data.items[this._data.visibleRange.to-1].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom),t.closePath();var e=t.createLinearGradient(0,0,0,this._data.bottom);e.addColorStop(0,this._data.topColor),e.addColorStop(1,this._data.bottomColor),t.fillStyle=e,t.fill()}},e}(F),Lt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._data=null,e}return d(e,t),e.prototype.setData=function(t){this._data=t},e.prototype._drawImpl=function(t){null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange&&(t.lineCap="square",t.lineWidth=this._data.lineWidth,c(t,this._data.lineStyle),t.strokeStyle=this._data.lineColor,t.lineJoin="miter",t.beginPath(),At(t,this._data.items,this._data.lineType,this._data.visibleRange),t.stroke())},e}(F);function $t(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);for(var n=s-r;0<n;){var o=n>>1,a=r+o;i(t[a],e)?(r=a+1,n-=o+1):n=o}return r}function Ft(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);for(var n=s-r;0<n;){var o=n>>1,a=r+o;i(e,t[a])?n=o:(r=a+1,n-=o+1)}return r}function Bt(t,e){return t.time<e}function Dt(t,e){return t<e.time}function Ot(t,e,i){var r=e.firstBar(),s=e.lastBar(),n=$t(t,r,Bt),o=Ft(t,s,Dt);if(!i)return{from:n,to:o};var a=n,h=o;return n>0&&n<t.length&&t[n].time>=r&&(a=n-1),o>0&&o<t.length&&t[o-1].time<=s&&(h=o+1),{from:a,to:h}}var zt,It=function(){function t(t,e,i){this._invalidated=!0,this._dataInvalidated=!0,this._items=[],this._itemsVisibleRange=null,this._series=t,this._model=e,this.St=i}return t.prototype.update=function(t){this._invalidated=!0,"data"===t&&(this._dataInvalidated=!0)},t.prototype._makeValid=function(){this._dataInvalidated&&(this._fillRawPoints(),this._dataInvalidated=!1),this._invalidated&&(this._updatePoints(),this._invalidated=!1)},t.prototype._clearVisibleRange=function(){this._itemsVisibleRange=null},t.prototype._updatePoints=function(){var t=this._series.priceScale(),e=this._model.timeScale();if(this._clearVisibleRange(),!e.isEmpty()&&!t.isEmpty()){var i=e.visibleBars();if(null!==i&&0!==this._series.data().bars().size()){var r=this._series.firstValue();null!==r&&(this._itemsVisibleRange=Ot(this._items,i,this.St),this._convertToCoordinates(t,e,r.value))}}},t}(),Nt=function(t){function e(e,i){return t.call(this,e,i,!0)||this}return d(e,t),e.prototype._convertToCoordinates=function(t,e,i){e.indexesToCoordinates(this._items,P(this._itemsVisibleRange)),t.pointsArrayToCoordinates(this._items,i,P(this._itemsVisibleRange))},e.prototype._createRawItemBase=function(t,e){return{time:t,price:e,x:NaN,y:NaN}},e.prototype._fillRawPoints=function(){var t=this,e=this._series.barFunction(),i=[],r=this._series.barColorer();this._series.bars().each((function(s,n){var o=e(n.value),a=t._createRawItem(s,o,r);return i.push(a),!1})),this._items=i},e}(It),Ut=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.g=new $,r.xt=new Vt,r.Dt=new Lt,r.g.setRenderers([r.xt,r.Dt]),r}return d(e,t),e.prototype.renderer=function(t,e){this._makeValid();var i=this._series.options(),r={lineType:i.lineType,items:this._items,lineColor:i.lineColor,lineStyle:i.lineStyle,lineWidth:i.lineWidth,topColor:i.topColor,bottomColor:i.bottomColor,bottom:t,visibleRange:this._itemsVisibleRange};return this.xt.setData(r),this.Dt.setData(r),this.g},e.prototype._createRawItem=function(t,e){return this._createRawItemBase(t,e)},e}(Nt),Wt=function(){function t(){this.m=null,this.Ct=0,this.Tt=0}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,e,i,r){if(null!==this.m&&0!==this.m.bars.length&&null!==this.m.visibleRange){this.Ct=Math.max(1,Math.floor(function(t,e){return Math.floor(.3*t*e)}(this.m.barSpacing,e))),this.Ct>=2&&Math.floor(e)%2!=this.Ct%2&&this.Ct--,this.Tt=this.m.thinBars?Math.min(this.Ct,Math.floor(e)):this.Ct;for(var s=null,n=this.m.visibleRange.from;n<this.m.visibleRange.to;++n){var o=this.m.bars[n];s!==o.color&&(t.fillStyle=o.color,s=o.color);var a=Math.floor(.5*this.Tt),h=Math.round(o.x*e),l=h-a,u=this.Tt,c=l+u-1,p=Math.round(o.highY*e)-a,f=Math.round(o.lowY*e)+a,d=Math.max(f-p,this.Tt);t.fillRect(l,p,u,d);var v=Math.ceil(1.5*this.Ct);if(this.Tt<=this.Ct){if(this.m.openVisible){var m=h-v,y=Math.max(p,Math.round(o.openY*e)-a),g=y+u-1;g>p+d-1&&(y=(g=p+d-1)-u+1),t.fillRect(m,y,l-m,g-y+1)}var b=h+v,w=Math.max(p,Math.round(o.closeY*e)-a),S=w+u-1;S>p+d-1&&(w=(S=p+d-1)-u+1),t.fillRect(c+1,w,b-c,S-w+1)}}}},t}(),jt=function(t){function e(e,i){return t.call(this,e,i,!1)||this}return d(e,t),e.prototype._convertToCoordinates=function(t,e,i){e.indexesToCoordinates(this._items,P(this._itemsVisibleRange)),t.barPricesToCoordinates(this._items,i,P(this._itemsVisibleRange))},e.prototype._createDefaultItem=function(t,e,i){return{time:t,open:e.value[0],high:e.value[1],low:e.value[2],close:e.value[3],x:NaN,openY:NaN,highY:NaN,lowY:NaN,closeY:NaN}},e.prototype._fillRawPoints=function(){var t=this,e=[],i=this._series.barColorer();this._series.bars().each((function(r,s){var n=t._createRawItem(r,s,i);return e.push(n),!1})),this._items=e},e}(It),qt=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.g=new Wt,r}return d(e,t),e.prototype.renderer=function(t,e){this._makeValid();var i=this._series.options(),r={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),openVisible:i.openVisible,thinBars:i.thinBars,visibleRange:this._itemsVisibleRange};return this.g.setData(r),this.g},e.prototype._createRawItem=function(t,e,i){return v(v({},this._createDefaultItem(t,e,i)),{color:i.barStyle(t).barColor})},e}(jt);!function(t){t[t.BarBorderWidth=1]="BarBorderWidth"}(zt||(zt={}));var Yt=function(){function t(){this.m=null,this.Ct=0}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,e,i,r){if(null!==this.m&&0!==this.m.bars.length&&null!==this.m.visibleRange){this.Ct=function(t,e){var i=Math.floor(.8*t*e),r=Math.floor(t*e),s=Math.min(i,r-1);return Math.max(1,s)}(this.m.barSpacing,e),this.Ct>=2&&Math.floor(e)%2!=this.Ct%2&&this.Ct--;var s=this.m.bars;this.m.wickVisible&&this.Et(t,s,this.m.visibleRange,e),this.m.borderVisible&&this.Lt(t,s,this.m.visibleRange,this.m.barSpacing,e);var n=this.At(e);(!this.m.borderVisible||this.Ct>2*n)&&this.Bt(t,s,this.m.visibleRange,e)}},t.prototype.Et=function(t,e,i,r){if(null!==this.m){var s="",n=Math.min(Math.floor(r),Math.floor(this.m.barSpacing*r));n=Math.min(n,this.Ct);for(var o=Math.floor(.5*n),a=i.from;a<i.to;a++){var h=e[a];h.wickColor!==s&&(t.fillStyle=h.wickColor,s=h.wickColor);var l=Math.round(Math.min(h.openY,h.closeY)*r),u=Math.round(Math.max(h.openY,h.closeY)*r),c=Math.round(h.highY*r),p=Math.round(h.lowY*r),f=Math.round(r*h.x);t.fillRect(f-o,c,n,l-c),t.fillRect(f-o,u+1,n,p-u)}}},t.prototype.At=function(t){var e=Math.floor(1*t);this.Ct<=2*e&&(e=Math.floor(.5*(this.Ct-1)));var i=Math.max(1,e);return this.Ct<=2*i?Math.floor(1*t):i},t.prototype.Lt=function(t,e,i,r,s){for(var n="",o=this.At(s),a=i.from;a<i.to;a++){var h=e[a];h.borderColor!==n&&(t.fillStyle=h.borderColor,n=h.borderColor);var l=Math.round(h.x*s)-Math.floor(.5*this.Ct),u=l+this.Ct-1,c=Math.round(Math.min(h.openY,h.closeY)*s),p=Math.round(Math.max(h.openY,h.closeY)*s);r>2*o?K(t,l,c,u-l+1,p-c+1,o):t.fillRect(l,c,u-l+1,p-c+1)}},t.prototype.Bt=function(t,e,i,r){if(null!==this.m)for(var s="",n=this.At(r),o=i.from;o<i.to;o++){var a=e[o],h=Math.round(Math.min(a.openY,a.closeY)*r),l=Math.round(Math.max(a.openY,a.closeY)*r),u=Math.round(a.x*r)-Math.floor(.5*this.Ct),c=u+this.Ct-1;if(this.m.borderVisible&&(u+=n,h+=n,c-=n,l-=n),!(h>l)){if(a.color!==s){var p=a.color;t.fillStyle=p,s=p}t.fillRect(u,h,c-u+1,l-h+1)}}},t}(),Ht=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.g=new Yt,r}return d(e,t),e.prototype.renderer=function(t,e){this._makeValid();var i=this._series.options(),r={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),wickVisible:i.wickVisible,borderVisible:i.borderVisible,visibleRange:this._itemsVisibleRange};return this.g.setData(r),this.g},e.prototype._createRawItem=function(t,e,i){var r=i.barStyle(t);return v(v({},this._createDefaultItem(t,e,i)),{color:r.barColor,wickColor:r.barWickColor,borderColor:r.barBorderColor})},e}(jt),Xt=function(){function t(){this.m=null,this.zt=[]}return t.prototype.setData=function(t){this.m=t,this.zt=[]},t.prototype.draw=function(t,e,i,r){if(null!==this.m&&0!==this.m.items.length&&null!==this.m.visibleRange){this.zt.length||this.Vt(e);for(var s=Math.round(this.m.histogramBase*e),n=Math.max(1,Math.floor(e)),o=this.m.visibleRange.from;o<this.m.visibleRange.to;o++){var a=this.m.items[o],h=this.zt[o-this.m.visibleRange.from],l=Math.round(a.y*e);t.fillStyle=a.color,t.fillRect(h.left,l,h.right-h.left+1,s-l+n)}}},t.prototype.Vt=function(t){if(null!==this.m&&0!==this.m.items.length&&null!==this.m.visibleRange){var e=Math.ceil(this.m.barSpacing*t)<=3?0:Math.max(1,Math.floor(t)),i=Math.round(this.m.barSpacing*t)-e;this.zt=new Array(this.m.visibleRange.to-this.m.visibleRange.from);for(var r=this.m.visibleRange.from;r<this.m.visibleRange.to;r++){var s,n=this.m.items[r],o=Math.round(n.x*t),a=void 0,h=void 0;i%2?(a=o-(s=(i-1)/2),h=o+s):(a=o-(s=i/2),h=o+s-1),this.zt[r-this.m.visibleRange.from]={left:a,right:h,roundedCenter:o,center:n.x*t,time:n.time}}for(r=this.m.visibleRange.from+1;r<this.m.visibleRange.to;r++){var l=this.zt[r-this.m.visibleRange.from],u=this.zt[r-this.m.visibleRange.from-1];l.time===u.time+1&&l.left-u.right!==e+1&&(u.roundedCenter>u.center?u.right=l.left-e-1:l.left=u.right+e+1)}var c=Math.ceil(this.m.barSpacing*t);for(r=this.m.visibleRange.from;r<this.m.visibleRange.to;r++){(l=this.zt[r-this.m.visibleRange.from]).right<l.left&&(l.right=l.left);var p=l.right-l.left+1;c=Math.min(p,c)}if(e>0&&c<4)for(r=this.m.visibleRange.from;r<this.m.visibleRange.to;r++)(p=(l=this.zt[r-this.m.visibleRange.from]).right-l.left+1)>c&&(l.roundedCenter>l.center?l.right-=1:l.left+=1)}else this.zt=[]},t}();function Kt(t){return{items:[],barSpacing:t,histogramBase:NaN,visibleRange:null}}var Jt,Zt=function(t){function e(e,i){var r=t.call(this,e,i,!1)||this;return r.i=new $,r.Ft=Kt(0),r.Pt=new Int32Array(0),r.g=new Xt,r}return d(e,t),e.prototype.renderer=function(t,e){return this._makeValid(),this.i},e.prototype._fillRawPoints=function(){var t=this,e=this._model.timeScale().barSpacing(),i=this._series.palette();this.Ft=Kt(e);var r=this._series.barFunction();this.Pt=new Int32Array(this._series.bars().size());var s=0,n=0,o=0,a=this._series.options().color;this._series.bars().each((function(e,h){var l=r(h.value),u=h.value[4],c=function(t,e,i){return{time:t,price:e,x:NaN,y:NaN,color:i}}(e,l,null!=u?i.colorByIndex(u):a),p=null==u?0:u+1;return++n<t.Ft.items.length?t.Ft.items[n]=c:t.Ft.items.push(c),t._items[o++]={time:e,x:0},t.Pt[s++]=p,!1})),this.g.setData(this.Ft),this.i.setRenderers([this.g])},e.prototype._clearVisibleRange=function(){t.prototype._clearVisibleRange.call(this),this.Ft.visibleRange=null},e.prototype._convertToCoordinates=function(t,e,i){if(null!==this._itemsVisibleRange){var r=e.barSpacing(),s=b(e.visibleBars()),n=t.priceToCoordinate(this._series.options().base,i);e.indexesToCoordinates(this.Ft.items),t.pointsArrayToCoordinates(this.Ft.items,i),this.Ft.histogramBase=n,this.Ft.visibleRange=Ot(this.Ft.items,s,!1),this.Ft.barSpacing=r,this.g.setData(this.Ft)}},e}(It),Qt=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.Dt=new Lt,r}return d(e,t),e.prototype.renderer=function(t,e){this._makeValid();var i=this._series.options(),r={items:this._items,lineColor:i.color,lineStyle:i.lineStyle,lineType:i.lineType,lineWidth:i.lineWidth,visibleRange:this._itemsVisibleRange};return this.Dt.setData(r),this.Dt},e.prototype._createRawItem=function(t,e){return this._createRawItemBase(t,e)},e}(Nt),Gt=/[2-9]/g,te=function(){function t(t){void 0===t&&(t=50),this.It=0,this.Ot=1,this.Rt=1,this.Wt={},this.Ut={},this.qt=t}return t.prototype.reset=function(){this.It=0,this.Ut={},this.Ot=1,this.Rt=1,this.Wt={}},t.prototype.measureText=function(t,e,i){var r=i||Gt,s=String(e).replace(r,"0");if(this.Ut[s])return this.Ut[s].width;if(this.It===this.qt){var n=this.Wt[this.Rt];delete this.Wt[this.Rt],delete this.Ut[n],this.Rt++,this.It--}var o=t.measureText(s).width;return 0===o&&e.length?0:(this.Ut[s]={width:o,tick:this.Ot},this.Wt[this.Ot]=s,this.It++,this.Ot++,o)},t}(),ee=function(){function t(t){this.jt=null,this.Ht=null,this.Yt="right",this.Kt=0,this.$t=t}return t.prototype.setParams=function(t,e,i,r){this.jt=t,this.Ht=e,this.Kt=i,this.Yt=r},t.prototype.draw=function(t,e){null!==this.Ht&&null!==this.jt&&this.jt.draw(t,this.Ht,this.$t,this.Kt,this.Yt,e)},t}(),ie=function(){function t(t,e,i){this._t=t,this.$t=new te(50),this.Xt=e,this.l=i,this.Zt=-1,this.g=new ee(this.$t)}return t.prototype.update=function(){this._t.update()},t.prototype.renderer=function(t,e){var i=this.l.paneForSource(this.Xt);if(null===i)return null;if(null===this.Xt.priceScale())return null;var r=i.priceScalePosition();if("overlay"===r)return null;var s=this.l.priceAxisRendererOptions();return s.fontSize!==this.Zt&&(this.Zt=s.fontSize,this.$t.reset()),this.g.setParams(this._t.paneRenderer(),s,e,r),this.g},t}(),re=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,e,i,r){if(null!==this.m&&!1!==this.m.visible){var s=Math.round(this.m.y*e);if(!(s<0||s>Math.ceil(this.m.height*e))){var n=Math.ceil(this.m.width*e);t.lineCap="butt",t.strokeStyle=this.m.color,t.lineWidth=Math.floor(this.m.lineWidth*e),c(t,this.m.lineStyle),p(t,s,0,n)}}},t}(),se=function(){function t(t){this._lineRendererData={width:0,height:0,y:0,color:"rgba(0, 0, 0, 0)",lineWidth:1,lineStyle:0,visible:!1},this._lineRenderer=new re,this.o=!0,this._series=t,this._model=t.model(),this._lineRenderer.setData(this._lineRendererData)}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){return this.o&&(this._updateImpl(t,e),this.o=!1),this._lineRenderer},t}(),ne=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.prototype._updateImpl=function(t,e){this._lineRendererData.visible=!1;var i=this._series.priceScale(),r=i.mode().mode;if(2===r||3===r){var s=this._series.options();if(s.baseLineVisible){var n=this._series.firstValue();null!==n&&(this._lineRendererData.visible=!0,this._lineRendererData.y=i.priceToCoordinate(n.value,n.value),this._lineRendererData.width=e,this._lineRendererData.height=t,this._lineRendererData.color=s.baseLineColor,this._lineRendererData.lineWidth=s.baseLineWidth,this._lineRendererData.lineStyle=s.baseLineStyle)}}},e}(se);function oe(t,e){return wt(Math.min(Math.max(t,12),30)*e)}function ae(t,e){switch(t){case"arrowDown":case"arrowUp":return oe(e,1);case"circle":return oe(e,.8);case"square":return oe(e,.7)}}function he(t){return bt(oe(t,1))}function le(t){return Math.max(oe(t,.1),3)}function ue(t,e,i,r,s){var n=ae("square",i),o=(n-1)/2,a=t-o,h=e-o;return r>=a&&r<=a+n&&s>=h&&s<=h+n}function ce(t,e,i,r,s,n){var o=(ae("arrowUp",n)-1)/2,a=(wt(n/2)-1)/2;e.fillStyle=s,e.beginPath(),t?(e.moveTo(i-o,r),e.lineTo(i,r-o),e.lineTo(i+o,r),e.lineTo(i+a,r),e.lineTo(i+a,r+o),e.lineTo(i-a,r+o),e.lineTo(i-a,r)):(e.moveTo(i-o,r),e.lineTo(i,r+o),e.lineTo(i+o,r),e.lineTo(i+a,r),e.lineTo(i+a,r-o),e.lineTo(i-a,r-o),e.lineTo(i-a,r)),e.fill()}function pe(t,e,i,r,s,n){return ue(e,i,r,s,n)}!function(t){t[t.MinShapeSize=12]="MinShapeSize",t[t.MaxShapeSize=30]="MaxShapeSize",t[t.MinShapeMargin=3]="MinShapeMargin"}(Jt||(Jt={}));var fe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m=null,e}return d(e,t),e.prototype.setData=function(t){this.m=t},e.prototype.hitTest=function(t,e){if(null===this.m||null===this.m.visibleRange)return null;for(var i=this.m.visibleRange.from;i<this.m.visibleRange.to;i++){var r=this.m.items[i];if(ve(r,t,e))return{hitTestData:r.internalId,externalId:r.externalId}}return null},e.prototype._drawImpl=function(t,e,i){if(null!==this.m&&null!==this.m.visibleRange)for(var r=this.m.visibleRange.from;r<this.m.visibleRange.to;r++)de(this.m.items[r],t)},e}(F);function de(t,e){switch(t.shape){case"arrowDown":return void ce(!1,e,t.x,t.y,t.color,t.size);case"arrowUp":return void ce(!0,e,t.x,t.y,t.color,t.size);case"circle":return void function(t,e,i,r,s){var n=(ae("circle",s)-1)/2;t.fillStyle=r,t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!1),t.fill()}(e,t.x,t.y,t.color,t.size);case"square":return void function(t,e,i,r,s){var n=ae("square",s),o=(n-1)/2,a=e-o,h=i-o;t.fillStyle=r,t.fillRect(a,h,n,n)}(e,t.x,t.y,t.color,t.size)}t.shape}function ve(t,e,i){switch(t.shape){case"arrowDown":case"arrowUp":return pe(0,t.x,t.y,t.size,e,i);case"circle":return function(t,e,i,r,s){var n=2+ae("circle",i)/2,o=t-r,a=e-s;return Math.sqrt(o*o+a*a)<=n}(t.x,t.y,t.size,e,i);case"square":return ue(t.x,t.y,t.size,e,i)}t.shape}function me(t,e,i,r,s,n,o,a){var h=x(i)?i:i.close,l=x(i)?i:i.high,u=x(i)?i:i.low,c=he(o.barSpacing());switch(t.size=c,e.position){case"inBar":return void(t.y=n.priceToCoordinate(h,a));case"aboveBar":return t.y=n.priceToCoordinate(l,a)-c/2-r.aboveBar,void(r.aboveBar+=c+s);case"belowBar":return t.y=n.priceToCoordinate(u,a)+c/2+r.belowBar,void(r.belowBar+=c+s)}e.position}var ye,ge=function(){function t(t,e){this.o=!0,this.Jt=!0,this.Gt=!0,this.Qt=null,this.g=new fe,this.ti=t,this.F=e,this.m={items:[],visibleRange:null}}return t.prototype.update=function(t){this.o=!0,this.Gt=!0,"data"===t&&(this.Jt=!0)},t.prototype.renderer=function(t,e,i){return this.o&&this._makeValid(),this.g.setData(this.m),this.g},t.prototype.autoScaleMargins=function(){if(this.Gt){if(this.ti.indexedMarkers().length>0){var t=this.F.timeScale().barSpacing(),e=le(t),i=1.5*he(t)+2*e;this.Qt={above:i,below:i}}else this.Qt=null;this.Gt=!1}return this.Qt},t.prototype._makeValid=function(){var t=this.ti.priceScale(),e=this.F.timeScale(),i=this.ti.indexedMarkers();this.Jt&&(this.m.items=i.map((function(t){return{time:t.time,x:0,y:0,size:0,shape:t.shape,color:t.color,internalId:t.internalId,externalId:t.id}})),this.Jt=!1),this.m.visibleRange=null;var r=e.visibleBars();if(null!==r){var s=this.ti.firstValue();if(null!==s&&0!==this.m.items.length){var n=NaN,o=le(e.barSpacing()),a={aboveBar:o,belowBar:o};this.m.visibleRange=Ot(this.m.items,r,!0);for(var h=this.m.visibleRange.from;h<this.m.visibleRange.to;h++){var l=i[h];l.time!==n&&(a.aboveBar=o,a.belowBar=o,n=l.time);var u=this.m.items[h];u.x=e.indexToCoordinate(l.time);var c=this.ti.dataAt(l.time);null!==c&&me(u,l,c,a,o,t,e,s.value)}this.o=!1}}},t}(),be=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.prototype._updateImpl=function(t,e){var i=this._lineRendererData;i.visible=!1;var r=this._series.options();if(r.priceLineVisible){var s=this._series.lastValueData(void 0,0===r.priceLineSource);s.noData||(i.visible=!0,i.y=s.coordinate,i.color=this._series.priceLineColor(s.color),i.width=e,i.height=t,i.lineWidth=r.priceLineWidth,i.lineStyle=r.priceLineStyle)}},e}(se),we=function(t){function e(e,i){var r=t.call(this)||this;return r.k=e,r.m=i,r}return d(e,t),e.prototype._getSource=function(){return this.k},e.prototype._getData=function(){return this.m},e.prototype._updateRendererData=function(t,e,i){t.visible=!1,e.visible=!1;var r=this.k.options(),s=r.lastValueVisible,n=""!==this.k.title(),o=0===r.seriesLastValueMode,a=this.k.lastValueData(void 0,!1);a.noData||(s&&(t.text=this._axisText(a,s,o),t.visible=0!==t.text.length),(n||o)&&(e.text=this._paneText(a,s,n,o),e.visible=e.text.length>0),i.background=this.k.priceLineColor(a.color),i.color=X(i.background),i.coordinate=a.coordinate,e.borderColor=this.k.model().options().layout.backgroundColor,t.borderColor=i.background)},e.prototype._paneText=function(t,e,i,r){var s="",n=this.k.title();return i&&0!==n.length&&(s+=n+" "),e&&r&&(s+=this.k.priceScale().isPercentage()?t.formattedPriceAbsolute:t.formattedPricePercentage),s.trim()},e.prototype._axisText=function(t,e,i){return e?i?this.k.priceScale().isPercentage()?t.formattedPricePercentage:t.formattedPriceAbsolute:t.text:""},e}(tt),Se=function(t){function e(e,i){var r=t.call(this,e)||this;return r.ii=i,r}return d(e,t),e.prototype._updateImpl=function(t,e){var i=this._lineRendererData;i.visible=!1;var r=this.ii.yCoord();if(null!==r){var s=this.ii.options();i.visible=!0,i.y=r,i.color=s.color,i.width=e,i.height=t,i.lineWidth=s.lineWidth,i.lineStyle=s.lineStyle}},e}(se),xe=function(t){function e(e,i){var r=t.call(this)||this;return r.ti=e,r.ii=i,r}return d(e,t),e.prototype._updateRendererData=function(t,e,i){t.visible=!1,e.visible=!1;var r=this.ii.options();if(r.axisLabelVisible){var s=this.ii.yCoord();null!==s&&(t.text=this.ti.priceScale().formatPriceAbsolute(r.price),t.visible=!0,i.background=r.color,i.color=X(r.color),i.coordinate=s)}},e}(tt),Me=function(){function t(t,e){this.ti=t,this.$=e,this.ni=new Se(t,this),this._t=new xe(t,this)}return t.prototype.applyOptions=function(t){S(this.$,t),this.update(),this.ti.model().lightUpdate()},t.prototype.options=function(){return this.$},t.prototype.paneView=function(){return this.ni},t.prototype.priceAxisView=function(){return this._t},t.prototype.update=function(){this.ni.update(),this._t.update()},t.prototype.yCoord=function(){var t=this.ti,e=t.priceScale();if(t.model().timeScale().isEmpty()||e.isEmpty())return null;var i=t.firstValue();return null===i?null:e.priceToCoordinate(this.$.price,i.value)},t}(),Ce=function(){function t(){this.si=0,this.hi=new Map,this.ri=new Map}return t.prototype.colorByIndex=function(t){return g(this.ri.get(t))},t.prototype.addColor=function(t){var e=this.hi.get(t);return void 0===e&&(e=this.si++,this.hi.set(t,e),this.ri.set(e,t)),e},t.prototype.clear=function(){this.si=0,this.hi.clear(),this.ri.clear()},t.prototype.size=function(){return this.ri.size},t}(),Te={barColor:"",barBorderColor:"",barWickColor:""},ke=function(){function t(t){this.ti=t}return t.prototype.barStyle=function(t,e){var i=this.ti.seriesType(),r=this.ti.options();switch(i){case"Line":return this.ui(r);case"Area":return this.ei(r);case"Bar":return this.oi(r,t,e);case"Candlestick":return this.fi(r,t,e);case"Histogram":return this.ai(r,t,e)}throw new Error("Unknown chart style")},t.prototype.oi=function(t,e,i){var r=v({},Te),s=t.upColor,n=t.downColor,o=s,a=n,h=b(this.ci(e,i)),l=w(h.value[0])<=w(h.value[3]);return r.barColor=l?s:n,r.barBorderColor=l?o:a,r},t.prototype.fi=function(t,e,i){var r=v({},Te),s=t.upColor,n=t.downColor,o=t.borderUpColor,a=t.borderDownColor,h=t.wickUpColor,l=t.wickDownColor,u=b(this.ci(e,i)),c=w(u.value[0])<=w(u.value[3]);return r.barColor=c?s:n,r.barBorderColor=c?o:a,r.barWickColor=c?h:l,r},t.prototype.ei=function(t){return v(v({},Te),{barColor:t.lineColor})},t.prototype.ui=function(t){return v(v({},Te),{barColor:t.color})},t.prototype.ai=function(t,e,i){var r=v({},Te),s=b(this.ci(e,i)).value[4];if(null!=s){var n=b(this.ti.palette());r.barColor=n.colorByIndex(s)}else r.barColor=t.color;return r},t.prototype.li=function(){return this.ti.bars()},t.prototype.ci=function(t,e){return void 0!==e?e.value:this.li().valueAt(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.Exact=0]="Exact",t[t.NearestRight=1]="NearestRight"}(ye||(ye={}));var _e,Re=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.vi=[],this.di=0,this.Mi=0,this.wi=!1,this.bi=new Map,this.mi=new Map,this.pi=new Map,this.gi=t||new Map,this.yi=e}return t.prototype.clear=function(){this.vi=[],this.di=0,this.Mi=0,this.wi=!1,this.bi.clear(),this.mi.clear(),this.pi.clear()},t.prototype.first=function(){return this.size()>0?this.vi[this.di]:null},t.prototype.last=function(){return this.size()>0?this.vi[this.Mi-1]:null},t.prototype.firstIndex=function(){return this.size()>0?this.ki(this.di):null},t.prototype.lastIndex=function(){return this.size()>0?this.ki(this.Mi-1):null},t.prototype.size=function(){return this.Mi-this.di},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.contains=function(t){return null!==this.Ni(t,0)},t.prototype.valueAt=function(t){return this.search(t)},t.prototype.add=function(t,e,i){if(this.wi)return!1;var r={index:t,value:i,time:e},s=this.Ni(t,0);return this.mi.clear(),this.pi.clear(),null===s?(this.vi.splice(this.Si(t),0,r),this.di=0,this.Mi=this.vi.length,!0):(this.vi[s]=r,!1)},t.prototype.search=function(t,e,i){void 0===e&&(e=0);var r=this.Ni(t,e,i);if(null===r)return null;var s=this.xi(r);return{index:this.ki(r),time:s.time,value:s.value}},t.prototype.each=function(t){for(var e=this.di;e<this.Mi;++e)if(t(this.ki(e),this.xi(e)))break},t.prototype.range=function(e,i){var r=new t(this.gi,this.yi);return r.vi=this.vi,r.di=this.Si(e),r.Mi=this.Di(i),r.wi=!0,r},t.prototype.minMaxOnRangeCached=function(t,e,i){if(this.isEmpty())return null;for(var r=null,s=0,n=i;s<n.length;s++){var o=n[s];r=Pe(r,this.Ci(t,e,o))}return r},t.prototype.merge=function(t){return this.wi||0===t.length?null:this.isEmpty()||t[t.length-1].index<this.vi[0].index?this.Ti(t):t[0].index>this.vi[this.vi.length-1].index?this.Ei(t):1===t.length&&t[0].index===this.vi[this.vi.length-1].index?(this.Li(t[0]),t[0]):this.Ai(t)},t.prototype.remove=function(t){if(this.wi)return null;var e=this.Ni(t,1);if(null===e)return null;var i=this.vi.splice(e);return this.Mi=this.vi.length,this.bi.clear(),this.mi.clear(),this.pi.clear(),i.length>0?i[0]:null},t.prototype.ki=function(t){return this.vi[t].index},t.prototype.xi=function(t){return this.vi[t]},t.prototype.Ni=function(t,e,i){var r=this.Bi(t);if(null===r&&0!==e)switch(e){case-1:return this.zi(t,i);case 1:return this.Vi(t,i);default:throw new TypeError("Unknown search mode")}if(!i||null===r||0===e)return r;switch(e){case-1:return this.Fi(r);case 1:return this.Pi(r);default:throw new TypeError("Unknown search mode")}},t.prototype.Pi=function(t){for(var e=b(this.yi);t<this.Mi&&e(this.xi(t).value);)t+=1;return t===this.Mi?null:t},t.prototype.Fi=function(t){for(var e=b(this.yi);t>=this.di&&e(this.xi(t).value);)t-=1;return t<this.di?null:t},t.prototype.zi=function(t,e){var i=this.Si(t);i>this.di&&(i-=1);var r=i!==this.Mi&&this.ki(i)<t?i:null;return e&&null!==r?this.Fi(r):r},t.prototype.Vi=function(t,e){var i=this.Di(t),r=i!==this.Mi&&t<this.ki(i)?i:null;return e&&null!==r?this.Pi(r):r},t.prototype.Bi=function(t){var e=this.Si(t);return e===this.Mi||t<this.vi[e].index?null:e},t.prototype.Si=function(t){return $t(this.vi,t,(function(t,e){return t.index<e}),this.di,this.Mi)},t.prototype.Di=function(t){return Ft(this.vi,t,(function(t,e){return e.index>t}),this.di,this.Mi)},t.prototype.Ii=function(t,e,i){var r=null,s=this.gi.get(i.name);if(void 0===s)throw new Error('Plot "'+i.name+'" is not registered');for(var n=t;n<e;n++){var o=s(this.vi[n].value);null==o||Number.isNaN(o)||(null===r?r={min:o,max:o}:(o<r.min&&(r.min=o),o>r.max&&(r.max=o)))}return r},t.prototype.Oi=function(t){var e=Math.floor(t.index/30);this.bi.forEach((function(t){return t.delete(e)}))},t.prototype.Ti=function(t){return y(!this.wi,"collection should not be readonly"),y(0!==t.length,"plotRows should not be empty"),this.mi.clear(),this.pi.clear(),this.bi.clear(),this.vi=t.concat(this.vi),this.di=0,this.Mi=this.vi.length,t[0]},t.prototype.Ei=function(t){return y(!this.wi,"collection should not be readonly"),y(0!==t.length,"plotRows should not be empty"),this.mi.clear(),this.pi.clear(),this.bi.clear(),this.vi=this.vi.concat(t),this.di=0,this.Mi=this.vi.length,t[0]},t.prototype.Li=function(t){y(!this.isEmpty(),"plot list should not be empty"),y(this.vi[this.Mi-1].index===t.index,"last row index should match new row index"),this.Oi(t),this.mi.delete(t.index),this.pi.delete(t.index),this.vi[this.Mi-1]=t},t.prototype.Ai=function(t){return y(0!==t.length,"plot rows should not be empty"),this.mi.clear(),this.pi.clear(),this.bi.clear(),this.vi=function(t,e){for(var i=function(t,e){for(var i=t.length,r=e.length,s=i+r,n=0,o=0;n<i&&o<r;)t[n].index<e[o].index?n++:t[n].index>e[o].index?o++:(n++,o++,s--);return s}(t,e),r=new Array(i),s=0,n=0,o=t.length,a=e.length,h=0;s<o&&n<a;)t[s].index<e[n].index?(r[h]=t[s],s++):t[s].index>e[n].index?(r[h]=e[n],n++):(r[h]=e[n],s++,n++),h++;for(;s<o;)r[h]=t[s],s++,h++;for(;n<a;)r[h]=e[n],n++,h++;return r}(this.vi,t),this.di=0,this.Mi=this.vi.length,t[0]},t.prototype.Ci=function(t,e,i){if(this.isEmpty())return null;var r=null,s=b(this.firstIndex()),n=b(this.lastIndex()),o=t-i.offset,a=e-i.offset;o=Math.max(o,s),a=Math.min(a,n);var h=30*Math.ceil(o/30),l=Math.max(h,30*Math.floor(a/30)),u=this.Si(o),c=this.Di(Math.min(a,h,e));r=Pe(r,this.Ii(u,c,i));var p=this.bi.get(i.name);void 0===p&&(p=new Map,this.bi.set(i.name,p));for(var f=Math.max(h+1,o);f<l;f+=30){var d=Math.floor(f/30),v=p.get(d);if(void 0===v){var m=this.Si(30*d),y=this.Di(30*(d+1)-1);v=this.Ii(m,y,i),p.set(d,v)}r=Pe(r,v)}return u=this.Si(l),c=this.Di(a),Pe(r,this.Ii(u,c,i))},t}();function Pe(t,e){return null===t?e:null===e?t:{min:Math.min(t.min,e.min),max:Math.max(t.max,e.max)}}!function(t){t[t.Open=0]="Open",t[t.High=1]="High",t[t.Low=2]="Low",t[t.Close=3]="Close",t[t.Color=4]="Color"}(_e||(_e={}));var Ee={open:function(t){return t[0]},high:function(t){return t[1]},low:function(t){return t[2]},close:function(t){return t[3]},hl2:function(t){return(t[1]+t[2])/2},hlc3:function(t){return(t[1]+t[2]+t[3])/3},ohlc4:function(t){return(t[0]+t[1]+t[2]+t[3])/4}},Ae=["open","high","low","close","hl2","hlc3","ohlc4"];function Ve(t){return Ee[t]}var Le,$e=function(){function t(){var t;this.Ri=new Re((t=new Map,Ae.forEach((function(e,i){t.set(e,Ve(e))})),t))}return t.prototype.bars=function(){return this.Ri},t.prototype.size=function(){return this.Ri.size()},t.prototype.each=function(t){this.Ri.each(t)},t.prototype.clear=function(){this.Ri.clear()},t.prototype.isEmpty=function(){return this.Ri.isEmpty()},t.prototype.first=function(){return this.Ri.first()},t.prototype.last=function(){return this.Ri.last()},t.prototype.search=function(t,e){return this.bars().search(t,e)},t.prototype.valueAt=function(t){return this.search(t)},t}(),Fe=function(t){function e(e,i,r){var s=t.call(this,e)||this;s.m=new $e,s.ni=new be(s),s.Wi=[],s.Ui=new ne(s),s.qi=!1,s.ji=null,s.Hi=new Ce,s.Yi=[],s.Ki=[],s.$=i,s.$i=r;var n=new we(s,{model:e});return s.U=[n],s._i=new ie(n,s,e),s.Xi(),s.Zi(),s.Ji=s.barFunction(),s.Gi(),s}return d(e,t),e.prototype.destroy=function(){},e.prototype.endOfData=function(){return this.qi},e.prototype.priceLineColor=function(t){return this.$.priceLineColor||t},e.prototype.lastValueData=function(t,e,i){var r={noData:!0},s=this.priceScale();if(this.model().timeScale().isEmpty()||s.isEmpty()||this.data().isEmpty())return r;var n,o,a=this.model().timeScale().visibleBars(),h=this.firstValue();if(null===a||null===h)return r;if(e){var l=this.data().bars().last();if(null===l)return r;n=l,o=l.index}else{var u=this.data().bars().search(a.lastBar(),-1);if(null===u)return r;if(null===(n=this.data().bars().valueAt(u.index)))return r;o=u.index}var c=void 0!==t?n.value[t]:this.Ji(n.value),p=this.barColorer().barStyle(o,{value:n}),f=s.priceToCoordinate(c,h.value);return{noData:!1,price:i?c:void 0,text:s.formatPrice(c,h.value),formattedPriceAbsolute:s.formatPriceAbsolute(c),formattedPricePercentage:s.formatPricePercentage(c,h.value),color:p.barColor,coordinate:f,index:o}},e.prototype.data=function(){return this.m},e.prototype.barColorer=function(){return null!==this.ji||(this.ji=new ke(this)),this.ji},e.prototype.options=function(){return this.$},e.prototype.applyOptions=function(t){var e=this.$.overlay;S(this.$,t),this.$.overlay=e,e&&null!==this._priceScale&&void 0!==t.scaleMargins&&this._priceScale.applyOptions({scaleMargins:this.$.scaleMargins}),void 0!==t.priceFormat&&this.Xi(),this.model().updateSource(this)},e.prototype.clearData=function(){this.m.clear(),this.Hi.clear(),this.Gi()},e.prototype.updateData=function(t,e){void 0===e&&(e=!1),e&&this.m.clear(),this.m.bars().merge(t),this.Qi(),this.J.update("data"),this._.update("data");var i=this.model().paneForSource(this);this.model().recalculatePane(i),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},e.prototype.setMarkers=function(t){this.Yi=t.map((function(t){return v({},t)})),this.Qi();var e=this.model().paneForSource(this);this._.update("data"),this.model().recalculatePane(e),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},e.prototype.markers=function(){return this.Yi},e.prototype.indexedMarkers=function(){return this.Ki},e.prototype.createPriceLine=function(t){var e=new Me(this,t);return this.Wi.push(e),this.model().updateSource(this),e},e.prototype.removePriceLine=function(t){var e=this.Wi.indexOf(t);-1!==e&&this.Wi.splice(e,1),this.model().updateSource(this)},e.prototype.palette=function(){return this.Hi},e.prototype.seriesType=function(){return this.$i},e.prototype.firstValue=function(){var t=this.firstBar();return null===t?null:{value:this.Ji(t.value),timePoint:t.time}},e.prototype.firstBar=function(){var t=this.model().timeScale().visibleBars();if(null===t)return null;var e=t.firstBar();return this.data().search(e,1)},e.prototype.bars=function(){return this.m.bars()},e.prototype.nearestIndex=function(t,e){var i=this.nearestData(t,e);return i?i.index:null},e.prototype.nearestData=function(t,e){return M(t)?this.data().search(t,e):null},e.prototype.dataAt=function(t){var e=this.data().valueAt(t);return null===e?null:"Bar"===this.$i||"Candlestick"===this.$i?{open:e.value[0],high:e.value[1],low:e.value[2],close:e.value[3]}:this.barFunction()(e.value)},e.prototype.paneViews=function(){var t=[];this.priceScale()===this.model().mainPriceScale()&&t.push(this.Ui);for(var e=0,i=this.Wi;e<i.length;e++){var r=i[e];t.push(r.paneView())}return t.push(this.J),t.push(this.ni),t.push(this._i),t.push(this._),t},e.prototype.priceAxisViews=function(t,e){for(var i=m(this.U),r=0,s=this.Wi;r<s.length;r++){var n=s[r];i.push(n.priceAxisView())}return i},e.prototype.autoscaleInfo=function(t,e){if(!M(t)||!M(e)||this.data().isEmpty())return null;var i,r="Line"===this.$i||"Area"===this.$i||"Histogram"===this.$i?"close":null,s=null!==(i=null!==r?this.data().bars().minMaxOnRangeCached(t,e,[{name:r,offset:0}]):this.data().bars().minMaxOnRangeCached(t,e,[{name:"low",offset:0},{name:"high",offset:0}]))?new vt(i.min,i.max):null;if("Histogram"===this.seriesType()){var n=this.$.base,o=new vt(n,n);s=null!==s?s.merge(o):o}return{priceRange:s,margins:this._.autoScaleMargins()}},e.prototype.minMove=function(){return this.$.priceFormat.minMove},e.prototype.formatter=function(){return this.tn},e.prototype.barFunction=function(){return this.Ji},e.prototype.updateAllViews=function(){this.J.update(),this._.update();for(var t=0,e=this.U;t<e.length;t++)e[t].update();for(var i=0,r=this.Wi;i<r.length;i++)r[i].update();this.ni.update(),this.Ui.update()},e.prototype.setPriceScale=function(t){this._priceScale!==t&&(this._priceScale=t)},e.prototype.priceScale=function(){return b(this._priceScale)},e.prototype.markerDataAtIndex=function(t){if("Line"!==this.$i&&"Area"!==this.$i||!this.$.crosshairMarkerVisible)return null;var e=this.m.valueAt(t);return null===e?null:{price:this.Ji(e.value),radius:this.in()}},e.prototype.title=function(){return this.$.title},e.prototype.in=function(){switch(this.$i){case"Line":case"Area":return this.$.crosshairMarkerRadius}return 0},e.prototype.Xi=function(){switch(this.$.priceFormat.type){case"custom":this.tn={format:this.$.priceFormat.formatter};break;case"volume":this.tn=new Et(this.$.priceFormat.precision);break;case"percent":this.tn=new pt(this.$.priceFormat.precision);break;default:var t=Math.pow(10,this.$.priceFormat.precision);this.tn=new ct(t,this.$.priceFormat.minMove*t,!1,void 0)}null!==this._priceScale&&this._priceScale.updateFormatter()},e.prototype.Zi=function(){this.Ji=Ve("close")},e.prototype.Qi=function(){var t=this.model().timeScale().points();this.Ki=this.Yi.map((function(e,i){return{time:b(t.indexOf(e.time.timestamp,!0)),position:e.position,shape:e.shape,color:e.color,id:e.id,internalId:i}}))},e.prototype.Gi=function(){switch(this._=new ge(this,this.model()),this.$i){case"Bar":this.J=new qt(this,this.model());break;case"Candlestick":this.J=new Ht(this,this.model());break;case"Line":this.J=new Qt(this,this.model());break;case"Area":this.J=new Ut(this,this.model());break;case"Histogram":this.J=new Zt(this,this.model());break;default:throw Error("Unknown chart style assigned: "+this.$i)}},e}(dt);function Be(t){return t.slice().sort((function(t,e){return b(t.zorder())-b(e.zorder())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Le||(Le={}));var De,Oe,ze,Ie=new pt,Ne=new ct(100,1),Ue=function(){function t(t,e,i){this.nn=0,this.sn=null,this.hn=new ft,this.rn=null,this.un=null,this.en=new ft,this.on={isValid:!1,visibleBars:null},this.fn=0,this.an=0,this.cn=new ft,this.ln=new ft,this.vn=[],this.dn=null,this.Mn=!1,this.wn=null,this.bn=null,this.mn=null,this.pn=null,this.tn=Ne,this.gn=new ft,this.$=t,this.yn=e,this.kn=i,this.Nn=new Pt(this,100,this.Sn.bind(this),this.xn.bind(this))}return t.prototype.options=function(){return this.$},t.prototype.applyOptions=function(t){if(S(this.$,t),this.updateFormatter(),void 0!==t.mode&&this.setMode({mode:t.mode}),this.gn.fire(),void 0!==t.scaleMargins){var e=g(t.scaleMargins.top),i=g(t.scaleMargins.bottom);if(e<0||e>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+e);if(i<0||i>1||e+i>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+i);if(e+i>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(e+i));this.Dn(),this.bn=null}},t.prototype.optionsChanged=function(){return this.gn},t.prototype.isAutoScale=function(){return this.$.autoScale},t.prototype.isLog=function(){return 1===this.$.mode},t.prototype.isPercentage=function(){return 2===this.$.mode},t.prototype.isIndexedTo100=function(){return 3===this.$.mode},t.prototype.mode=function(){return{autoScale:this.$.autoScale,isInverted:this.$.invertScale,mode:this.$.mode}},t.prototype.setMode=function(t){var e=this.mode(),i=null;void 0!==t.autoScale&&(this.$.autoScale=t.autoScale),void 0!==t.mode&&(this.$.mode=t.mode,2!==t.mode&&3!==t.mode||(this.$.autoScale=!0),this.on.isValid=!1),1===e.mode&&t.mode!==e.mode&&(function(t){if(null===t)return!1;var e=kt(t.minValue()),i=kt(t.maxValue());return isFinite(e)&&isFinite(i)}(this.rn)?null!==(i=function(t){if(null===t)return null;var e=kt(t.minValue()),i=kt(t.maxValue());return new vt(e,i)}(this.rn))&&this.setPriceRange(i):this.$.autoScale=!0),1===t.mode&&t.mode!==e.mode&&null!==(i=_t(this.rn))&&this.setPriceRange(i);var r=e.mode!==this.$.mode;r&&(2===e.mode||this.isPercentage())&&this.updateFormatter(),r&&(3===e.mode||this.isIndexedTo100())&&this.updateFormatter(),void 0!==t.isInverted&&e.isInverted!==t.isInverted&&(this.$.invertScale=t.isInverted,this.Cn()),this.ln.fire(e,this.mode())},t.prototype.modeChanged=function(){return this.ln},t.prototype.fontSize=function(){return this.yn.fontSize},t.prototype.height=function(){return this.nn},t.prototype.setHeight=function(t){this.nn!==t&&(this.nn=t,this.Dn(),this.bn=null)},t.prototype.internalHeight=function(){if(this.sn)return this.sn;var t=this.height()-this.Tn()-this.En();return this.sn=t,t},t.prototype.internalHeightChanged=function(){return this.hn},t.prototype.priceRange=function(){return this.Ln(),this.rn},t.prototype.priceRangeChanged=function(){return this.en},t.prototype.setPriceRange=function(t,e,i){var r=this.rn;(e||null===r&&null!==t||null!==r&&!r.equals(t))&&(this.bn=null,this.rn=t,i||this.en.fire(r,t))},t.prototype.isEmpty=function(){return this.Ln(),0===this.nn||!this.rn||this.rn.isEmpty()},t.prototype.invertedCoordinate=function(t){return this.isInverted()?t:this.height()-1-t},t.prototype.priceToCoordinate=function(t,e){return this.isPercentage()?t=St(t,e):this.isIndexedTo100()&&(t=Mt(t,e)),this.xn(t,e)},t.prototype.pointsArrayToCoordinates=function(t,e,i){this.Ln();for(var r=this.En(),s=b(this.priceRange()),n=s.minValue(),o=s.maxValue(),a=this.internalHeight()-1,h=this.isInverted(),l=a/(o-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,p=this.An(),f=u;f<c;f++){var d=t[f],v=d.price;if(!isNaN(v)){var m=v;null!==p&&(m=p(d.price,e));var y=r+l*(m-n),g=h?y:this.nn-1-y;d.y=g}}},t.prototype.barPricesToCoordinates=function(t,e,i){this.Ln();for(var r=this.En(),s=b(this.priceRange()),n=s.minValue(),o=s.maxValue(),a=this.internalHeight()-1,h=this.isInverted(),l=a/(o-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,p=this.An(),f=u;f<c;f++){var d=t[f],v=d.open,m=d.high,y=d.low,g=d.close;null!==p&&(v=p(d.open,e),m=p(d.high,e),y=p(d.low,e),g=p(d.close,e));var w=r+l*(v-n),S=h?w:this.nn-1-w;d.openY=S,w=r+l*(m-n),S=h?w:this.nn-1-w,d.highY=S,w=r+l*(y-n),S=h?w:this.nn-1-w,d.lowY=S,w=r+l*(g-n),S=h?w:this.nn-1-w,d.closeY=S}},t.prototype.coordinateToPrice=function(t,e){var i=this.Sn(t,e);return this.logicalToPrice(i,e)},t.prototype.logicalToPrice=function(t,e){var i=t;return this.isPercentage()?i=function(t,e){return e<0&&(t=-t),t/100*e+e}(i,e):this.isIndexedTo100()&&(i=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(i,e)),i},t.prototype.dataSources=function(){return this.vn},t.prototype.orderedSources=function(){if(this.dn)return this.dn;for(var t=[],e=0;e<this.vn.length;e++){var i=this.vn[e];null===i.zorder()&&i.setZorder(e+1),t.push(i)}return t=Be(t),this.dn=t,this.dn},t.prototype.hasSeries=function(){return this.Mn},t.prototype.addDataSource=function(t){-1===this.vn.indexOf(t)&&(t instanceof Fe&&(this.Mn=!0),this.vn.push(t),this.wn=null,this.updateFormatter(),this.invalidateSourcesCache())},t.prototype.removeDataSource=function(t){var e=this.vn.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.vn.splice(e,1),t instanceof Fe&&(this.Mn=!1),this.mainSource()||this.setMode({autoScale:!0}),this.wn=null,this.updateFormatter(),this.invalidateSourcesCache()},t.prototype.mainSource=function(){if(null!==this.wn)return this.wn;for(var t=null,e=0;e<this.vn.length;e++){var i=this.vn[e];if(i instanceof Fe){t=i;break}null===t&&i instanceof dt&&(t=i)}return this.wn=t,this.wn},t.prototype.firstValue=function(){for(var t=null,e=0,i=this.vn;e<i.length;e++){var r=i[e];if(r instanceof dt){var s=r.firstValue();if(null===s)continue;(null===t||s.timePoint<t.timePoint)&&(t=s)}}return null===t?null:t.value},t.prototype.isInverted=function(){return this.$.invertScale},t.prototype.marks=function(){return this.bn||(this.Nn.rebuildTickMarks(),this.bn=this.Nn.marks(),this.cn.fire()),this.bn},t.prototype.onMarksChanged=function(){return this.cn},t.prototype.startScale=function(t){this.isPercentage()||this.isIndexedTo100()||null===this.mn&&null===this.un&&(this.isEmpty()||(this.mn=this.nn-t,this.un=b(this.priceRange()).clone()))},t.prototype.scaleTo=function(t){if(!this.isPercentage()&&!this.isIndexedTo100()&&null!==this.mn){this.setMode({autoScale:!1}),(t=this.nn-t)<0&&(t=0);var e=(this.mn+.2*(this.nn-1))/(t+.2*(this.nn-1)),i=b(this.un).clone();e=Math.max(e,.1),i.scaleAroundCenter(e),this.setPriceRange(i)}},t.prototype.endScale=function(){this.isPercentage()||this.isIndexedTo100()||(this.mn=null,this.un=null)},t.prototype.startScroll=function(t){this.isAutoScale()||null===this.pn&&null===this.un&&(this.isEmpty()||(this.pn=t,this.un=b(this.priceRange()).clone()))},t.prototype.scrollTo=function(t){if(!this.isAutoScale()&&null!==this.pn){var e=b(this.priceRange()).length()/(this.internalHeight()-1),i=t-this.pn;this.isInverted()&&(i*=-1);var r=i*e,s=b(this.un).clone();s.shift(r),this.setPriceRange(s,!0),this.bn=null}},t.prototype.endScroll=function(){this.isAutoScale()||null!==this.pn&&(this.pn=null,this.un=null)},t.prototype.formatter=function(){return this.tn||this.updateFormatter(),this.tn},t.prototype.formatPrice=function(t,e){switch(this.$.mode){case 2:return this.formatter().format(St(t,e));case 3:return this.formatter().format(Mt(t,e));default:return this.Bn(t)}},t.prototype.formatLogical=function(t){switch(this.$.mode){case 2:case 3:return this.formatter().format(t);default:return this.Bn(t)}},t.prototype.formatPriceAbsolute=function(t){return this.Bn(t,this.zn())},t.prototype.formatPricePercentage=function(t,e){return t=St(t,e),Ie.format(t)},t.prototype.sourcesForAutoScale=function(){return this.vn.filter((function(t){return t instanceof dt}))},t.prototype.recalculatePriceRange=function(t){this.on={visibleBars:t,isValid:!1}},t.prototype.updateAllViews=function(){this.vn.forEach((function(t){return t.updateAllViews()}))},t.prototype.updateFormatter=function(){this.bn=null;var t=this.mainSource(),e=100;null!==t&&(e=Math.round(1/t.minMove())),this.tn=Ne,this.isPercentage()?(this.tn=Ie,e=100):this.isIndexedTo100()?(this.tn=new ct(100,1),e=100):null!==t&&(this.tn=t.formatter()),this.Nn=new Pt(this,e,this.Sn.bind(this),this.xn.bind(this)),this.Nn.rebuildTickMarks()},t.prototype.invalidateSourcesCache=function(){this.dn=null},t.prototype.Tn=function(){return this.isInverted()?this.$.scaleMargins.bottom*this.height()+this.an:this.$.scaleMargins.top*this.height()+this.fn},t.prototype.En=function(){return this.isInverted()?this.$.scaleMargins.top*this.height()+this.fn:this.$.scaleMargins.bottom*this.height()+this.an},t.prototype.Ln=function(){this.on.isValid||(this.on.isValid=!0,this.Vn())},t.prototype.Dn=function(){this.sn=null,this.hn.fire()},t.prototype.xn=function(t,e){if(this.Ln(),this.isEmpty())return 0;t=this.isLog()&&t?Tt(t):t;var i=b(this.priceRange()),r=this.En()+(this.internalHeight()-1)*(t-i.minValue())/i.length();return this.invertedCoordinate(r)},t.prototype.Sn=function(t,e){if(this.Ln(),this.isEmpty())return 0;var i=this.invertedCoordinate(t),r=b(this.priceRange()),s=r.minValue()+r.length()*((i-this.En())/(this.internalHeight()-1));return this.isLog()?kt(s):s},t.prototype.Cn=function(){this.bn=null,this.Nn.rebuildTickMarks()},t.prototype.zn=function(){return b(this.mainSource()).formatter()},t.prototype.Vn=function(){var t=this.on.visibleBars;if(null!==t){for(var e=null,i=0,r=0,s=0,n=this.sourcesForAutoScale();s<n.length;s++){var o=n[s],a=o.firstValue();if(null!==a){var h=o.autoscaleInfo(t.firstBar(),t.lastBar()),l=h&&h.priceRange;if(null!==l){switch(this.$.mode){case 1:l=_t(l);break;case 2:l=xt(l,a.value);break;case 3:l=Ct(l,a.value)}e=null===e?l:e.merge(b(l)),null!==h&&null!==h.margins&&(i=Math.max(i,h.margins.above),r=Math.max(i,h.margins.below))}}}if(i===this.fn&&r===this.an||(this.fn=i,this.an=r,this.bn=null,this.Dn()),null!==e){if(e.minValue()===e.maxValue()){var u=this.mainSource(),c=5*(null===u||this.isPercentage()||this.isIndexedTo100()?1:u.minMove());e=new vt(e.minValue()-c,e.maxValue()+c)}this.setPriceRange(e)}else null===this.rn&&this.setPriceRange(new vt(-.5,.5));this.on.isValid=!0}},t.prototype.An=function(){return this.isPercentage()?St:this.isIndexedTo100()?Mt:this.isLog()?Tt:null},t.prototype.Bn=function(t,e){return void 0===this.kn.priceFormatter?(void 0===e&&(e=this.formatter()),e.format(t)):this.kn.priceFormatter(t)},t}();function We(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function je(t){return!x(t)&&!C(t)}function qe(t){return x(t)}function Ye(t,e,i){return void 0!==i?i+=" ":i="",void 0===e&&(e="'Trebuchet MS', Roboto, Ubuntu, sans-serif"),""+i+t+"px "+e}!function(t){t[t.LastPriceAndPercentageValue=0]="LastPriceAndPercentageValue",t[t.LastValueAccordingToScale=1]="LastValueAccordingToScale"}(De||(De={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Oe||(Oe={})),function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=4]="TickLength"}(ze||(ze={}));var He,Xe=function(){function t(t){this.Ht={borderSize:1,tickLength:4,fontSize:NaN,font:"",fontFamily:"",color:"",paddingBottom:0,paddingInner:0,paddingOuter:0,paddingTop:0,baselineOffset:0},this.l=t}return t.prototype.options=function(){var t=this.Ht,e=this.Zt(),i=this.Fn();return t.fontSize===e&&t.fontFamily===i||(t.fontSize=e,t.fontFamily=i,t.font=Ye(e,i),t.paddingTop=Math.floor(e/3.5),t.paddingBottom=t.paddingTop,t.paddingInner=Math.max(Math.ceil(e/2-t.tickLength/2),0),t.paddingOuter=Math.ceil(e/2+t.tickLength/2),t.baselineOffset=Math.round(e/10)),t.color=this.Pn(),this.Ht},t.prototype.Pn=function(){return this.l.options().layout.textColor},t.prototype.Zt=function(){return this.l.options().layout.fontSize},t.prototype.Fn=function(){return this.l.options().layout.fontFamily},t}(),Ke=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,e,i,r){var s=this;if(null!==this.m){var n=Math.floor(e);t.lineWidth=n;var o=Math.ceil(this.m.h*e),a=Math.ceil(this.m.w*e);!function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5),e(),t.restore()}(t,(function(){var i=b(s.m);if(i.vertLinesVisible){t.strokeStyle=i.vertLinesColor,c(t,i.vertLineStyle),t.beginPath();for(var r=0,h=i.timeMarks;r<h.length;r++){var l=h[r],u=Math.round(l.coord*e);t.moveTo(u,-n),t.lineTo(u,o+n)}t.stroke()}if(i.horzLinesVisible){t.strokeStyle=i.horzLinesColor,c(t,i.horzLineStyle),t.beginPath();for(var p=0,f=i.priceMarks;p<f.length;p++){var d=f[p],v=Math.round(d.coord*e);t.moveTo(-n,v),t.lineTo(a+n,v)}t.stroke()}}))}},t}(),Je=function(){function t(t){this.g=new Ke,this.o=!0,this.I=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){if(this.o){var i=this.I.model().options().grid,r={h:t,w:e,horzLinesVisible:i.horzLines.visible,vertLinesVisible:i.vertLines.visible,horzLinesColor:i.horzLines.color,vertLinesColor:i.vertLines.color,horzLineStyle:i.horzLines.style,vertLineStyle:i.vertLines.style,priceMarks:this.I.defaultPriceScale().marks(),timeMarks:this.I.model().timeScale().marks()||[]};this.g.setData(r),this.o=!1}return this.g},t}(),Ze=function(){function t(){this.In=new WeakMap,this.o=!0}return t.prototype.paneViews=function(t){var e=this.In.get(t);return void 0===e&&(e=[new Je(t)],this.In.set(t,e)),this.o&&(e.forEach((function(t){return t.update()})),this.o=!1),e},t.prototype.invalidate=function(){this.o=!0},t}();!function(t){t[t.None=0]="None",t[t.Cursor=1]="Cursor",t[t.Light=2]="Light",t[t.Full=3]="Full"}(He||(He={}));var Qe=function(){function t(t){this.On=new Map,this.Rn=!1,this.Wn=!1,this.Un=null,this.qn=t}return t.prototype.invalidatePane=function(t,e){var i=function(t,e){return void 0===t?e:{level:Math.max(t.level,e.level),autoScale:t.autoScale||e.autoScale}}(this.On.get(t),e);this.On.set(t,i)},t.prototype.invalidateAll=function(t){this.qn=Math.max(this.qn,t)},t.prototype.fullInvalidation=function(){return this.qn},t.prototype.invalidateForPane=function(t){var e=this.On.get(t);return void 0===e?{level:this.qn}:{level:Math.max(this.qn,e.level),autoScale:e.autoScale}},t.prototype.setFitContent=function(){this.Wn=!0,this.Un=null},t.prototype.getFitContent=function(){return this.Wn},t.prototype.setTargetTimeRange=function(t){this.Un=t,this.Wn=!1},t.prototype.getTargetTimeRange=function(){return this.Un},t.prototype.merge=function(t){var e=this;this.Rn=this.Rn||t.Rn,t.Wn&&this.setFitContent(),t.Un&&this.setTargetTimeRange(t.Un),this.qn=Math.max(this.qn,t.qn),t.On.forEach((function(t,i){e.invalidatePane(i,t)}))},t}(),Ge=function(){function t(t){this.$=t}return t.prototype.align=function(t,e,i){var r=t;if(0===this.$.mode)return r;var s=i.defaultPriceScale(),n=s.firstValue();if(null===n)return r;var o=s.priceToCoordinate(t,n),a=i.dataSources().filter((function(t){return t instanceof Fe})).reduce((function(t,r){if(i.isOverlay(r))return t;var s=r.priceScale(),n=r.bars();if(s.isEmpty()||!n.contains(e))return t;var o=n.valueAt(e);if(null===o)return t;var a=[o.value[3]],h=w(r.firstValue());return t.concat(a.map((function(t){return s.priceToCoordinate(t,h.value)})))}),[]);if(0===a.length)return r;a.sort((function(t,e){return Math.abs(t-o)-Math.abs(e-o)}));var h=a[0];return s.coordinateToPrice(h,n)},t}(),ti=function(){function t(t,e){this.vn=[],this.jn=[],this.nn=0,this.Kt=0,this.Hn=1e3,this.Yn=null,this.dn=null,this.Kn=new ft,this.$n=t,this.F=e,this.model().mainPriceScaleOptionsChanged().subscribe(this.onPriceScaleOptionsChanged.bind(this),this),this._n=this.Xn()}return t.prototype.onPriceScaleOptionsChanged=function(){this._n.applyOptions(this.F.options().priceScale)},t.prototype.destroy=function(){this.model().mainPriceScaleOptionsChanged().unsubscribeAll(this),this._n.modeChanged().unsubscribeAll(this),this.vn.forEach((function(t){t.destroy&&t.destroy()})),this.Kn.fire()},t.prototype.stretchFactor=function(){return this.Hn},t.prototype.setStretchFactor=function(t){this.Hn=t},t.prototype.model=function(){return this.F},t.prototype.width=function(){return this.Kt},t.prototype.height=function(){return this.nn},t.prototype.setWidth=function(t){this.Kt=t,this.updateAllViews()},t.prototype.setHeight=function(t){var e=this;this.nn=t,this._n.setHeight(t),this.vn.forEach((function(i){if(e.isOverlay(i)){var r=i.priceScale();null!==r&&r.setHeight(t)}})),this.updateAllViews()},t.prototype.dataSources=function(){return this.vn},t.prototype.isOverlay=function(t){var e=t.priceScale();return null===e||this._n!==e},t.prototype.addDataSource=function(t,e,i){var r=this.Zn().minZOrder-1;this.Jn(t,e,r)},t.prototype.removeDataSource=function(t){var e=this.vn.indexOf(t);y(-1!==e,"removeDataSource: invalid data source"),this.vn.splice(e,1),t===this.Yn&&(this.Yn=null);var i=this.jn.indexOf(t);-1!==i&&this.jn.splice(i,1);var r=t.priceScale();if(r&&r.dataSources().indexOf(t)>=0&&r.removeDataSource(t),r&&null===r.mainSource()){var s=r.dataSources().length;y(0===s,"Invalid priceScale state: empty mainSource but non-empty data sources="+s),r!==this._n&&r.modeChanged().unsubscribeAll(this)}t instanceof dt&&this.Gn(),r&&t instanceof dt&&(r.invalidateSourcesCache(),this.recalculatePriceScale(r)),this.dn=null},t.prototype.priceScalePosition=function(){var t=this.F.options().priceScale.position;return"none"===t?"overlay":t},t.prototype.startScalePrice=function(t,e){t.startScale(e)},t.prototype.scalePriceTo=function(t,e){t.scaleTo(e),this.updateAllViews()},t.prototype.endScalePrice=function(t){t.endScale()},t.prototype.startScrollPrice=function(t,e){t.startScroll(e)},t.prototype.scrollPriceTo=function(t,e){t.scrollTo(e),this.updateAllViews()},t.prototype.endScrollPrice=function(t){t.endScroll()},t.prototype.setPriceAutoScale=function(t,e){t.setMode({autoScale:e}),this.$n.isEmpty()?t.setPriceRange(null):this.recalculatePriceScale(t)},t.prototype.updateAllViews=function(){this.vn.forEach((function(t){t.updateAllViews()}))},t.prototype.defaultPriceScale=function(){var t=this.mainDataSource(),e=null!==t?t.priceScale():null;return null===e&&(e=this._n),e},t.prototype.mainDataSource=function(){return this.Yn},t.prototype.recalculatePriceScale=function(t){null!==t&&t.isAutoScale()&&this.Qn(t)},t.prototype.resetPriceScale=function(t){var e=this.$n.visibleBars();t.setMode({autoScale:!0}),null!==e&&t.recalculatePriceRange(e),this.updateAllViews()},t.prototype.momentaryAutoScale=function(){this.Qn(this._n)},t.prototype.recalculate=function(){var t=this;this.recalculatePriceScale(this._n),this.vn.forEach((function(e){t.isOverlay(e)&&t.recalculatePriceScale(e.priceScale())})),this.updateAllViews(),this.F.lightUpdate()},t.prototype.isEmpty=function(){return null===this.Yn},t.prototype.containsSeries=function(){return this.vn.some((function(t){return t instanceof Fe}))},t.prototype.orderedSources=function(){return null===this.dn&&(this.dn=Be(this.vn)),this.dn},t.prototype.onDestroyed=function(){return this.Kn},t.prototype.ts=function(t,e){return"overlay"!==e?this._n:this.Xn(!0)},t.prototype.Qn=function(t){var e=t.sourcesForAutoScale();if(e&&e.length>0&&!this.$n.isEmpty()){var i=this.$n.visibleBars();null!==i&&t.recalculatePriceRange(i)}t.updateAllViews()},t.prototype.Zn=function(){var t=this.orderedSources();if(0===t.length)return{minZOrder:0,maxZOrder:0};for(var e=0,i=0,r=0;r<t.length;r++){var s=t[r].zorder();null!==s&&(s<e&&(e=s),s>i&&(i=s))}return{minZOrder:e,maxZOrder:i}},t.prototype.Jn=function(t,e,i){var r="overlay",s=null;if(!e){var n=this.model().options().priceScale.position;r="none"===n?"overlay":n}t instanceof dt&&(s=this.ts(t,r)),this.vn.push(t),e&&this.jn.push(t),null!==s&&(s.addDataSource(t),t.setPriceScale(s)),t.setZorder(i),this.Gn(),t instanceof dt&&this.recalculatePriceScale(s),this.dn=null},t.prototype.ns=function(t,e,i){e.mode!==i.mode&&this.Qn(t)},t.prototype.Gn=function(){if(null===this.Yn||-1!==this.jn.indexOf(this.Yn)){for(var t=0,e=this.vn;t<e.length;t++)if((s=e[t])instanceof dt&&!this.isOverlay(s))return void this.ss(s);for(var i=0,r=this.jn;i<r.length;i++){var s;if((s=r[i])instanceof dt)return void this.ss(s)}}},t.prototype.ss=function(t){var e=b(t.priceScale());this.defaultPriceScale().modeChanged().unsubscribeAll(this),e.modeChanged().subscribe(this.ns.bind(this,e),this),this.Yn=t},t.prototype.Xn=function(t){var e=_(this.F.options().priceScale);t&&(e.autoScale=!0,e.mode=0);var i=new Ue(e,this.F.options().layout,this.F.options().localization);return i.setHeight(this.height()),i},t}(),ei=function(t){return t.getUTCFullYear()},ii=function(t){return lt(function(t){return t.getUTCDate()}(t),2)},ri=function(t,e){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"})},si=function(t,e){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"})},ni=function(t){return lt(function(t){return t.getUTCMonth()+1}(t),2)},oi=function(t){return lt(ei(t)%100,2)},ai=function(t){return lt(ei(t),4)},hi={"'yy MMM dd":function(t,e){return"'"+oi(t)+" "+si(t,e)+" "+ii(t)},"'yy MMMM dd":function(t,e){return"'"+oi(t)+" "+ri(t,e)+" "+ii(t)},"yyyy MMM dd":function(t,e){return ai(t)+" "+si(t,e)+" "+ii(t)},"yyyy MMMM dd":function(t,e){return ai(t)+" "+ri(t,e)+" "+ii(t)},"dd MMM 'yy":function(t,e){return ii(t)+" "+si(t,e)+" '"+oi(t)},"dd MMMM 'yy":function(t,e){return ii(t)+" "+ri(t,e)+" '"+oi(t)},"dd MMM yyyy":function(t,e){return ii(t)+" "+si(t,e)+" "+ai(t)},"dd MMMM yyyy":function(t,e){return ii(t)+" "+ri(t,e)+" "+ai(t)},"MMM dd, 'yy":function(t,e){return si(t,e)+" "+ii(t)+", '"+oi(t)},"MMMM dd, 'yy":function(t,e){return ri(t,e)+" "+ii(t)+", '"+oi(t)},"MMM dd, yyyy":function(t,e){return si(t,e)+" "+ii(t)+", "+ai(t)},"MMMM dd, yyyy":function(t,e){return ri(t,e)+" "+ii(t)+", "+ai(t)},"yyyy-MM-dd":function(t,e){return ai(t)+"-"+ni(t)+"-"+ii(t)},"yy-MM-dd":function(t,e){return oi(t)+"-"+ni(t)+"-"+ii(t)},"yy/MM/dd":function(t,e){return oi(t)+"/"+ni(t)+"/"+ii(t)},"yyyy/MM/dd":function(t,e){return ai(t)+"/"+ni(t)+"/"+ii(t)},"yy.MM.dd":function(t,e){return oi(t)+"."+ni(t)+"."+ii(t)},"yyyy.MM.dd":function(t,e){return ai(t)+"."+ni(t)+"."+ii(t)},"dd-MM-yyyy":function(t,e){return ii(t)+"-"+ni(t)+"-"+ai(t)},"dd-MM-yy":function(t,e){return ii(t)+"-"+ni(t)+"-"+oi(t)},"dd/MM/yy":function(t,e){return ii(t)+"/"+ni(t)+"/"+oi(t)},"dd/MM/yyyy":function(t,e){return ii(t)+"/"+ni(t)+"/"+ai(t)},"dd.MM.yy":function(t,e){return ii(t)+"."+ni(t)+"."+oi(t)},"dd.MM.yyyy":function(t,e){return ii(t)+"."+ni(t)+"."+ai(t)},"MM-dd-yy":function(t,e){return ni(t)+"-"+ii(t)+"-"+oi(t)},"MM-dd-yyyy":function(t,e){return ni(t)+"-"+ii(t)+"-"+ai(t)},"MM/dd/yy":function(t,e){return ni(t)+"/"+ii(t)+"/"+oi(t)},"MM/dd/yyyy":function(t,e){return ni(t)+"/"+ii(t)+"/"+ai(t)},"MM.dd.yy":function(t,e){return ni(t)+"."+ii(t)+"."+oi(t)},"MM.dd.yyyy":function(t,e){return ni(t)+"."+ii(t)+"."+ai(t)}},li=function(){function t(t,e){void 0===t&&(t="yyyy-MM-dd"),void 0===e&&(e="default"),this.hs=hi[t],this.rs=e}return t.prototype.format=function(t){return this.hs(t,this.rs)},t}(),ui=function(){function t(t){this.us=t||"%h:%m:%s"}return t.prototype.format=function(t){return this.us.replace("%h",lt(t.getUTCHours(),2)).replace("%m",lt(t.getUTCMinutes(),2)).replace("%s",lt(t.getUTCSeconds(),2))},t}(),ci={dateFormat:"yyyy-MM-dd",timeFormat:"%h:%m:%s",dateTimeSeparator:" ",locale:"default"},pi=function(){function t(t){void 0===t&&(t={});var e=v(v({},ci),t);this.es=new li(e.dateFormat,e.locale),this.os=new ui(e.timeFormat),this.fs=e.dateTimeSeparator}return t.prototype.format=function(t){return""+this.es.format(t)+this.fs+this.os.format(t)},t}(),fi=function(){function t(t,e){y(t<=e,"The last bar in the bars range should be greater than or equal to the first bar"),this.as=t,this.cs=e}return t.prototype.firstBar=function(){return this.as},t.prototype.lastBar=function(){return this.cs},t.prototype.count=function(){return this.cs-this.as+1},t.prototype.contains=function(t){return this.as<=t&&t<=this.cs},t.prototype.equals=function(t){return this.as===t.firstBar()&&this.cs===t.lastBar()},t}(),di=function(){function t(t,e){void 0===e&&(e=50),this.It=0,this.Ot=1,this.Rt=1,this.Ut=new Map,this.Wt=new Map,this.ls=t,this.qt=e}return t.prototype.format=function(t){var e=this.Ut.get(t.valueOf());if(void 0!==e)return e.string;if(this.It===this.qt){var i=this.Wt.get(this.Rt);this.Wt.delete(this.Rt),this.Ut.delete(g(i)),this.Rt++,this.It--}var r=this.ls(t);return this.Ut.set(t.valueOf(),{string:r,tick:this.Ot}),this.Wt.set(this.Ot,t.valueOf()),this.It++,this.Ot++,r},t}();function vi(t,e){return t.index-e.index}var mi,yi,gi=function(){function t(){this.vs=1/0,this.ds=-1/0,this.Ms=new Map,this.ws=[],this.bs=new ft,this.Ut=null,this.ms=NaN}return t.prototype.reset=function(){this.Ms.clear(),this.ws=[],this.vs=1/0,this.ds=-1/0,this.Ut=null,this.bs.fire()},t.prototype.merge=function(t){for(var e=this.ws,i={},r=0,s=t;r<s.length;r++){var n=s[r],o=n.index,a=n.span,h=this.Ms.get(n.index);if(h){if(h.index===n.index&&h.span===n.span){h.time=n.time;continue}this.ps(h)}this.Ms.set(o,n),this.vs>o&&(this.vs=o),this.ds<o&&(this.ds=o),void 0===(l=e[a])&&(l=[],e[a]=l),l.push(n),i[a]=!0}for(a=e.length;a--;){var l;void 0!==(l=e[a])&&(0===l.length&&delete e[a],i[a]&&l.sort(vi))}this.Ut=null,this.bs.fire()},t.prototype.indexToTime=function(t){var e=this.Ms.get(t);return void 0===e?null:e.time},t.prototype.nearestIndex=function(t){for(var e=this.vs,i=this.ds;i-e>2;){if(1e3*g(this.Ms.get(e)).time.timestamp===t)return e;if(1e3*g(this.Ms.get(i)).time.timestamp===t)return i;var r=Math.round((e+i)/2);1e3*g(this.Ms.get(r)).time.timestamp>t?i=r:e=r}return e},t.prototype.build=function(t,e){var i=Math.ceil(e/t);if(this.ms===i&&this.Ut)return this.Ut;this.ms=i;for(var r=[],s=this.ws.length;s--;)if(this.ws[s]){var n=r;r=[];for(var o=n.length,a=0,h=g(this.ws[s]),l=h.length,u=1/0,c=-1/0,p=0;p<l;p++){for(var f=h[p],d=f.index;a<o;){var v=n[a],m=v.index;if(!(m<d)){u=m;break}a++,r.push(v),c=m,u=1/0}u-d>=i&&d-c>=i&&(r.push(f),c=d)}for(;a<o;a++)r.push(n[a])}return this.Ut=r,this.Ut},t.prototype.ps=function(t){var e=t.index;if(this.Ms.get(e)===t){this.Ms.delete(e),e<=this.vs&&this.vs++,e>=this.ds&&this.ds--,this.ds<this.vs&&(this.vs=1/0,this.ds=-1/0);var i=g(this.ws[t.span]),r=i.indexOf(t);-1!==r&&i.splice(r,1)}},t}(),bi=function(){function t(){this.vi=[]}return t.prototype.clear=function(){this.vi=[]},t.prototype.size=function(){return this.vi.length},t.prototype.firstIndex=function(){return this.gs(0)},t.prototype.lastIndex=function(){return this.gs(this.vi.length-1)},t.prototype.merge=function(t,e){if(0!==e.length)if(0!==this.vi.length){var i=t;if(i<0){var r=Math.abs(i);if(e.length<r)return;this.vi=new Array(r).concat(this.vi);for(var s=0;s<e.length;++s)this.vi[t+s]=e[s]}else{for(var n=i;n<this.vi.length&&n-i<e.length;++n)this.vi[n]=e[n-i];var o=i+e.length;if(o>this.vi.length){r=o-this.vi.length;for(var a=n;a<n+r;++a)this.vi.push(e[a-i])}}}else this.vi=e},t.prototype.valueAt=function(t){var e=this.ys(t);return null!==e?this.vi[e]:null},t.prototype.indexOf=function(t,e){if(this.vi.length<1)return null;if(t>this.vi[this.vi.length-1].timestamp)return e?this.vi.length-1:null;for(var i=0;i<this.vi.length;++i){if(t===this.vi[i].timestamp)return i;if(t<this.vi[i].timestamp)return e?i:null}return null},t.prototype.closestIndexLeft=function(t){var e=this.vi;if(!e.length)return null;if(Number.isNaN(t.timestamp))return null;var i=e.length-1;if(t>=e[i])return i;var r=0,s=e[r];if(t<s)return null;if(t===s)return r;for(;i>r+1;){var n=r+i>>1,o=e[n];if(o.timestamp>t.timestamp)i=n;else{if(!(o.timestamp<t.timestamp))return o.timestamp===t.timestamp?n:null;r=n}}return r},t.prototype.gs=function(t){return 0<=t&&t<this.size()?t:null},t.prototype.ys=function(t){return 0<=t&&t<this.size()?t:null},t}();!function(t){t[t.DefaultAnimationDuration=400]="DefaultAnimationDuration",t[t.MinBarSpacing=.5]="MinBarSpacing",t[t.MinVisibleBarsCount=2]="MinVisibleBarsCount"}(mi||(mi={})),function(t){t[t.Minute=20]="Minute",t[t.Hour=30]="Hour",t[t.Day=40]="Day",t[t.Week=50]="Week",t[t.Month=60]="Month",t[t.Year=70]="Year"}(yi||(yi={}));var wi=function(){function t(t,e,i){this.Kt=0,this.ks=null,this.Ns=new bi,this.pn=null,this.mn=null,this.Ss=new gi,this.xs=new Map,this.Ds=null,this.Cs=!0,this.Ts=new ft,this.Es=new ft,this.Ls=null,this.As=null,this.Bs=null,this.zs=[],this.$=e,this.kn=i,this.Vs=e.rightOffset,this.Fs=e.barSpacing,this.F=t,this.Ps()}return t.prototype.options=function(){return this.$},t.prototype.applyLocalizationOptions=function(t){S(this.kn,t),this.Is(),this.Ps()},t.prototype.applyOptions=function(t,e){S(this.$,t),this.$.fixLeftEdge?this.Os():this.Ls=null,void 0!==t.barSpacing&&this.setBarSpacing(t.barSpacing),void 0!==t.rightOffset&&this.setRightOffset(t.rightOffset),this.Is(),this.Ps(),this.Es.fire()},t.prototype.isEmpty=function(){return 0===this.Kt||0===this.Ns.size()},t.prototype.visibleBars=function(){return this.Cs&&(this.Cs=!1,this.Rs()),this.Ds},t.prototype.tickMarks=function(){return this.Ss},t.prototype.points=function(){return this.Ns},t.prototype.width=function(){return this.Kt},t.prototype.setWidth=function(t){if(isFinite(t)&&!(t<=0)&&this.Kt!==t){if(this.$.lockVisibleTimeRangeOnResize&&this.Kt){var e=this.Fs*t/this.Kt;this.Ws(e)}if(null!==this.Ls&&b(this.visibleBars()).firstBar()<=this.Ls){var i=this.Kt-t;this.Vs-=Math.round(i/this.Fs)+1}this.Kt=t,this.Cs=!0,this.Us(),this.qs()}},t.prototype.indexToCoordinate=function(t){if(this.isEmpty()||!M(t))return 0;var e=this.baseIndex()+this.Vs-t;return this.Kt-(e+.5)*this.Fs},t.prototype.indexesToCoordinates=function(t,e){for(var i=this.baseIndex(),r=void 0===e?0:e.from,s=void 0===e?t.length:e.to,n=r;n<s;n++){var o=t[n].time,a=i+this.Vs-o,h=this.Kt-(a+.5)*this.Fs;t[n].x=h}},t.prototype.indexToUserTime=function(t){return this.Ss.indexToTime(t)},t.prototype.coordinateToIndex=function(t){return Math.ceil(this.js(t))},t.prototype.setRightOffset=function(t){this.Cs=!0,this.Vs=t,this.qs(),this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.barSpacing=function(){return this.Fs},t.prototype.setBarSpacing=function(t){this.Ws(t),this.qs(),this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.rightOffset=function(){return this.Vs},t.prototype.marks=function(){if(this.isEmpty())return null;if(null!==this.Bs)return this.Bs;for(var t=this.Fs,e=5*(this.F.options().layout.fontSize+4),i=Math.round(e/t),r=b(this.visibleBars()),s=Math.max(r.firstBar(),r.firstBar()-i),n=Math.max(r.lastBar(),r.lastBar()-i),o=0,a=0,h=this.Ss.build(t,e);a<h.length;a++){var l=h[a];if(s<=l.index&&l.index<=n){var u=this.Ss.indexToTime(l.index);if(null!==u){if(o<this.zs.length){var c=this.zs[o];c.coord=this.indexToCoordinate(l.index),c.label=this.Hs(u,l.span),c.span=l.span,c.major=!1}else this.zs.push({coord:this.indexToCoordinate(l.index),label:this.Hs(u,l.span),span:l.span,major:!1});o++}}}return this.zs.length=o,this.Bs=this.zs,this.zs},t.prototype.reset=function(){this.Cs=!0,this.Ns=new bi,this.pn=null,this.mn=null,this.Ys(),this.Ss.reset(),this.Ls=null},t.prototype.restoreDefault=function(){this.Cs=!0,this.setBarSpacing(this.$.barSpacing),this.setRightOffset(this.$.rightOffset)},t.prototype.fixLeftEdge=function(){return this.$.fixLeftEdge},t.prototype.setBaseIndex=function(t){this.Cs=!0,this.ks=t,this.qs(),this.Os()},t.prototype.zoom=function(t,e){var i=this.js(t),r=this.barSpacing(),s=r+e*(r/10);this.setBarSpacing(s),this.$.rightBarStaysOnScroll||this.setRightOffset(this.rightOffset()+(i-this.js(t)))},t.prototype.startScale=function(t){this.pn&&this.endScroll(),null===this.mn&&null===this.As&&(this.isEmpty()||(this.mn=t,this.Ks()))},t.prototype.scaleTo=function(t){if(null!==this.As){var e=mt(this.Kt-t,0,this.Kt),i=mt(this.Kt-b(this.mn),0,this.Kt);0!==e&&0!==i&&this.setBarSpacing(this.As.barSpacing*e/i)}},t.prototype.endScale=function(){null!==this.mn&&(this.mn=null,this.Ys())},t.prototype.startScroll=function(t){null===this.pn&&null===this.As&&(this.isEmpty()||(this.pn=t,this.Ks()))},t.prototype.scrollTo=function(t){if(this.Cs=!0,null!==this.pn){var e=(this.pn-t)/this.barSpacing();this.Vs=b(this.As).rightOffset+e,this.Cs=!0,this.qs()}},t.prototype.endScroll=function(){null!==this.pn&&(this.pn=null,this.Ys())},t.prototype.scrollToRealTime=function(){this.scrollToOffsetAnimated(this.$.rightOffset)},t.prototype.scrollToOffsetAnimated=function(t,e){var i=this;if(void 0===e&&(e=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var r=this.Vs,s=(new Date).getTime(),n=function(){var o=((new Date).getTime()-s)/e,a=o>=1,h=a?t:r+(t-r)*o;i.setRightOffset(h),a||setTimeout(n,20)};n()},t.prototype.update=function(t,e,i){if(this.Cs=!0,e.length>0){var r=this.Ns.size();this.Ns.merge(t,e),this.Vs<0&&this.Ns.size()===r+1&&(this.Vs-=1,this.Cs=!0)}this.Ss.merge(i),this.qs()},t.prototype.visibleBarsChanged=function(){return this.Ts},t.prototype.optionsApplied=function(){return this.Es},t.prototype.baseIndex=function(){return this.ks||0},t.prototype.setVisibleRange=function(t){var e=t.count();this.Ws(this.Kt/e),this.Vs=t.lastBar()-this.baseIndex(),this.qs(),this.Cs=!0,this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.fitContent=function(){var t=this.Ns.firstIndex(),e=this.Ns.lastIndex();null!==t&&null!==e&&this.setVisibleRange(new fi(t,e+this.$.rightOffset))},t.prototype.setTimePointsRange=function(t){var e=this.points(),i=e.firstIndex(),r=e.lastIndex();if(null!==i&&null!==r){var s=b(e.valueAt(i)).timestamp,n=b(e.valueAt(r)).timestamp,o=new fi(b(e.indexOf(Math.max(s,t.from.timestamp),!0)),b(e.indexOf(Math.min(n,t.to.timestamp),!0)));this.setVisibleRange(o)}},t.prototype.formatDateTime=function(t){return void 0!==this.kn.timeFormatter?this.kn.timeFormatter(t.businessDay||t.timestamp):this.$s.format(new Date(1e3*t.timestamp))},t.prototype._s=function(t){return(this.Kt+1-t)/this.Fs},t.prototype.js=function(t){var e=this._s(t),i=this.baseIndex()+this.Vs-e;return Math.round(1e6*i)/1e6},t.prototype.Ws=function(t){var e=this.Fs;this.Fs=t,this.Us(),e!==this.Fs&&(this.Cs=!0,this.Xs())},t.prototype.Rs=function(){if(this.isEmpty())this.Zs(null);else{var t=this.baseIndex(),e=Math.ceil(this.Kt/this.Fs)-1,i=Math.round(this.Vs+t),r=i-e;this.Zs(new fi(r,i))}},t.prototype.Us=function(){if(this.Fs<.5&&(this.Fs=.5,this.Cs=!0),0!==this.Kt){var t=.5*this.Kt;this.Fs>t&&(this.Fs=t,this.Cs=!0)}},t.prototype.qs=function(){var t=this.Js();this.Vs>t&&(this.Vs=t,this.Cs=!0);var e=this.Gs();null!==e&&this.Vs<e&&(this.Vs=e,this.Cs=!0)},t.prototype.Gs=function(){var t=this.Ns.firstIndex(),e=this.ks;if(null===t||null===e)return null;if(null!==this.Ls){var i=this.Kt/this.Fs;return this.Ls-e+i-1}return t-e-1+Math.min(2,this.Ns.size())},t.prototype.Js=function(){return this.Kt/this.Fs-Math.min(2,this.Ns.size())},t.prototype.Ks=function(){this.As={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},t.prototype.Ys=function(){this.As=null},t.prototype.Hs=function(t,e){var i=this,r=this.xs.get(e);return void 0===r&&(r=new di((function(t){return i.Qs(t,e)})),this.xs.set(e,r)),void 0===t.businessDay?r.format(new Date(1e3*t.timestamp)):r.format(new Date(Date.UTC(t.businessDay.year,t.businessDay.month-1,t.businessDay.day)))},t.prototype.Qs=function(t,e){var i={},r=this.$.timeVisible;return e<20&&r?(i.hour12=!1,i.hour="2-digit",i.minute="2-digit",this.$.secondsVisible&&(i.second="2-digit")):e<40&&r?(i.hour12=!1,i.hour="2-digit",i.minute="2-digit"):e<50||e<60?i.day="numeric":e<70?i.month="short":i.year="numeric",new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()).toLocaleString(this.kn.locale,i)},t.prototype.Zs=function(t){if(null!==t||null!==this.Ds){var e=this.Ds;this.Ds=t,(null===this.Ds||null!==e&&!this.Ds.equals(e))&&this.Ts.fire(),this.Xs()}},t.prototype.Xs=function(){this.Bs=null},t.prototype.Is=function(){this.Xs(),this.xs.clear()},t.prototype.Ps=function(){var t=this.kn.dateFormat;this.$.timeVisible?this.$s=new pi({dateFormat:t,timeFormat:this.$.secondsVisible?"%h:%m:%s":"%h:%m",dateTimeSeparator:"   ",locale:this.kn.locale}):this.$s=new li(t,this.kn.locale)},t.prototype.Os=function(){if(this.$.fixLeftEdge){var t=this.Ns.firstIndex();if(null!==t&&this.Ls!==t){this.Ls=t;var e=b(this.visibleBars()).firstBar()-t;if(e<0){var i=this.Vs-e-1;this.setRightOffset(i)}}}},t}(),Si=function(t){function e(e){var i=t.call(this)||this;return i.th=new Map,i.m=e,i}return d(e,t),e.prototype._drawImpl=function(t){},e.prototype._drawBackgroundImpl=function(t){if(this.m.visible){t.save();for(var e=0,i=0,r=this.m.lines;i<r.length;i++)if(0!==(h=r[i]).text.length){t.font=h.font;var s=this.ih(t,h.text);s>this.m.width?h.zoom=this.m.width/s:h.zoom=1,e+=h.lineHeight*h.zoom}var n=0;switch(this.m.vertAlign){case"top":n=0;break;case"center":n=Math.max((this.m.height-e)/2,0);break;case"bottom":n=Math.max(this.m.height-e,0)}t.fillStyle=this.m.color;for(var o=0,a=this.m.lines;o<a.length;o++){var h=a[o];t.save();var l=0;switch(this.m.horzAlign){case"left":t.textAlign="left",l=h.lineHeight/2;break;case"center":t.textAlign="center",l=this.m.width/2;break;case"right":t.textAlign="right",l=this.m.width-1-h.lineHeight/2}t.translate(l,n),t.textBaseline="top",t.font=h.font,t.scale(h.zoom,h.zoom),t.fillText(h.text,0,h.vertOffset),t.restore(),n+=h.lineHeight*h.zoom}t.restore()}},e.prototype.ih=function(t,e){var i=this.nh(t.font),r=i.get(e);return void 0===r&&(r=t.measureText(e).width,i.set(e,r)),r},e.prototype.nh=function(t){var e=this.th.get(t);return void 0===e&&(e=new Map,this.th.set(t,e)),e},e}(F),xi=function(){function t(t){this.o=!0,this.p={visible:!1,color:"",height:0,width:0,lines:[],vertAlign:"center",horzAlign:"center"},this.g=new Si(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){return this.o&&(this.M(t,e),this.o=!1),this.g},t.prototype.M=function(t,e){var i=this.k.options(),r=this.p;r.visible=i.visible,r.visible&&(r.color=i.color,r.width=e,r.height=t,r.horzAlign=i.horzAlign,r.vertAlign=i.vertAlign,r.lines=[{text:i.text,font:Ye(i.fontSize),lineHeight:1.2*i.fontSize,vertOffset:0,zoom:0}])},t}(),Mi=function(t){function e(e,i){var r=t.call(this)||this;return r.$=i,r.J=new xi(r),r}return d(e,t),e.prototype.paneViews=function(){return[this.J]},e.prototype.options=function(){return this.$},e.prototype.updateAllViews=function(){this.J.update()},e}(nt),Ci=function(){function t(t,e){this.sh=[],this.hh=[],this.Kt=0,this.rh=null,this.uh=null,this.eh=new ft,this.oh=new ft,this.fh=t,this.$=e,this.ah=new Xe(this),this.$n=new wi(this,e.timeScale,this.$.localization),this.lh=new Ze,this.v=new ot(this,e.crosshair),this.vh=new Ge(e.crosshair),this.dh=new Mi(this,e.watermark),this.createPane(),this.sh[0].setStretchFactor(2e3),this.sh[0].addDataSource(this.dh,!0,!1)}return t.prototype.fullUpdate=function(){this.Mh(new Qe(3))},t.prototype.lightUpdate=function(){this.Mh(new Qe(2))},t.prototype.updateSource=function(t){var e=this.wh(t);this.Mh(e)},t.prototype.hoveredSource=function(){return this.uh},t.prototype.setHoveredSource=function(t){var e=this.uh;this.uh=t,null!==e&&this.updateSource(e.source),null!==t&&this.updateSource(t.source)},t.prototype.options=function(){return this.$},t.prototype.applyOptions=function(t){S(this.$,t),void 0!==t.priceScale&&(this.mainPriceScale().applyOptions(t.priceScale),this.eh.fire()),void 0!==t.timeScale&&this.$n.applyOptions(t.timeScale),void 0!==t.localization&&(this.$n.applyLocalizationOptions(t.localization),this.mainPriceScale().updateFormatter()),this.fullUpdate()},t.prototype.updateAllPaneViews=function(){this.sh.forEach((function(t){return t.updateAllViews()})),this.updateCrosshair()},t.prototype.timeScale=function(){return this.$n},t.prototype.panes=function(){return this.sh},t.prototype.gridSource=function(){return this.lh},t.prototype.watermarkSource=function(){return this.dh},t.prototype.crosshairSource=function(){return this.v},t.prototype.crosshairMoved=function(){return this.oh},t.prototype.width=function(){return this.Kt},t.prototype.setPaneHeight=function(t,e){t.setHeight(e),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.setWidth=function(t){this.Kt=t,this.$n.setWidth(this.Kt),this.sh.forEach((function(e){return e.setWidth(t)})),this.recalculateAllPanes()},t.prototype.createPane=function(t){var e=new ti(this.$n,this);void 0!==t?this.sh.splice(t,0,e):this.sh.push(e);var i=void 0===t?this.sh.length-1:t,r=new Qe(3);return r.invalidatePane(i,{level:0,autoScale:!0}),this.invalidate(r),e},t.prototype.startScalePrice=function(t,e,i){t.startScalePrice(e,i)},t.prototype.scalePriceTo=function(t,e,i){t.scalePriceTo(e,i),this.updateCrosshair(),this.Mh(this.bh(t,2))},t.prototype.endScalePrice=function(t,e){t.endScalePrice(e),this.Mh(this.bh(t,2))},t.prototype.startScrollPrice=function(t,e,i){e.isAutoScale()||t.startScrollPrice(e,i)},t.prototype.scrollPriceTo=function(t,e,i){e.isAutoScale()||(t.scrollPriceTo(e,i),this.updateCrosshair(),this.Mh(this.bh(t,2)))},t.prototype.endScrollPrice=function(t,e){e.isAutoScale()||(t.endScrollPrice(e),this.Mh(this.bh(t,2)))},t.prototype.setPriceAutoScale=function(t,e,i){t.setPriceAutoScale(e,i),this.Mh(this.bh(t,2))},t.prototype.resetPriceScale=function(t,e){t.resetPriceScale(e),this.Mh(this.bh(t,2))},t.prototype.startScaleTime=function(t){this.$n.startScale(t)},t.prototype.zoomTime=function(t,e){var i=this.timeScale();if(!i.isEmpty()&&0!==e){var r=i.width();t=Math.max(1,Math.min(t,r)),i.zoom(t,e),this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()}},t.prototype.scrollChart=function(t){this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()},t.prototype.scaleTimeTo=function(t){this.$n.scaleTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.endScaleTime=function(){this.$n.endScale(),this.lightUpdate()},t.prototype.startScrollTime=function(t){this.rh=t,this.$n.startScroll(t)},t.prototype.scrollTimeTo=function(t){var e=!1;return null!==this.rh&&Math.abs(t-this.rh)>20&&(this.rh=null,e=!0),this.$n.scrollTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate(),e},t.prototype.endScrollTime=function(){this.$n.endScroll(),this.lightUpdate(),this.rh=null},t.prototype.resetTimeScale=function(){this.$n.restoreDefault(),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.invalidate=function(t){this.fh&&this.fh(t),this.lh.invalidate(),this.lightUpdate()},t.prototype.dataSources=function(){return this.sh.reduce((function(t,e){return t.concat(e.dataSources())}),[])},t.prototype.serieses=function(){return this.hh},t.prototype.setAndSaveCurrentPosition=function(t,e,i){this.v.saveOriginCoord(t,e);var r=NaN,s=this.$n.coordinateToIndex(t),n=this.$n.visibleBars();if(null!==n&&(s=Math.min(Math.max(n.firstBar(),s),n.lastBar())),null!==i.mainDataSource()){var o=i.defaultPriceScale(),a=o.firstValue();null!==a&&(r=o.coordinateToPrice(e,a)),r=this.vh.align(r,s,i)}this.v.setPosition(s,r,i),this.mh(),this.oh.fire(this.v.appliedIndex(),{x:t,y:e})},t.prototype.clearCurrentPosition=function(){this.crosshairSource().clearPosition(),this.mh(),this.oh.fire(null,null)},t.prototype.updateCrosshair=function(){var t=this.v.pane();if(null!==t){var e=this.v.originCoordX(),i=this.v.originCoordY();this.setAndSaveCurrentPosition(e,i,t)}},t.prototype.updateTimeScale=function(t,e,i,r){r&&this.$n.reset(),this.$n.update(t,e,i)},t.prototype.updateTimeScaleBaseIndex=function(t){var e=this.hh.reduce((function(t,e){var i=e.bars();if(i.isEmpty())return t;var r=b(i.lastIndex());return void 0===t?r:Math.max(r,t)}),void 0);if(void 0!==e){var i=this.$n,r=i.baseIndex(),s=i.visibleBars();if(null!==s){var n=s.contains(r);if(void 0!==t&&t>0&&!n){var o=e-r;i.setRightOffset(i.rightOffset()-o)}}i.setBaseIndex(e)}this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.recalculatePane=function(t){null!==t&&t.recalculate()},t.prototype.paneForSource=function(t){var e=this.sh.find((function(e){return e.orderedSources().includes(t)}));return void 0===e?null:e},t.prototype.recalculateAllPanes=function(){this.sh.forEach((function(t){return t.recalculate()})),this.updateAllPaneViews()},t.prototype.destroy=function(){this.sh.forEach((function(t){return t.destroy()})),this.sh.length=0,this.$.localization.priceFormatter=void 0,this.$.localization.timeFormatter=void 0},t.prototype.setPriceAutoScaleForAllMainSources=function(){this.sh.map((function(t){return t.mainDataSource()})).forEach((function(t){null!==t&&b(t.priceScale()).setMode({autoScale:!0})}))},t.prototype.rendererOptionsProvider=function(){return this.ah},t.prototype.priceAxisRendererOptions=function(){return this.ah.options()},t.prototype.mainPriceScaleOptionsChanged=function(){return this.eh},t.prototype.mainPriceScale=function(){return this.sh[0].defaultPriceScale()},t.prototype.createSeries=function(t,e){var i=this.sh[0],r=this.ph(e,t,i);return this.hh.push(r),1===this.hh.length?this.fullUpdate():this.lightUpdate(),r},t.prototype.removeSeries=function(t){var e=this.paneForSource(t),i=this.hh.indexOf(t);y(-1!==i,"Series not found"),this.hh.splice(i,1),b(e).removeDataSource(t),t.destroy&&t.destroy()},t.prototype.fitContent=function(){var t=new Qe(2);t.setFitContent(),this.Mh(t)},t.prototype.setTargetTimeRange=function(t){var e=new Qe(2);e.setTargetTimeRange(t),this.Mh(e)},t.prototype.bh=function(t,e){var i=new Qe(e);if(null!==t){var r=this.sh.indexOf(t);i.invalidatePane(r,{level:e})}return i},t.prototype.wh=function(t,e){return void 0===e&&(e=2),this.bh(this.paneForSource(t),e)},t.prototype.Mh=function(t){this.fh&&this.fh(t),this.lh.invalidate()},t.prototype.mh=function(){this.Mh(new Qe(1))},t.prototype.ph=function(t,e,i){var r=new Fe(this,t,e);return i.addDataSource(r,Boolean(t.overlay),!1),t.overlay&&r.applyOptions(t),r},t}(),Ti=function(){function t(t,e){this.w=t,this.h=e}return t.prototype.equals=function(t){return this.w===t.w&&this.h===t.h},t}();function ki(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function _i(t){var e=b(t.getContext("2d"));return e.setTransform(1,0,0,1,0,0),e}function Ri(t){var e=t.createElement("canvas");return function(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",t.style.webkitTapHighlightColor="transparent"}(e),e}function Pi(t,e){var i=Ri(t),r=ki(i);return i.style.width=e.w+"px",i.style.height=e.h+"px",i.width=e.w*r,i.height=e.h*r,i}function Ei(t,e){var i=Ri(b(t.ownerDocument));t.appendChild(i);var r=a(i);return r.resizeCanvas({width:e.w,height:e.h}),r}var Ai,Vi=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch),Li="onorientationchange"in window&&Vi,$i=/Android/i.test(navigator.userAgent),Fi=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent),Bi=$i||Fi;!function(t){t[t.ResetClick=500]="ResetClick",t[t.LongTap=240]="LongTap"}(Ai||(Ai={}));var Di=function(){function t(t,e,i){this.gh=0,this.yh=null,this.kh=null,this.Nh=!1,this.Sh=null,this.xh=!1,this.Dh=!1,this.Ch=null,this.Th=null,this.Eh=null,this.Lh=null,this.Ah=0,this.Bh=!1,this.zh=!1,this.Vh=!1,this.Fh=t,this.Ph=e,this.$=i,this.Ih()}return t.prototype.destroy=function(){null!==this.Ch&&(this.Ch(),this.Ch=null),null!==this.Th&&(this.Th(),this.Th=null),null!==this.Eh&&(this.Eh(),this.Eh=null),this.Oh(),this.Rh()},t.prototype.Wh=function(t){var e=this;this.Th&&this.Th();var i=this.Uh.bind(this);this.Th=function(){e.Fh.removeEventListener("mousemove",i)},this.Fh.addEventListener("mousemove",i),Ii(t)&&this.Uh(t);var r=this.qh(t);this.jh(r,this.Ph.mouseEnterEvent)},t.prototype.Rh=function(){null!==this.yh&&clearTimeout(this.yh),this.gh=0,this.yh=null},t.prototype.Uh=function(t){if(!this.Vh||Ii(t)){var e=this.qh(t);this.jh(e,this.Ph.mouseMoveEvent)}},t.prototype.Hh=function(t){if((!("button"in t)||0===t.button)&&null===this.Lh){var e=Ii(t);if(!this.zh||!e){this.Bh=!0;var i=this.qh(t),r=w(this.Sh),s=Math.abs(r.x-i.pageX),n=Math.abs(r.y-i.pageY),o=s+n>5;if(o||!e){if(o&&!this.xh&&e){var a=.5*s,h=n>=a&&!this.$.treatVertTouchDragAsPageScroll,l=a>n&&!this.$.treatHorzTouchDragAsPageScroll;h||l||(this.zh=!0)}o&&(this.xh=!0,this.Dh=!0,e&&this.Oh()),this.zh||(this.jh(i,this.Ph.pressedMouseMoveEvent),e&&Ni(t))}}}},t.prototype.Yh=function(t){if(!("button"in t)||0===t.button){var e=this.qh(t);this.Oh(),this.Sh=null,this.Vh=!1,this.Eh&&(this.Eh(),this.Eh=null),Ii(t)&&this.Kh(t),this.jh(e,this.Ph.mouseUpEvent),++this.gh,this.yh&&this.gh>1?(this.jh(e,this.Ph.mouseDoubleClickEvent),this.Rh()):this.Dh||this.jh(e,this.Ph.mouseClickEvent),Ii(t)&&(Ni(t),this.Kh(t),0===t.touches.length&&(this.Nh=!1))}},t.prototype.Oh=function(){null!==this.kh&&(clearTimeout(this.kh),this.kh=null)},t.prototype.$h=function(t){if(!("button"in t)||0===t.button){var e=this.qh(t);this.Dh=!1,this.xh=!1,this.zh=!1,Ii(t)&&this.Wh(t),this.Sh={x:e.pageX,y:e.pageY},this.Eh&&(this.Eh(),this.Eh=null);var i=this.Hh.bind(this),r=this.Yh.bind(this),s=this.Fh.ownerDocument.documentElement;this.Eh=function(){s.removeEventListener("touchmove",i),s.removeEventListener("touchend",r),s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",r)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",r,{passive:!1}),this.Oh(),Ii(t)&&1===t.touches.length?this.kh=setTimeout(this._h.bind(this,t),240):(s.addEventListener("mousemove",i),s.addEventListener("mouseup",r)),this.Vh=!0,this.jh(e,this.Ph.mouseDownEvent),this.yh||(this.gh=0,this.yh=setTimeout(this.Rh.bind(this),500))}},t.prototype.Ih=function(){var t=this;this.Fh.addEventListener("mouseenter",this.Wh.bind(this)),this.Fh.addEventListener("touchcancel",this.Oh.bind(this));var e=this.Fh.ownerDocument,i=function(e){t.Ph.mouseDownOutsideEvent&&(e.target&&t.Fh.contains(e.target)||t.Ph.mouseDownOutsideEvent())};this.Ch=function(){e.removeEventListener("mousedown",i),e.removeEventListener("touchstart",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0}),this.Fh.addEventListener("mouseleave",this.Kh.bind(this)),this.Fh.addEventListener("touchstart",this.$h.bind(this),{passive:!0}),Li||this.Fh.addEventListener("mousedown",this.$h.bind(this)),this.Xh(),this.Fh.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Xh=function(){var t=this;void 0===this.Ph.pinchStartEvent&&void 0===this.Ph.pinchEvent&&void 0===this.Ph.pinchEndEvent||(this.Fh.addEventListener("touchstart",(function(e){return t.Zh(e.touches)}),{passive:!0}),this.Fh.addEventListener("touchmove",(function(e){if(2===e.touches.length&&null!==t.Lh&&void 0!==t.Ph.pinchEvent){var i=zi(e.touches[0],e.touches[1])/t.Ah;t.Ph.pinchEvent(t.Lh,i),Ni(e)}}),{passive:!1}),this.Fh.addEventListener("touchend",(function(e){t.Zh(e.touches)})))},t.prototype.Zh=function(t){1===t.length&&(this.Bh=!1),2!==t.length||this.Bh||this.Nh?this.Jh():this.Gh(t)},t.prototype.Gh=function(t){var e=Oi(this.Fh);this.Lh={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Ah=zi(t[0],t[1]),void 0!==this.Ph.pinchStartEvent&&this.Ph.pinchStartEvent(),this.Oh()},t.prototype.Jh=function(){null!==this.Lh&&(this.Lh=null,void 0!==this.Ph.pinchEndEvent&&this.Ph.pinchEndEvent())},t.prototype.Kh=function(t){this.Th&&this.Th();var e=this.qh(t);this.jh(e,this.Ph.mouseLeaveEvent)},t.prototype._h=function(t){var e=this.qh(t);this.jh(e,this.Ph.longTapEvent),this.Dh=!0,this.Nh=!0},t.prototype.jh=function(t,e){e&&e.call(this.Ph,t)},t.prototype.qh=function(t){var e;e="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var i=Oi(this.Fh);return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-i.left,localY:e.clientY-i.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type.startsWith("mouse")?"mouse":"touch",target:e.target,view:t.view}},t}();function Oi(t){return t.getBoundingClientRect()||{left:0,top:0}}function zi(t,e){var i=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(i*i+r*r)}function Ii(t){return Boolean(t.touches)}function Ni(t){t.cancelable&&t.preventDefault()}var Ui,Wi=function(){function t(t,e,i,r){if(this.Qh=0,this.tr=0,this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0,this.ur=t,this.er=t.paneWidgets()[e],this.or=t.paneWidgets()[i],this.ar=document.createElement("tr"),this.ar.style.height="1px",this.cr=document.createElement("td"),this.cr.style.padding="0",this.cr.setAttribute("colspan","3"),this.lr(),this.ar.appendChild(this.cr),r)this.vr=null,this.dr=null;else{this.vr=document.createElement("div"),this.vr.style.position="absolute",this.vr.style.zIndex="50",this.vr.style.height="5px",this.vr.style.width="100%",this.vr.style.backgroundColor="rgba(255, 255, 255, 0.02)",this.vr.style.cursor="ns-resize",this.cr.appendChild(this.vr);var s={mouseDownEvent:this.Mr.bind(this),pressedMouseMoveEvent:this.wr.bind(this),mouseUpEvent:this.br.bind(this)};this.dr=new Di(this.vr,s,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}}return t.prototype.destroy=function(){null!==this.dr&&this.dr.destroy()},t.prototype.getElement=function(){return this.ar},t.prototype.getSize=function(){return new Ti(this.er.getSize().w,1)},t.prototype.getImage=function(){var t=this.getSize(),e=Pi(document,t),i=_i(e);return i.fillStyle=this.ur.options().timeScale.borderColor,i.fillRect(0,0,t.w,t.h),e},t.prototype.update=function(){this.lr()},t.prototype.lr=function(){this.cr.style.background=this.ur.options().timeScale.borderColor},t.prototype.Mr=function(t){this.Qh=t.pageY,this.tr=0,this.ir=this.er.getSize().h+this.or.getSize().h,this.nr=this.er.stretchFactor()+this.or.stretchFactor(),this.sr=30,this.hr=this.ir-this.sr,this.rr=this.nr/this.ir},t.prototype.wr=function(t){this.tr=t.pageY-this.Qh;var e=this.er.getSize().h,i=mt(e+this.tr,this.sr,this.hr)*this.rr,r=this.nr-i;this.er.setStretchFactor(i),this.or.setStretchFactor(r),this.ur.adjustSize(),this.er.getSize().h!==e&&(this.Qh=t.pageY)},t.prototype.br=function(t){this.Qh=0,this.tr=0,this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0},t}(),ji=function(){function t(t,e,i,r){this.$t=new te(200),this.Zt=0,this.mr="",this.pr="",this.gr=[],this.yr=new Map,this.Zt=t,this.mr=e,this.pr=Ye(t,i,r)}return t.prototype.destroy=function(){delete this.$t,this.gr=[],this.yr.clear()},t.prototype.paintTo=function(t,e,i,r,s){var n=this.kr(t,e);if("left"!==s){var o=ki(t.canvas);i-=Math.floor(n.textWidth*o)}r-=Math.floor(n.height/2),t.drawImage(n.canvas,i,r,n.width,n.height)},t.prototype.kr=function(t,e){var i,r=this;if(this.yr.has(e))i=g(this.yr.get(e));else{if(this.gr.length>=200){var s=g(this.gr.shift());this.yr.delete(s)}var n=ki(t.canvas),o=Math.ceil(this.Zt/4.5),a=Math.round(this.Zt/10),h=Math.ceil(this.$t.measureText(t,e)),l=bt(Math.round(h+2*o)),u=bt(this.Zt+2*o),c=Pi(document,new Ti(l,u));i={text:e,textWidth:Math.round(Math.max(1,h)),width:Math.ceil(l*n),height:Math.ceil(u*n),canvas:c},0!==h&&(this.gr.push(i.text),this.yr.set(i.text,i)),J(t=_i(i.canvas),n,(function(){t.font=r.pr,t.fillStyle=r.mr,t.fillText(e,0,u-o-a)}))}return i},t}();!function(t){t[t.Default=0]="Default",t[t.NsResize=1]="NsResize"}(Ui||(Ui={}));var qi,Yi,Hi=function(){function t(t,e,i,r){var s=this;this.B=null,this.Nr=null,this.Sr=null,this.xr=!1,this.Dr=!0,this.Cr=new te(50),this.Tr=new ji(11,"#000"),this.mr=null,this.pr=null,this.Er=0,this.Lr=function(){s.Ar(s.ah.options()),s.I.chart().model().lightUpdate()},this.Br=function(){s.I.chart().model().lightUpdate()},this.I=t,this.$=e,this.ah=i,this.zr="left"===r,this.cr=document.createElement("div"),this.cr.style.height="100%",this.cr.style.overflow="hidden",this.cr.style.width="25px",this.cr.style.left="0",this.cr.style.position="relative",this.Vr=Ei(this.cr,new Ti(16,16)),this.Vr.subscribeCanvasConfigured(this.Lr);var n=this.Vr.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Fr=Ei(this.cr,new Ti(16,16)),this.Fr.subscribeCanvasConfigured(this.Br);var o=this.Fr.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";var a={mouseDownEvent:this.Mr.bind(this),pressedMouseMoveEvent:this.wr.bind(this),mouseDownOutsideEvent:this.Pr.bind(this),mouseUpEvent:this.br.bind(this),mouseDoubleClickEvent:this.Ir.bind(this),mouseEnterEvent:this.Or.bind(this),mouseLeaveEvent:this.Rr.bind(this)};this.dr=new Di(this.Fr.canvas,a,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}return t.prototype.destroy=function(){this.dr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Br),this.Fr.destroy(),this.Vr.unsubscribeCanvasConfigured(this.Lr),this.Vr.destroy(),null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=null,null!==this.Sr&&(clearTimeout(this.Sr),this.Sr=null),this.Tr.destroy()},t.prototype.getElement=function(){return this.cr},t.prototype.backgroundColor=function(){return this.$.backgroundColor},t.prototype.lineColor=function(){return this.I.chart().options().priceScale.borderColor},t.prototype.textColor=function(){return this.$.textColor},t.prototype.fontSize=function(){return this.$.fontSize},t.prototype.baseFont=function(){return Ye(this.fontSize(),this.$.fontFamily)},t.prototype.rendererOptions=function(){var t=this.ah.options(),e=this.mr!==t.color,i=this.pr!==t.font;return(e||i)&&(this.Ar(t),this.mr=t.color),i&&(this.Cr.reset(),this.pr=t.font),t},t.prototype.optimalWidth=function(){if(!this.isVisible()||null===this.B)return 0;var t=34,e=this.rendererOptions(),i=_i(this.Vr.canvas),r=this.B.marks();i.font=this.baseFont(),r.length>0&&(t=Math.max(this.Cr.measureText(i,r[0].label),this.Cr.measureText(i,r[r.length-1].label)));for(var s=this.Wr(),n=s.length;n--;){var o=this.Cr.measureText(i,s[n].text());o>t&&(t=o)}var a=Math.ceil(e.borderSize+e.tickLength+e.paddingInner+e.paddingOuter+t);return a+a%2},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.Nr&&this.Nr.equals(t)||(this.Nr=t,this.Vr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.height=t.h+"px",this.cr.style.minWidth=t.w+"px")},t.prototype.getWidth=function(){return b(this.Nr).w},t.prototype.setPriceScale=function(t){this.B!==t&&(null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=t,t.onMarksChanged().subscribe(this.cn.bind(this),this))},t.prototype.priceScale=function(){return this.B},t.prototype.isVisible=function(){return this.Dr},t.prototype.setVisible=function(t){t!==this.Dr&&(this.cr.style.display=t?"table-cell":"none",this.Dr=t)},t.prototype.setAutoScale=function(t){var e=this.I.state();this.I.chart().model().setPriceAutoScale(e,b(this.priceScale()),t)},t.prototype.reset=function(){var t=this.I.state();this.I.chart().model().resetPriceScale(t,b(this.priceScale()))},t.prototype.paint=function(t){if(this.Dr&&null!==this.Nr){if(1!==t){var e=_i(this.Vr.canvas);this.Ur(),this.qr(e,this.Vr.pixelRatio),this.Lt(e,this.Vr.pixelRatio),this.jr(e,this.Vr.pixelRatio),this.Hr(e,this.Vr.pixelRatio)}var i=_i(this.Fr.canvas),r=this.Nr.w,s=this.Nr.h;J(i,this.Fr.pixelRatio,(function(){i.clearRect(0,0,r,s)})),this.Yr(i,this.Fr.pixelRatio)}},t.prototype.getImage=function(){return this.Vr.canvas},t.prototype.isLeft=function(){return this.zr},t.prototype.Mr=function(t){if(null!==this.B&&!this.B.isEmpty()&&this.I.chart().options().handleScale.axisPressedMouseMove){var e=this.I.chart().model(),i=this.I.state();this.xr=!0,e.startScalePrice(i,this.B,t.localY)}},t.prototype.wr=function(t){if(null!==this.B&&this.I.chart().options().handleScale.axisPressedMouseMove){var e=this.I.chart().model(),i=this.I.state(),r=this.B;e.scalePriceTo(i,r,t.localY)}},t.prototype.Pr=function(){if(null!==this.B&&this.I.chart().options().handleScale.axisPressedMouseMove){var t=this.I.chart().model(),e=this.I.state(),i=this.B;this.xr&&(this.xr=!1,t.endScalePrice(e,i))}},t.prototype.br=function(t){if(null!==this.B&&this.I.chart().options().handleScale.axisPressedMouseMove){var e=this.I.chart().model(),i=this.I.state();this.xr=!1,e.endScalePrice(i,this.B)}},t.prototype.Ir=function(t){this.I.chart().options().handleScale.axisDoubleClickReset&&this.reset()},t.prototype.Or=function(t){null!==this.B&&(!this.I.chart().model().options().handleScale.axisPressedMouseMove||this.B.isPercentage()||this.B.isIndexedTo100()||this.Kr(1))},t.prototype.Rr=function(t){this.Kr(0)},t.prototype.Wr=function(){var t=this,e=[],i=null===this.B?void 0:this.B;return function(r){for(var s=0;s<r.length;++s)for(var n=r[s].priceAxisViews(t.I.state(),i),o=0;o<n.length;o++)e.push(n[o])}(this.I.state().orderedSources()),e},t.prototype.qr=function(t,e){var i=this;if(null!==this.Nr){var r=this.Nr.w,s=this.Nr.h;J(t,e,(function(){Z(t,0,0,r,s,i.backgroundColor())}))}},t.prototype.Lt=function(t,e){if(null!==this.Nr&&null!==this.B&&this.B.options().borderVisible){t.save(),t.fillStyle=this.lineColor();var i,r=Math.max(1,Math.floor(this.rendererOptions().borderSize*e));i=this.zr?Math.floor(this.Nr.w*e)-r:0,t.fillRect(i,0,r,Math.ceil(this.Nr.h*e)),t.restore()}},t.prototype.jr=function(t,e){if(null!==this.Nr&&null!==this.B){var i=this.B.marks();t.save(),t.strokeStyle=this.lineColor(),t.font=this.baseFont(),t.fillStyle=this.lineColor();var r=this.rendererOptions(),s=this.B.options().borderVisible,n=this.zr?Math.floor((this.Nr.w-r.tickLength)*e-r.borderSize*e):Math.floor(r.borderSize*e),o=this.zr?Math.round(n-r.paddingInner*e):Math.round(n+r.tickLength*e+r.paddingInner*e),a=this.zr?"right":"left",h=Math.max(1,Math.floor(e)),l=Math.floor(.5*e);if(s){var u=Math.round(r.tickLength*e);t.beginPath();for(var c=0,p=i;c<p.length;c++){var f=p[c];t.rect(n,Math.round(f.coord*e)-l,u,h)}t.fill()}t.fillStyle=this.textColor();for(var d=0,v=i;d<v.length;d++)f=v[d],this.Tr.paintTo(t,f.label,o,Math.round(f.coord*e),a);t.restore()}},t.prototype.Ur=function(){if(null!==this.Nr&&null!==this.B){var t=this.Nr.h/2,e=[],i=this.B.orderedSources().slice(),r=this.I.state(),s=this.rendererOptions();this.B===r.defaultPriceScale()&&this.I.state().orderedSources().forEach((function(t){r.isOverlay(t)&&i.push(t)}));var n=this.B.mainSource(),o=this.B;i.forEach((function(i){var s=i.priceAxisViews(r,o);s.forEach((function(t){t.setFixedCoordinate(null),t.isVisible()&&e.push(t)})),n===i&&s.length>0&&(t=s[0].coordinate())}));var a=e.filter((function(e){return e.coordinate()<=t})),h=e.filter((function(e){return e.coordinate()>t}));if(a.sort((function(t,e){return e.coordinate()-t.coordinate()})),a.length&&h.length&&h.push(a[0]),h.sort((function(t,e){return t.coordinate()-e.coordinate()})),e.forEach((function(t){return t.setFixedCoordinate(t.coordinate())})),this.B.options().alignLabels){for(var l=1;l<a.length;l++){var u=a[l],c=(f=a[l-1]).height(s,!1);u.coordinate()>(d=f.getFixedCoordinate())-c&&u.setFixedCoordinate(d-c)}for(var p=1;p<h.length;p++){var f,d;u=h[p],c=(f=h[p-1]).height(s,!0),u.coordinate()<(d=f.getFixedCoordinate())+c&&u.setFixedCoordinate(d+c)}}}},t.prototype.Hr=function(t,e){var i=this;if(null!==this.Nr){t.save();var r=this.Nr,s=this.Wr(),n=this.rendererOptions(),o=this.zr?"right":"left";s.forEach((function(s){if(s.isAxisLabelVisible()){var a=s.renderer();t.save(),a.draw(t,n,i.Cr,r.w,o,e),t.restore()}})),t.restore()}},t.prototype.Yr=function(t,e){var i=this;if(null!==this.Nr&&null!==this.B){t.save();var r=this.Nr,s=this.I.chart().model(),n=[],o=this.I.state(),a=s.crosshairSource().priceAxisViews(o,this.B);a.length&&n.push(a);var h=this.rendererOptions(),l=this.zr?"right":"left";n.forEach((function(s){s.forEach((function(s){t.save(),s.renderer().draw(t,h,i.Cr,r.w,l,e),t.restore()}))})),t.restore()}},t.prototype.Kr=function(t){this.cr.style.cursor=1===t?"ns-resize":"default"},t.prototype.cn=function(){var t=this,e=this.optimalWidth();if(this.Er<e){var i=this.I.chart();null===this.Sr&&(this.Sr=setTimeout((function(){i&&i.model().fullUpdate(),t.Sr=null}),100))}this.Er=e},t.prototype.Ar=function(t){this.Tr.destroy(),this.Tr=new ji(t.fontSize,t.color,t.fontFamily)},t}(),Xi=Bi,Ki=function(){function t(t,e){var i=this;this.Nr=new Ti(0,0),this.$r=null,this._r=null,this.Xr=!1,this.Zr="none",this.Jr=new ft,this.Gr=0,this.Qr=!1,this.tu=null,this.iu=!1,this.nu=null,this.Lr=function(){return i.su&&i.F().lightUpdate()},this.Br=function(){return i.su&&i.F().lightUpdate()},this.hu=t,this.su=e,this.su.onDestroyed().subscribe(this.ru.bind(this),this,!0),this.uu=document.createElement("td"),this.uu.style.padding="0",this.uu.style.position="relative";var r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.eu=document.createElement("td"),this.eu.style.padding="0",this.ou=document.createElement("td"),this.ou.style.padding="0",this.uu.appendChild(r),this.Vr=Ei(r,new Ti(16,16)),this.Vr.subscribeCanvasConfigured(this.Lr);var s=this.Vr.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Fr=Ei(r,new Ti(16,16)),this.Fr.subscribeCanvasConfigured(this.Br);var n=this.Fr.canvas;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.ar=document.createElement("tr"),this.ar.appendChild(this.eu),this.ar.appendChild(this.uu),this.ar.appendChild(this.ou),this.fu(),t.model().mainPriceScaleOptionsChanged().subscribe(this.au.bind(this),this),this.updatePriceAxisWidget();var o=this.chart().options().handleScroll;this.dr=new Di(this.Fr.canvas,this,{treatVertTouchDragAsPageScroll:!o.vertTouchDrag,treatHorzTouchDragAsPageScroll:!o.horzTouchDrag})}return t.prototype.destroy=function(){null!==this.$r&&this.$r.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Br),this.Fr.destroy(),this.Vr.unsubscribeCanvasConfigured(this.Lr),this.Vr.destroy(),null!==this.su&&this.su.onDestroyed().unsubscribeAll(this),this.dr.destroy()},t.prototype.state=function(){return b(this.su)},t.prototype.stateOrNull=function(){return this.su},t.prototype.setState=function(e){null!==this.su&&this.su.onDestroyed().unsubscribeAll(this),this.su=e,null!==this.su&&this.su.onDestroyed().subscribe(t.prototype.ru.bind(this),this,!0),this.updatePriceAxisWidget()},t.prototype.chart=function(){return this.hu},t.prototype.getElement=function(){return this.ar},t.prototype.updatePriceAxisWidget=function(){if(null!==this.su&&null!==this.$r&&0!==this.F().serieses().length){var t=this.su.defaultPriceScale();this.$r.setPriceScale(b(t))}},t.prototype.stretchFactor=function(){return null!==this.su?this.su.stretchFactor():0},t.prototype.setStretchFactor=function(t){this.su&&this.su.setStretchFactor(t)},t.prototype.mouseEnterEvent=function(t){if(this.su){var e=t.localX,i=t.localY;Li||this.cu(e,i)}},t.prototype.mouseDownEvent=function(t){if(this.Qr=!1,this.iu=null!==this.tu,this.su){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)b(document.activeElement).blur();else{var e=document.getSelection();null!==e&&e.removeAllRanges()}var i=this.F();if(!this.su.defaultPriceScale().isEmpty()&&!i.timeScale().isEmpty()){if(null!==this.tu){var r=i.crosshairSource();this.nu={x:r.appliedX(),y:r.appliedY()},this.tu={x:t.localX,y:t.localY}}Li||this.cu(t.localX,t.localY)}}},t.prototype.mouseMoveEvent=function(t){if(this.su){var e=t.localX,i=t.localY;if(this.lu()&&this.vu(),!Li){this.cu(e,i);var r=this.hitTest(e,i);this.F().setHoveredSource(r&&{source:r.source,object:r.object}),null!==r&&void 0!==r.view.moveHandler&&r.view.moveHandler(e,i)}}},t.prototype.mouseClickEvent=function(t){if(null!==this.su){var e=t.localX,i=t.localY,r=this.hitTest(e,i);if(null!==r&&void 0!==r.view.clickHandler&&r.view.clickHandler(e,i),this.Jr.hasListeners()){var s=this.F().crosshairSource().appliedIndex();this.Jr.fire(s,{x:e,y:i})}this.du()}},t.prototype.pressedMouseMoveEvent=function(t){if(null!==this.su){var e=this.F(),i=t.localX,r=t.localY;if(null!==this.tu){this.iu=!1;var s=b(this.nu),n=s.x+(i-this.tu.x),o=s.y+(r-this.tu.y);this.cu(n,o)}else this.lu()||this.cu(i,r);if(!e.timeScale().isEmpty()){var a=this.hu.options().handleScroll;if(a.pressedMouseMove&&"touch"!==t.type||(a.horzTouchDrag||a.vertTouchDrag)&&"mouse"!==t.type){var h=this.su.defaultPriceScale();null!==this._r||this.Mu()||(this._r={x:t.clientX,y:t.clientY}),null===this._r||this._r.x===t.clientX&&this._r.y===t.clientY||this.Xr||(h.isEmpty()||e.startScrollPrice(this.su,h,t.localY),e.startScrollTime(t.localX),this.Xr=!0),this.Xr&&(h.isEmpty()||e.scrollPriceTo(this.su,h,t.localY),e.scrollTimeTo(t.localX))}}}},t.prototype.mouseUpEvent=function(t){if(null!==this.su){this.Qr=!1;var e=this.F();if(this.Xr){var i=this.su.defaultPriceScale();e.endScrollPrice(this.su,i),e.endScrollTime(),this._r=null,this.Xr=!1}}},t.prototype.longTapEvent=function(t){if(this.Qr=!0,null===this.tu&&Xi){var e={x:t.localX,y:t.localY};this.wu(e,e)}},t.prototype.mouseLeaveEvent=function(t){null!==this.su&&(this.su.model().setHoveredSource(null),Bi||this.vu())},t.prototype.clicked=function(){return this.Jr},t.prototype.pinchStartEvent=function(){this.Gr=1},t.prototype.pinchEvent=function(t,e){if(this.hu.options().handleScale.pinch){var i=5*(e-this.Gr);this.Gr=e,this.F().zoomTime(t.x,i)}},t.prototype.hitTest=function(t,e){var i=this.su;if(null===i)return null;for(var r=0,s=i.orderedSources();r<s.length;r++){var n=s[r],o=this.bu(n.paneViews(i),t,e);if(null!==o)return{source:n,view:o.view,object:o.object}}return null},t.prototype.setPriceAxisSize=function(t){b(this.$r).setSize(new Ti(t,this.Nr.h))},t.prototype.getSize=function(){return this.Nr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.Nr.equals(t)||(this.Nr=t,this.Vr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.uu.style.width=t.w+"px",this.uu.style.height=t.h+"px")},t.prototype.recalculatePriceScale=function(){var t=b(this.su);t.recalculatePriceScale(t.defaultPriceScale());for(var e=0,i=t.dataSources();e<i.length;e++){var r=i[e];if(t.isOverlay(r)){var s=r.priceScale();null!==s&&t.recalculatePriceScale(s),r.updateAllViews()}}},t.prototype.getImage=function(){return this.Vr.canvas},t.prototype.paint=function(t){if(0!==t&&null!==this.su){if(t>1&&this.recalculatePriceScale(),null!==this.$r&&this.$r.paint(t),1!==t){var e=_i(this.Vr.canvas);e.save(),this.qr(e,this.mu(),this.Vr.pixelRatio),this.su&&(this.pu(e,this.Vr.pixelRatio),this.gu(e,this.Vr.pixelRatio),this.yu(e,this.Vr.pixelRatio)),e.restore()}var i=_i(this.Fr.canvas);i.clearRect(0,0,Math.ceil(this.Nr.w*this.Fr.pixelRatio),Math.ceil(this.Nr.h*this.Fr.pixelRatio)),this.ku(i,this.Fr.pixelRatio)}},t.prototype.priceAxisWidget=function(){return this.$r},t.prototype.mu=function(){return this.hu.options().layout.backgroundColor},t.prototype.ru=function(){null!==this.su&&this.su.onDestroyed().unsubscribeAll(this),this.su=null},t.prototype.qr=function(t,e,i){var r=this;J(t,i,(function(){Z(t,0,0,r.Nr.w,r.Nr.h,e)}))},t.prototype.pu=function(t,e){for(var i=b(this.su),r=this.F().gridSource().paneViews(i),s=i.height(),n=i.width(),o=0,a=r;o<a.length;o++){var h=a[o];t.save();var l=h.renderer(s,n);null!==l&&l.draw(t,e,!1),t.restore()}},t.prototype.gu=function(t,e){var i=this.F().watermarkSource();if(null!==i){var r=b(this.su);if(r.containsSeries())for(var s=i.paneViews(),n=r.height(),o=r.width(),a=0,h=s;a<h.length;a++){var l=h[a];t.save();var u=l.renderer(n,o);null!==u&&u.draw(t,e,!1),t.restore()}}},t.prototype.ku=function(t,e){this.Nu(this.F().crosshairSource(),t,e)},t.prototype.yu=function(t,e){for(var i=b(this.su).orderedSources(),r=this.F().crosshairSource(),s=0,n=i;s<n.length;s++){var o=n[s];this.Su(o,t,e)}for(var a=0,h=i;a<h.length;a++)(o=h[a])!==r&&this.Nu(o,t,e)},t.prototype.Nu=function(t,e,i){for(var r=b(this.su),s=t.paneViews(r),n=r.height(),o=r.width(),a=r.model().hoveredSource(),h=null!==a&&a.source===t,l=null!==a&&h&&void 0!==a.object?a.object.hitTestData:void 0,u=0,c=s;u<c.length;u++){var p=c[u].renderer(n,o);null!==p&&(e.save(),p.draw(e,i,h,l),e.restore())}},t.prototype.Su=function(t,e,i){for(var r=b(this.su),s=t.paneViews(r),n=r.height(),o=r.width(),a=r.model().hoveredSource(),h=null!==a&&a.source===t,l=null!==a&&h&&void 0!==a.object?a.object.hitTestData:void 0,u=0,c=s;u<c.length;u++){var p=c[u].renderer(n,o);null!==p&&void 0!==p.drawBackground&&(e.save(),p.drawBackground(e,i,h,l),e.restore())}},t.prototype.bu=function(t,e,i){for(var r=0,s=t;r<s.length;r++){var n=s[r],o=n.renderer(this.Nr.h,this.Nr.w);if(null!==o&&o.hitTest){var a=o.hitTest(e,i);if(null!==a)return{view:n,object:a}}}return null},t.prototype.au=function(){this.fu(),this.hu.adjustSize()},t.prototype.fu=function(){if(null!==this.su){var t=this.hu,e=this.su.defaultPriceScale().options().position;if(this.Zr!==e){if(null!==this.$r&&(this.$r.isLeft()?this.eu.removeChild(this.$r.getElement()):this.ou.removeChild(this.$r.getElement()),this.$r.destroy(),this.$r=null),"none"!==e){var i=t.model().rendererOptionsProvider();this.$r=new Hi(this,t.options().layout,i,e),"left"===e&&this.eu.appendChild(this.$r.getElement()),"right"===e&&this.ou.appendChild(this.$r.getElement())}this.Zr=e}}},t.prototype.lu=function(){return Xi&&null===this.tu},t.prototype.Mu=function(){return Xi&&this.Qr||null!==this.tu},t.prototype.xu=function(t){return Math.max(0,Math.min(t,this.Nr.w-1))},t.prototype.Du=function(t){return Math.max(0,Math.min(t,this.Nr.h-1))},t.prototype.cu=function(t,e){this.F().setAndSaveCurrentPosition(this.xu(t),this.Du(e),b(this.su))},t.prototype.vu=function(){this.F().clearCurrentPosition()},t.prototype.du=function(){this.iu&&(this.tu=null,this.vu())},t.prototype.wu=function(t,e){this.tu=t,this.iu=!1,this.cu(e.x,e.y);var i=this.F().crosshairSource();this.nu={x:i.appliedX(),y:i.appliedY()}},t.prototype.F=function(){return this.hu.model()},t}(),Ji=function(){function t(t,e,i,r){var s=this;this.o=!0,this.Nr=new Ti(0,0),this.Lr=function(){return s.paint(3)},this.zr="left"===t,this.ah=i.rendererOptionsProvider,this.$=e,this.Cu=r,this.cr=document.createElement("div"),this.cr.style.width="25px",this.cr.style.height="100%",this.cr.style.overflow="hidden",this.Vr=Ei(this.cr,new Ti(16,16)),this.Vr.subscribeCanvasConfigured(this.Lr)}return t.prototype.destroy=function(){this.Vr.unsubscribeCanvasConfigured(this.Lr),this.Vr.destroy()},t.prototype.update=function(){this.o=!0},t.prototype.getElement=function(){return this.cr},t.prototype.getSize=function(){return this.Nr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.Nr.equals(t)||(this.Nr=t,this.Vr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.minWidth=t.w+"px",this.cr.style.height=t.h+"px",this.o=!0)},t.prototype.paint=function(t){if((!(t<3)||this.o)&&0!==this.Nr.w&&0!==this.Nr.h){this.o=!1;var e=_i(this.Vr.canvas);this.qr(e,this.Vr.pixelRatio),this.Lt(e,this.Vr.pixelRatio)}},t.prototype.getImage=function(){return this.Vr.canvas},t.prototype.isLeft=function(){return this.zr},t.prototype.Lt=function(t,e){if(this.Cu()){var i=this.Nr.w;t.save(),t.fillStyle=this.$.timeScale.borderColor;var r=Math.floor(this.ah.options().borderSize*e),s=this.zr?Math.round(i*e)-r:0;t.fillRect(s,0,r,r),t.restore()}},t.prototype.qr=function(t,e){var i=this;J(t,e,(function(){Z(t,0,0,i.Nr.w,i.Nr.h,i.$.layout.backgroundColor)}))},t}();function Zi(t,e){return t.span>e.span?t:e}!function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=3]="TickLength"}(qi||(qi={})),function(t){t[t.Default=0]="Default",t[t.EwResize=1]="EwResize"}(Yi||(Yi={}));var Qi=function(){function t(t){var e=this;this.Tu=null,this.Eu=70,this.Ht=null,this.Lu=!1,this.Nr=new Ti(0,0),this.Zr="none",this.Lr=function(){return e.hu.model().lightUpdate()},this.Br=function(){return e.hu.model().lightUpdate()},this.hu=t,this.$=t.options().layout,this.Au=document.createElement("tr"),this.Bu=document.createElement("td"),this.Bu.style.padding="0",this.zu=document.createElement("td"),this.zu.style.padding="0",this.cr=document.createElement("td"),this.cr.style.height="25px",this.cr.style.padding="0",this.Vu=document.createElement("div"),this.Vu.style.width="100%",this.Vu.style.height="100%",this.Vu.style.position="relative",this.Vu.style.overflow="hidden",this.cr.appendChild(this.Vu),this.Vr=Ei(this.Vu,new Ti(16,16)),this.Vr.subscribeCanvasConfigured(this.Lr);var i=this.Vr.canvas;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Fr=Ei(this.Vu,new Ti(16,16)),this.Fr.subscribeCanvasConfigured(this.Br);var r=this.Fr.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Au.appendChild(this.Bu),this.Au.appendChild(this.cr),this.Au.appendChild(this.zu),this.Fu(),this.hu.model().mainPriceScaleOptionsChanged().subscribe(this.Fu.bind(this),this),this.dr=new Di(this.Fr.canvas,this,{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1})}return t.prototype.destroy=function(){this.dr.destroy(),null!==this.Tu&&this.Tu.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Br),this.Fr.destroy(),this.Vr.unsubscribeCanvasConfigured(this.Lr),this.Vr.destroy()},t.prototype.getElement=function(){return this.Au},t.prototype.stub=function(){return this.Tu},t.prototype.mouseDownEvent=function(t){if(!this.Lu){this.Lu=!0;var e=this.hu.model();!e.timeScale().isEmpty()&&this.hu.options().handleScale.axisPressedMouseMove&&e.startScaleTime(t.localX)}},t.prototype.mouseDownOutsideEvent=function(){var t=this.hu.model();!t.timeScale().isEmpty()&&this.Lu&&(this.Lu=!1,this.hu.options().handleScale.axisPressedMouseMove&&t.endScaleTime())},t.prototype.pressedMouseMoveEvent=function(t){var e=this.hu.model();!e.timeScale().isEmpty()&&this.hu.options().handleScale.axisPressedMouseMove&&e.scaleTimeTo(t.localX)},t.prototype.mouseUpEvent=function(t){this.Lu=!1;var e=this.hu.model();e.timeScale().isEmpty()&&!this.hu.options().handleScale.axisPressedMouseMove||e.endScaleTime()},t.prototype.mouseDoubleClickEvent=function(){this.hu.options().handleScale.axisDoubleClickReset&&this.hu.model().resetTimeScale()},t.prototype.mouseEnterEvent=function(t){this.hu.model().options().handleScale.axisPressedMouseMove&&this.Kr(1)},t.prototype.mouseLeaveEvent=function(t){this.Kr(0)},t.prototype.getSize=function(){return this.Nr},t.prototype.setSizes=function(t,e){this.Nr&&this.Nr.equals(t)||(this.Nr=t,this.Vr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.height=t.h+"px"),null!==this.Tu&&this.Tu.setSize(new Ti(e,t.h))},t.prototype.width=function(){return this.Nr.w},t.prototype.height=function(){return this.Nr.h},t.prototype.optimalHeight=function(){var t=this.Pu();return Math.ceil(t.borderSize+t.tickLength+t.fontSize+t.paddingTop+t.paddingBottom)},t.prototype.update=function(){var t=this,e=this.hu.model().timeScale().marks();e&&(this.Eu=70,e.forEach((function(e){t.Eu=Math.min(e.span,t.Eu)})))},t.prototype.getImage=function(){return this.Vr.canvas},t.prototype.paint=function(t){if(0!==t){if(1!==t){var e=_i(this.Vr.canvas);this.qr(e,this.Vr.pixelRatio),this.Lt(e,this.Vr.pixelRatio),this.jr(e,this.Vr.pixelRatio),this.Hr(e,this.Vr.pixelRatio),null!==this.Tu&&this.Tu.paint(t)}var i=_i(this.Fr.canvas);this.Yr(i,this.Fr.pixelRatio)}},t.prototype.qr=function(t,e){var i=this;J(t,e,(function(){Z(t,0,0,i.Nr.w,i.Nr.h,i.mu())}))},t.prototype.Lt=function(t,e){if(this.hu.options().timeScale.borderVisible){t.save(),t.fillStyle=this.Iu();var i=Math.max(1,Math.floor(this.Pu().borderSize*e));t.fillRect(0,0,Math.ceil(this.Nr.w*e),i),t.restore()}},t.prototype.jr=function(t,e){var i=this,r=this.hu.model().timeScale().marks();if(r&&0!==r.length){var s=r.reduce(Zi,r[0]).span;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.Iu();var n=this.Pu(),o=n.borderSize+n.tickLength+n.paddingTop+n.fontSize-n.baselineOffset;t.textAlign="center",t.fillStyle=this.Iu();var a=Math.floor(this.Pu().borderSize*e),h=Math.max(1,Math.floor(e)),l=Math.floor(.5*e);if(this.hu.model().timeScale().options().borderVisible){t.beginPath();for(var u=Math.round(n.tickLength*e),c=r.length;c--;){var p=Math.round(r[c].coord*e);t.rect(p-l,a,h,u)}t.fill()}t.fillStyle=this.Pn(),J(t,e,(function(){t.font=i.Ou();for(var e=0,n=r;e<n.length;e++)(l=n[e]).span<s&&t.fillText(l.label,l.coord,o);t.font=i.Ru();for(var a=0,h=r;a<h.length;a++){var l;(l=h[a]).span>=s&&t.fillText(l.label,l.coord,o)}}))}},t.prototype.Hr=function(t,e){t.save();var i=new Set,r=this.hu.model(),s=r.dataSources();i.add(r.crosshairSource());for(var n=this.Pu(),o=0,a=s;o<a.length;o++){var h=a[o];if(!i.has(h))for(var l=0,u=h.timeAxisViews();l<u.length;l++)u[l].renderer().draw(t,n,e)}t.restore()},t.prototype.Yr=function(t,e){t.save(),t.clearRect(0,0,Math.ceil(this.Nr.w*e),Math.ceil(this.Nr.h*e));var i=[],r=this.hu.model().crosshairSource().timeAxisViews();i.push(r);var s=this.Pu();i.forEach((function(i){i.forEach((function(i){t.save(),i.renderer().draw(t,s,e),t.restore()}))})),t.restore()},t.prototype.mu=function(){return this.$.backgroundColor},t.prototype.Iu=function(){return this.hu.options().timeScale.borderColor},t.prototype.Pn=function(){return this.$.textColor},t.prototype.Zt=function(){return this.$.fontSize},t.prototype.Ou=function(){return Ye(this.Zt(),this.$.fontFamily)},t.prototype.Ru=function(){return Ye(this.Zt(),this.$.fontFamily,"bold")},t.prototype.Pu=function(){null===this.Ht&&(this.Ht={borderSize:1,baselineOffset:NaN,paddingTop:NaN,paddingBottom:NaN,paddingHorizontal:NaN,tickLength:3,fontSize:NaN,font:"",widthCache:new te});var t=this.Ht,e=this.Ou();if(t.font!==e){var i=this.Zt();t.fontSize=i,t.font=e,t.paddingTop=Math.ceil(i/2.5),t.paddingBottom=t.paddingTop,t.paddingHorizontal=Math.ceil(i/2),t.baselineOffset=Math.round(this.Zt()/5),t.widthCache.reset()}return this.Ht},t.prototype.Kr=function(t){this.cr.style.cursor=1===t?"ew-resize":"default"},t.prototype.Fu=function(){var t=this.hu.model().mainPriceScale().options().position;if(t!==this.Zr){if(null!==this.Tu&&(this.Tu.isLeft()?this.Bu.removeChild(this.Tu.getElement()):this.zu.removeChild(this.Tu.getElement()),this.Tu.destroy(),this.Tu=null),"none"!==t){var e={rendererOptionsProvider:this.hu.model().rendererOptionsProvider()},i=this.hu.model();this.Tu=new Ji(t,this.hu.options(),e,(function(){return i.mainPriceScale().options().borderVisible&&i.timeScale().options().borderVisible})),("left"===t?this.Bu:this.zu).appendChild(this.Tu.getElement())}this.Zr=t}},t}(),Gi=function(){function t(t,e){var i=this;this.Wu=[],this.Uu=[],this.qu=0,this.ju=new ft,this.nn=0,this.Kt=0,this.Hu=0,this.Yu=null,this.Ku=!1,this.Jr=new ft,this.oh=new ft,this.$=e,this.Au=document.createElement("div"),this.Au.classList.add("tv-lightweight-charts"),this.Au.style.overflow="hidden",this.Au.style.width="100%",this.Au.style.height="100%",this.$u=document.createElement("table"),this.$u.setAttribute("cellspacing","0"),this.Au.appendChild(this.$u),this._u=this.Xu.bind(this),this.Au.addEventListener("wheel",this._u,{passive:!1}),this.F=new Ci(this.fh.bind(this),this.$),this.model().crosshairMoved().subscribe(this.Zu.bind(this),this),this.Ju=new Qi(this),this.$u.appendChild(this.Ju.getElement());var r=this.$.width,s=this.$.height;if(0===r&&0===s){var n=t.getBoundingClientRect();(r=Math.floor(n.width))%2&&(r-=1),(s=Math.floor(n.height))%2&&(s-=1)}r=Math.max(70,r),s=Math.max(50,s),this.resize(r,s),this.Gu(),t.appendChild(this.Au),this.Qu(),this.F.timeScale().optionsApplied().subscribe((function(){i.Qu(),i.adjustSize()}),this)}return t.prototype.model=function(){return this.F},t.prototype.options=function(){return this.$},t.prototype.paneWidgets=function(){return this.Wu},t.prototype.destroy=function(){this.Au.removeEventListener("wheel",this._u),0!==this.qu&&window.cancelAnimationFrame(this.qu),this.F.crosshairMoved().unsubscribeAll(this),this.F.timeScale().optionsApplied().unsubscribeAll(this),this.F.destroy();for(var t=0,e=this.Wu;t<e.length;t++){var i=e[t];this.$u.removeChild(i.getElement()),i.clicked().unsubscribeAll(this),i.destroy()}this.Wu=[];for(var r=0,s=this.Uu;r<s.length;r++){var n=s[r];this.te(n)}this.Uu=[],b(this.Ju).destroy(),null!==this.Au.parentElement&&this.Au.parentElement.removeChild(this.Au),this.oh.destroy(),this.Jr.destroy(),delete this.Au},t.prototype.resize=function(t,e,i){if(void 0===i&&(i=!1),this.nn!==e||this.Kt!==t){this.nn=e,this.Kt=t;var r=e+"px",s=t+"px";b(this.Au).style.height=r,b(this.Au).style.width=s,this.$u.style.height=r,this.$u.style.width=s,i?this.ie(new Qe(3)):this.F.fullUpdate()}},t.prototype.paint=function(t){void 0===t&&(t=new Qe(3));for(var e=0;e<this.Wu.length;e++)this.Wu[e].paint(t.invalidateForPane(e).level);this.Ju.paint(t.fullInvalidation())},t.prototype.adjustSize=function(){this.ne(),this.F.fullUpdate()},t.prototype.applyOptions=function(t){this.F.applyOptions(t),this.Qu();var e=t.width||this.Kt,i=t.height||this.nn;this.resize(e,i)},t.prototype.clicked=function(){return this.Jr},t.prototype.crosshairMoved=function(){return this.oh},t.prototype.takeScreenshot=function(){var t=this;null!==this.Yu&&(this.ie(this.Yu),this.Yu=null);var e=this.Wu[0],i=Pi(document,new Ti(this.Kt,this.nn)),r=_i(i),s=ki(i);return J(r,s,(function(){var i=0,s=0,n=function(){for(var e=0;e<t.Wu.length;e++){var n=t.Wu[e],o=n.getSize().h,a=b(n.priceAxisWidget()),h=a.getImage();r.drawImage(h,i,s,a.getWidth(),o),s+=o,e<t.Wu.length-1&&(s+=1)}};"left"===t.$.priceScale.position&&(n(),i=b(e.priceAxisWidget()).getWidth()),s=0;for(var o=0;o<t.Wu.length;o++){var a=t.Wu[o],h=a.getSize(),l=a.getImage();if(r.drawImage(l,i,s,h.w,h.h),s+=h.h,o<t.Wu.length-1){var u=t.Uu[o],c=u.getSize(),p=u.getImage();r.drawImage(p,i,s,c.w,c.h),s+=c.h}}i+=e.getSize().w,"right"===t.$.priceScale.position&&(s=0,n());var f=function(){var e=b(t.Ju.stub()),n=e.getSize(),o=e.getImage();r.drawImage(o,i,s,n.w,n.h)};if(t.$.timeScale.visible){i=0,"left"===t.$.priceScale.position&&(f(),i=b(e.priceAxisWidget()).getWidth());var d=t.Ju.getSize();l=t.Ju.getImage(),r.drawImage(l,i,s,d.w,d.h),"right"===t.$.priceScale.position&&(i=e.getSize().w,f(),r.restore())}})),i},t.prototype.ne=function(){for(var t=0,e=0,i=0,r=this.Wu;i<r.length;i++){var s=r[i];"none"!==this.$.priceScale.position&&(e=Math.max(e,b(s.priceAxisWidget()).optimalWidth())),t+=s.stretchFactor()}var n=this.Kt,o=this.nn,a=Math.max(n-e,0),h=1*this.Uu.length,l=this.$.timeScale.visible?this.Ju.optimalHeight():0;l%2&&(l+=1);for(var u=h+l,c=o<u?0:o-u,p=c/t,f=0,d=0;d<this.Wu.length;++d){(s=this.Wu[d]).setState(this.F.panes()[d]);var v,m=0;m=d===this.Wu.length-1?c-f:Math.round(s.stretchFactor()*p),f+=v=Math.max(m,2),s.setSize(new Ti(a,v)),"none"!==this.$.priceScale.position&&s.setPriceAxisSize(e),s.state()&&this.F.setPaneHeight(s.state(),v)}this.Ju.setSizes(new Ti(a,l),e),this.F.setWidth(a),this.Hu!==e&&(this.Hu=e,this.ju.fire(e))},t.prototype.Xu=function(t){var e=t.deltaX/100,i=-t.deltaY/100;if(0!==e&&this.$.handleScroll.mouseWheel||0!==i&&this.$.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120,i*=120;break;case t.DOM_DELTA_LINE:e*=32,i*=32}if(0!==i&&this.$.handleScale.mouseWheel){var r=Math.sign(i)*Math.min(1,Math.abs(i)),s=t.clientX-this.Au.getBoundingClientRect().left;this.model().zoomTime(s,r)}0!==e&&this.$.handleScroll.mouseWheel&&this.model().scrollChart(-80*e)}},t.prototype.ie=function(t){var e=t.fullInvalidation();if(3===e&&this.se(),3===e||2===e){for(var i=this.F.panes(),r=0;r<i.length;r++)t.invalidateForPane(r).autoScale&&i[r].momentaryAutoScale();t.getFitContent()&&this.F.timeScale().fitContent();var s=t.getTargetTimeRange();null!==s&&this.F.timeScale().setTimePointsRange(s),this.Ju.update()}this.paint(t)},t.prototype.fh=function(t){var e=this;null!==this.Yu?this.Yu.merge(t):this.Yu=t,this.Ku||(this.Ku=!0,this.qu=window.requestAnimationFrame((function(){e.Ku=!1,e.qu=0,null!==e.Yu&&(e.ie(e.Yu),e.Yu=null)})))},t.prototype.se=function(){this.Gu()},t.prototype.te=function(t){this.$u.removeChild(t.getElement()),t.destroy()},t.prototype.Gu=function(){for(var t=this.F.panes(),e=t.length,i=this.Wu.length,r=e;r<i;r++){var s=g(this.Wu.pop());this.$u.removeChild(s.getElement()),s.clicked().unsubscribeAll(this),s.destroy(),void 0!==(n=this.Uu.pop())&&this.te(n)}for(r=i;r<e;r++){if((s=new Ki(this,t[r])).clicked().subscribe(this.he.bind(this),this),this.Wu.push(s),r>1){var n=new Wi(this,r-1,r,!0);this.Uu.push(n),this.$u.insertBefore(n.getElement(),this.Ju.getElement())}this.$u.insertBefore(s.getElement(),this.Ju.getElement())}for(r=0;r<e;r++){var o=t[r];(s=this.Wu[r]).state()!==o?s.setState(o):s.updatePriceAxisWidget()}this.Qu(),this.ne()},t.prototype.ue=function(t,e){var i,r=new Map;if(null!==t&&this.F.serieses().forEach((function(e){var i=e.dataAt(t);null!==i&&r.set(e,i)})),null!==t){var s=this.F.timeScale().indexToUserTime(t);null!==s&&(i=s)}var n=this.model().hoveredSource(),o=null!==n&&n.source instanceof Fe?n.source:void 0,a=null!==n&&void 0!==n.object?n.object.externalId:void 0;return{time:i,point:e||void 0,hoveredSeries:o,seriesPrices:r,hoveredObject:a}},t.prototype.he=function(t,e){var i=this;this.Jr.fire((function(){return i.ue(t,e)}))},t.prototype.Zu=function(t,e){var i=this;this.oh.fire((function(){return i.ue(t,e)}))},t.prototype.Qu=function(){var t=this.$.timeScale.visible?"":"none";this.Ju.getElement().style.display=t},t}();function tr(t){if(!je(t))throw new Error("time must be of type BusinessDay");var e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{timestamp:Math.round(e.getTime()/1e3),businessDay:t}}function er(t){if(!qe(t))throw new Error("time must be of type isUTCTimestamp");return{timestamp:t}}function ir(t){return 0===t.length?null:je(t[0].time)?tr:er}function rr(t){return qe(t)?er(t):je(t)?tr(t):tr(dr(t))}function sr(t,e){var i=t.value,r=null;return"color"in t&&void 0!==t.color&&(r=e.addColor(t.color)),[i,i,i,i,r]}function nr(t,e){return[t.open,t.high,t.low,t.close,null]}var or={Candlestick:nr,Bar:nr,Area:sr,Histogram:sr,Line:sr};function ar(t){return or[t]}function hr(t){return 60*t*60*1e3}function lr(t){return 60*t*1e3}var ur,cr=[{divisor:1,span:20},{divisor:(ur=1,1e3*ur),span:19},{divisor:lr(1),span:20},{divisor:lr(5),span:21},{divisor:lr(30),span:22},{divisor:hr(1),span:30},{divisor:hr(3),span:31},{divisor:hr(6),span:32},{divisor:hr(12),span:33}];function pr(t,e){if(null!==e){var i=new Date(1e3*e.timestamp),r=new Date(1e3*t.timestamp);if(r.getUTCFullYear()!==i.getUTCFullYear())return 70;if(r.getUTCMonth()!==i.getUTCMonth())return 60;if(r.getUTCDate()!==i.getUTCDate())return 50;for(var s=cr.length-1;s>=0;--s)if(Math.floor(i.getTime()/cr[s].divisor)!==Math.floor(r.getTime()/cr[s].divisor))return cr[s].span}return 20}function fr(t,e){return t.timestamp<e.timestamp}function dr(t){var e=new Date(t);if(isNaN(e.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function vr(t){C(t.time)&&(t.time=dr(t.time))}var mr,yr=function(){function t(){this.ee=new Map,this.oe=new Map,this.fe=[]}return t.prototype.destroy=function(){this.ee.clear(),this.oe.clear(),this.fe=[]},t.prototype.setSeriesData=function(t,e){var i=this;t.clearData(),function(t){t.forEach(vr)}(e),this.ee.forEach((function(e){return e.mapping.delete(t)}));var r=ir(e);null!==r&&e.forEach((function(e){var s=r(e.time),n=i.ee.get(s.timestamp)||{index:0,mapping:new Map,timePoint:s};n.mapping.set(t,e),i.ee.set(s.timestamp,n)}));var s=new Map;return this.ee.forEach((function(t,e){t.mapping.size>0&&s.set(e,t)})),this.ae(s)},t.prototype.removeSeries=function(t){return this.setSeriesData(t,[])},t.prototype.updateSeriesData=function(t,e){vr(e);var i=t.data().bars();if(i.size()>0)if(void 0!==b(i.last()).time.businessDay){if(!je(e.time))throw new Error("time must be of type BusinessDay")}else if(!qe(e.time))throw new Error("time must be of type isUTCTimestamp");var r=b(ir([e]))(e.time),s=this.ee.get(r.timestamp)||{index:0,mapping:new Map,timePoint:r},n=0===s.mapping.size;s.mapping.set(t,e);var o=!1;if(n){var a=this.ee.size;this.fe.length>0&&this.fe[this.fe.length-1].timestamp>r.timestamp?(a=Ft(this.fe,r,fr),this.fe.splice(a,0,r),this.ce(a),o=!0):this.fe.push(r),s.index=a,this.oe.set(s.index,r)}this.ee.set(r.timestamp,s);var h=new Map,l=function(e){var i=g(u.oe.get(e));g(u.ee.get(i.timestamp)).mapping.forEach((function(r,s){if(o||s===t){var n=ar(s.seriesType()),a=h.get(s)||{update:[]},l={index:e,time:i,value:n(r,s.palette())};a.update.push(l),h.set(s,a)}}))},u=this;for(a=s.index;a<this.ee.size;++a)l(a);var c=n?this.le(s.index):[],p=n?this.fe.slice(s.index):[];return{timeScaleUpdate:{seriesUpdates:h,changes:p,index:s.index,marks:c}}},t.prototype.ae=function(t){var e=this;this.ee=t,this.fe=Array.from(this.ee.values()).map((function(t){return t.timePoint})),this.fe.sort((function(t,e){return t.timestamp-e.timestamp}));var i=new Map;this.fe.forEach((function(t,r){var s=g(e.ee.get(t.timestamp));s.index=r,s.mapping.forEach((function(e,s){var n=ar(s.seriesType()),o=i.get(s)||{update:[]},a={index:r,time:t,value:n(e,s.palette())};o.update.push(a),i.set(s,o)}))}));var r=null,s=this.fe.map((function(t,e){var i=pr(t,r);return r=t,{span:i,time:t,index:e}})),n={seriesUpdates:i,changes:this.fe.slice(),index:0,marks:s};return this.ve(),{timeScaleUpdate:n}},t.prototype.ce=function(t){for(var e=this.oe.size-1;e>=t;--e){var i=g(this.oe.get(e)),r=e+1;g(this.ee.get(i.timestamp)).index=r,this.oe.delete(e),this.oe.set(r,i)}},t.prototype.ve=function(){var t=this;this.oe.clear(),this.ee.forEach((function(e,i){t.oe.set(e.index,e.timePoint)}))},t.prototype.le=function(t){for(var e=[],i=this.oe.get(t-1)||null,r=t;r<this.oe.size;++r){var s=g(this.oe.get(r)),n=pr(s,i);i=s,e.push({span:n,time:s,index:r})}return e},t}(),gr={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0},br=function(){function t(t){this.ii=t}return t.prototype.applyOptions=function(t){this.ii.applyOptions(t)},t.prototype.options=function(){return this.ii.options()},t.prototype.priceLine=function(){return this.ii},t}(),wr=function(){function t(t,e){this._series=t,this._dataUpdatesConsumer=e}return t.prototype.destroy=function(){delete this._series,delete this._dataUpdatesConsumer},t.prototype.priceFormatter=function(){return this._series.formatter()},t.prototype.series=function(){return this._series},t.prototype.priceToCoordinate=function(t){var e=this._series.firstValue();return null===e?null:this._series.priceScale().priceToCoordinate(t,e.value)},t.prototype.coordinateToPrice=function(t){var e=this._series.firstValue();return null===e?null:this._series.priceScale().coordinateToPrice(t,e.value)},t.prototype.setData=function(t){this._dataUpdatesConsumer.applyNewData(this._series,t)},t.prototype.update=function(t){this._dataUpdatesConsumer.updateData(this._series,t)},t.prototype.setMarkers=function(t){var e=t.map((function(t){return v(v({},t),{time:rr(t.time)})}));this._series.setMarkers(e)},t.prototype.applyOptions=function(t){this._series.applyOptions(t)},t.prototype.options=function(){return _(this._series.options())},t.prototype.createPriceLine=function(t){var e=S(_(gr),t),i=this._series.createPriceLine(e);return new br(i)},t.prototype.removePriceLine=function(t){this._series.removePriceLine(t.priceLine())},t}(),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.applyOptions=function(e){We(e),t.prototype.applyOptions.call(this,e)},e}(wr),xr={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:"'Trebuchet MS', Roboto, Ubuntu, sans-serif"},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},priceScale:{autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,position:"right",borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,scaleMargins:{bottom:.1,top:.2}},timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:navigator.language,dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:!0,axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Mr={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Cr={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Tr={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},kr={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},_r={color:"#26a69a",base:0},Rr={title:"",lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Pr=function(){function t(t){this.l=t}return t.prototype.destroy=function(){delete this.l},t.prototype.applyOptions=function(t){this.l.applyOptions({priceScale:t})},t.prototype.options=function(){return this.B().options()},t.prototype.B=function(){return this.l.mainPriceScale()},t}();!function(t){t[t.AnimationDurationMs=1e3]="AnimationDurationMs"}(mr||(mr={}));var Er=function(){function t(t){this.F=t}return t.prototype.destroy=function(){delete this.F},t.prototype.scrollPosition=function(){return this.$n().rightOffset()},t.prototype.scrollToPosition=function(t,e){e?this.$n().scrollToOffsetAnimated(t,1e3):this.$n().setRightOffset(t)},t.prototype.scrollToRealTime=function(){this.$n().scrollToRealTime()},t.prototype.getVisibleRange=function(){var t=this.$n().visibleBars();if(null===t)return null;var e=this.F.timeScale().points(),i=b(e.firstIndex()),r=b(e.lastIndex());return{from:Ar(b(e.valueAt(Math.max(i,t.firstBar())))),to:Ar(b(e.valueAt(Math.min(r,t.lastBar()))))}},t.prototype.setVisibleRange=function(t){var e={from:rr(t.from),to:rr(t.to)};this.F.setTargetTimeRange(e)},t.prototype.resetTimeScale=function(){this.F.resetTimeScale()},t.prototype.fitContent=function(){this.F.fitContent()},t.prototype.applyOptions=function(t){this.$n().applyOptions(t)},t.prototype.options=function(){return _(this.$n().options())},t.prototype.$n=function(){return this.F.timeScale()},t}();function Ar(t){return t.businessDay||t.timestamp}function Vr(t){if(void 0!==t&&"custom"!==t.type){var e=t;void 0!==e.minMove&&void 0===e.precision&&(e.precision=function(t){if(t>=1)return 0;for(var e=0;e<8;e++){var i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e}(e.minMove))}}function Lr(t){var e=t.handleScale;k(e)&&(t.handleScale={axisDoubleClickReset:e,axisPressedMouseMove:e,mouseWheel:e,pinch:e});var i=t.handleScroll;return k(i)&&(t.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i}),t}var $r=function(){function t(t,e){var i=this;this.de=new yr,this.Me=new ft,this.we=new Map,this.be=new Map,this.me=new ft,this.pe=new ft;var r=void 0===e?_(xr):S(_(xr),Lr(e));this.ur=new Gi(t,r),this.ur.model().timeScale().visibleBarsChanged().subscribe(this.ge.bind(this)),this.ur.clicked().subscribe((function(t){i.me.hasListeners()&&i.me.fire(i.ye(t()))}),this),this.ur.crosshairMoved().subscribe((function(t){i.pe.hasListeners()&&i.pe.fire(i.ye(t()))}),this);var s=this.ur.model();this.ke=new Pr(s),this.Ne=new Er(s)}return t.prototype.remove=function(){this.ur.model().timeScale().visibleBarsChanged().unsubscribeAll(this),this.ur.clicked().unsubscribeAll(this),this.ur.crosshairMoved().unsubscribeAll(this),this.ke.destroy(),this.Ne.destroy(),this.ur.destroy(),delete this.ur,this.we.forEach((function(t,e){e.destroy()})),this.we.clear(),this.be.clear(),this.Me.destroy(),this.me.destroy(),this.pe.destroy(),this.de.destroy(),delete this.de},t.prototype.resize=function(t,e,i){this.ur.resize(t,e,i)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Vr(t.priceFormat);var e=S(_(Rr),kr,t),i=this.ur.model().createSeries("Area",e),r=new wr(i,this);return this.we.set(r,i),this.be.set(i,r),r},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Vr(t.priceFormat);var e=S(_(Rr),Cr,t),i=this.ur.model().createSeries("Bar",e),r=new wr(i,this);return this.we.set(r,i),this.be.set(i,r),r},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),We(t),Vr(t.priceFormat);var e=S(_(Rr),Mr,t),i=this.ur.model().createSeries("Candlestick",e),r=new Sr(i,this);return this.we.set(r,i),this.be.set(i,r),r},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Vr(t.priceFormat);var e=S(_(Rr),_r,t),i=this.ur.model().createSeries("Histogram",e),r=new wr(i,this);return this.we.set(r,i),this.be.set(i,r),r},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Vr(t.priceFormat);var e=S(_(Rr),Tr,t),i=this.ur.model().createSeries("Line",e),r=new wr(i,this);return this.we.set(r,i),this.be.set(i,r),r},t.prototype.removeSeries=function(t){var e=t,i=g(this.we.get(e)),r=this.de.removeSeries(i),s=this.ur.model();s.removeSeries(i);var n=r.timeScaleUpdate;s.updateTimeScale(n.index,n.changes,n.marks,!0),n.seriesUpdates.forEach((function(t,e){e.updateData(t.update)})),s.updateTimeScaleBaseIndex(0),this.we.delete(e),this.be.delete(i)},t.prototype.applyNewData=function(t,e){var i=this.de.setSeriesData(t,e),r=this.ur.model(),s=i.timeScaleUpdate;r.updateTimeScale(s.index,s.changes,s.marks,!0),s.seriesUpdates.forEach((function(t,e){e.updateData(t.update,!0)})),r.updateTimeScaleBaseIndex(0)},t.prototype.updateData=function(t,e){var i=this.de.updateSeriesData(t,e),r=this.ur.model(),s=i.timeScaleUpdate;r.updateTimeScale(s.index,s.changes,s.marks,!1),s.seriesUpdates.forEach((function(t,e){e.updateData(t.update)})),r.updateTimeScaleBaseIndex(0)},t.prototype.subscribeClick=function(t){this.me.subscribe(t)},t.prototype.unsubscribeClick=function(t){this.me.unsubscribe(t)},t.prototype.subscribeCrosshairMove=function(t){this.pe.subscribe(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.pe.unsubscribe(t)},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Me.subscribe(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Me.unsubscribe(t)},t.prototype.priceScale=function(){return this.ke},t.prototype.timeScale=function(){return this.Ne},t.prototype.applyOptions=function(t){this.ur.applyOptions(Lr(t))},t.prototype.options=function(){return this.ur.options()},t.prototype.takeScreenshot=function(){return this.ur.takeScreenshot()},t.prototype.ge=function(){this.Me.hasListeners()&&this.Me.fire(this.timeScale().getVisibleRange())},t.prototype.Se=function(t){return g(this.be.get(t))},t.prototype.ye=function(t){var e=this,i=new Map;t.seriesPrices.forEach((function(t,r){i.set(e.Se(r),t)}));var r=void 0===t.hoveredSeries?void 0:this.Se(t.hoveredSeries);return{time:t.time&&(t.time.businessDay||t.time.timestamp),point:t.point,hoveredSeries:r,hoveredMarkerId:t.hoveredObject,seriesPrices:i}},t}();function Fr(t,e){var i=b(C(t)?document.getElementById(t):t);return new $r(i,e)}var Br=i("bc3a"),Dr=i.n(Br);const Or={soveos:{code:"sovdexrelays",scope:"EOS",table:"pair",json:!0},svxeos:{code:"sovdexrelays",scope:"EOS",table:"svxpair",json:!0},sovusdt:{code:"sovdexrelays",scope:"USDT",table:"pair",json:!0},eospbtc:{code:"sovdexrelays",scope:"PBTC",table:"eospair",json:!0},powpbtc:{code:"sovdexrelays",scope:"PBTC",table:"powpair",json:!0}};var zr={data:()=>({streamData:{},polling:null}),watch:{data(t){t&&t.length>0&&(this.clearPolling(),this.polling=setInterval(()=>this.getStreamData(),1e3))},streamData:{handler(t){this.series&&this.series.update(t)},deep:!0}},computed:{eos(){return this.$store.state.blockchain.eos}},mounted(){this.$bus.$on("updateChartData",()=>this.getStreamData())},methods:{getStreamData(){this.eos.getTableRows(Or[this.symbol]).then(({rows:t})=>{if(t[0]){const e=parseFloat(parseFloat(t[0].price).toFixed(8));this.streamData=this.updateCandle(e),console.log("[stream]",this.streamData,e)}})},updateCandle(t){let e=this.data.slice(-1)[0];return e.close=t,e},clearPolling(){this.polling&&(clearInterval(this.polling),this.polling=null,console.log("[stream] cleared"))}},beforeDestroy(){this.polling&&clearInterval(this.polling)}},Ir={mixins:[zr],data:()=>({host:"https://api.sovdex.io",data:[],isDataLoaded:!1}),watch:{interval(t){this.getData({symbol:this.symbol,interval:t})},series(t){this.data.length>0&&this.series.setData(this.data)},data(t){t.length>0&&this.series&&(this.series.setData(t),this.chart.applyOptions({priceScale:{borderVisible:!1,autoScale:!1}}))}},computed:{symbol(){return this.$route.params.symbol}},mounted(){this.getData({symbol:this.symbol,interval:this.interval})},methods:{getData(t){this.request(t).then(t=>{t.length>0&&(this.data=this.updateCandles(t),this.isDataLoaded=!0)})},updateCandles(t){return t.map(t=>({time:t.ts/1e3,open:t.o,high:t.h,low:t.l,close:t.c}))},request({symbol:t="soveos",interval:e="5m",limit:i="500"}){return Dr()({method:"get",url:this.host,params:{symbol:t,interval:e,limit:i}}).then(t=>t.data).catch(t=>console.error(t))}}},Nr={data:()=>({legend:""}),watch:{chart(){this.chart.subscribeCrosshairMove(t=>{if(t.time){const e=t.seriesPrices.get(this.series),i=t.seriesPrices.get(this.histogramSeries);return this.legend=`O${parseFloat(e.open)} H${parseFloat(e.high)} L${parseFloat(e.low)} C${parseFloat(e.close)}`+(i?"<br>Volume "+Math.round(i):""),!1}this.legend=""})}}},Ur={data:()=>({isLoaded:!1})},Wr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{attrs:{dense:"",flat:"",color:"transparent"}},[i("v-toolbar-items",t._l(t.intervals,(function(e,r){return i("v-btn",{key:r,attrs:{to:{name:"market",params:{symbol:t.symbol},query:{interval:e}},elevation:"0",text:"",exact:""}},[t._v(t._s(e))])})),1)],1)},jr=[],qr={data:()=>({intervals:["5m","15m","1h","4h","1d"]}),computed:{symbol(){return this.$route.params.symbol||"soveos"}}},Yr=qr,Hr=i("2877"),Xr=i("6544"),Kr=i.n(Xr),Jr=i("8336"),Zr=i("71d9"),Qr=i("2a7f"),Gr=Object(Hr["a"])(Yr,Wr,jr,!1,null,null,null),ts=Gr.exports;Kr()(Gr,{VBtn:Jr["a"],VToolbar:Zr["a"],VToolbarItems:Qr["a"]});const es=[{time:"2018-12-19",open:141.77,high:170.39,low:120.25,close:145.72},{time:"2018-12-20",open:145.72,high:147.99,low:100.11,close:108.19},{time:"2018-12-21",open:108.19,high:118.43,low:74.22,close:75.16},{time:"2018-12-22",open:75.16,high:82.84,low:36.16,close:45.72},{time:"2018-12-23",open:45.12,high:53.9,low:45.12,close:48.09}];var is={mixins:[Ir,Nr,Ur],data:()=>({chart:null,series:null}),mounted(){this.createChart();const t=new ResizeObserver(t=>{const e=t[0].contentRect;this.resize(e.width,e.height)});t.observe(this.$refs.chart)},methods:{createChart(){this.$refs.chart.innerHTML="",this.chart=Fr(this.$refs.chart,{width:this.$refs.chart.innerWidth,height:this.$refs.chart.innerHeight,crosshair:{mode:0},timeScale:{timeVisible:!0,secondsVisible:!1,borderVisible:!1},layout:{backgroundColor:"#121212",textColor:"rgba(255,255,255, .5)"},priceScale:{borderColor:"rgba(255,255,255, .1)"},grid:{vertLines:{color:"rgba(255,255,255, .1)"},horzLines:{color:"rgba(255,255,255, .1)"}}}),this.series=this.chart.addCandlestickSeries({priceFormat:{type:"custom",minMove:1e-8,formatter:t=>t.toFixed(8)}}),this.series.setData(this.data?this.data:es)},resize(t,e){this.chart.resize(t,e)},reCreateChart(){this.chart.removeSeries(this.series),this.chart=null,this.createChart()}},computed:{interval(){return this.$route.query.interval||"5m"}},watch:{"$route.params.symbol"(){this.reCreateChart()},"$route.query.interval"(){this.reCreateChart()},isDataLoaded(t){this.reCreateChart()}},components:{intervals:ts}},rs=is,ss=(i("22ac"),i("490a")),ns=Object(Hr["a"])(rs,n,o,!1,null,"4bb429be",null),os=ns.exports;Kr()(ns,{VProgressCircular:ss["a"]});var as=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticStyle:{"max-width":"768px"}},[i("v-row",[i("v-col",{attrs:{cols:"6"}},[i("v-text-field",{attrs:{type:"number",min:"0",max:t.balance[t.pair.quote],step:t.step(t.pair.quote),suffix:t.pair.quote,hint:(t.balance[t.pair.quote]||0)+" "+t.pair.quote,disabled:!t.$store.getters.isAuth,"persistent-hint":""},model:{value:t.buyAmount,callback:function(e){t.buyAmount=e},expression:"buyAmount"}}),i("br"),i("v-btn",{attrs:{block:"",color:"success",disabled:!t.$store.getters.isAuth},on:{click:t.buy}},[t._v(" Buy "+t._s(t.pair.base)+" ")]),i("small",{staticClass:"grey--text ml-1"},[t._v(t._s(t.cutBancor(t.bancorPrice.buy,t.pair.base))+" "+t._s(t.pair.base))])],1),i("v-col",{attrs:{cols:"6"}},[i("v-text-field",{attrs:{type:"number",min:"0",max:t.balance[t.pair.base],step:t.step(t.pair.base),suffix:t.pair.base,disabled:!t.$store.getters.isAuth,hint:(t.balance[t.pair.base]||0)+" "+t.pair.base,"persistent-hint":""},model:{value:t.sellAmount,callback:function(e){t.sellAmount=e},expression:"sellAmount"}}),i("br"),i("v-btn",{attrs:{block:"",color:"error",disabled:!t.$store.getters.isAuth},on:{click:t.sell}},[t._v(" Sell "+t._s(t.pair.base)+" ")]),i("small",{staticClass:"grey--text ml-1"},[t._v(t._s(t.cutBancor(t.bancorPrice.sell,t.pair.quote))+" "+t._s(t.pair.quote))])],1)],1)],1)},hs=[],ls=i("2f62"),us={data:()=>({balance:{eos:0,sov:0,svx:0,pbtc:0,usdt:0}}),methods:{getBalance(){const t=this.eos.getAccount(this.scatter.name).then(t=>parseFloat(t.core_liquid_balance)),e=this.eos.getTableRows(this.params("sovmintofeos")).then(t=>this.updBalance(t)),i=this.eos.getTableRows(this.params("svxmintofeos")).then(t=>{const e=parseFloat(t.rows[0].balance),i=parseFloat(t.rows[0].storebalance),r=e&&i?e-i:0;return parseFloat(r.toFixed(4))}),r=this.eos.getTableRows(this.params("btc.ptokens")).then(t=>parseFloat(this.updBalance(t).toFixed(8))),s=this.eos.getTableRows(this.params("tethertether")).then(t=>this.updBalance(t)),n=this.eos.getTableRows(this.params("eosiopowcoin")).then(t=>this.updBalance(t));Promise.all([t,e,i,r,s,n]).then(t=>{this.balance={eos:t[0],sov:t[1],svx:t[2],pbtc:t[3],usdt:t[4],pow:t[5]}})},params(t){return{json:"true",code:t,scope:this.scatter.name,table:"accounts"}},updBalance({rows:t}){return t&&t[0]?parseFloat(t[0].balance):0}}},cs={data:()=>({price:{eos:0,usdt:0,pbtc:0,pow:0,svx:0},bancor:{}}),computed:{bancorPrice(){const t=this.$route.params.symbol,e=this.buyAmount,i=this.sellAmount;return"svxeos"==t?this.getBancor(this.bancor["svx"],e,i):"powpbtc"==t?this.getBancor(this.bancor["pow"],e,i):this.bancor[this.pair.quote]?this.getBancor(this.bancor[this.pair.quote],e,i):{buy:0,sell:0}}},methods:{getRate(){const t=this.eos.getTableRows({code:"sovdexrelays",scope:"EOS",table:"pair",json:!0}).then(t=>this.updateResponse(t)),e=this.eos.getTableRows({code:"sovdexrelays",scope:"USDT",table:"pair",json:!0}).then(t=>this.updateResponse(t)),i=this.eos.getTableRows({code:"sovdexrelays",scope:"PBTC",table:"eospair",json:!0}).then(t=>this.updateResponse(t)),r=this.eos.getTableRows({code:"sovdexrelays",scope:"PBTC",table:"powpair",json:!0}).then(t=>this.updateResponse(t)),s=this.eos.getTableRows({code:"sovdexrelays",scope:"EOS",table:"svxpair",json:!0}).then(t=>this.updateResponse(t));Promise.all([t,e,i,r,s]).then(t=>{this.price={eos:t[0].price,usdt:t[1].price,pbtc:t[2].price,pow:t[3].price,svx:t[4].price},this.bancor={eos:t[0].bancor,usdt:t[1].bancor,pbtc:t[2].bancor,pow:t[3].bancor,svx:t[4].bancor}})},updateResponse(t){const e=t,i=parseFloat(t.rows[0].price);return{bancor:e,price:i}},getBancor({rows:t},e,i){const r=parseFloat(t[0].cw),s=parseFloat(t[0].connectorbal),n=parseFloat(t[0].outstandingbal);e=parseFloat(e),i=parseFloat(i);const o=(-n*(Math.pow(1-e/(s+e),r/100)-1)).toFixed(8),a=(-s*(Math.pow(1-i/(n+i),1/(r/100))-1)).toFixed(8);return{buy:parseFloat(o),sell:parseFloat(a)}},cutBancor(t,e){return"pow"==e||"pbtc"==e?t:t.toFixed(4)}}},ps={mixins:[us,cs],data:()=>({buyAmount:0,sellAmount:0,schema:{soveos:{base:"sov",quote:"eos"},svxeos:{base:"svx",quote:"eos"},sovusdt:{base:"sov",quote:"usdt"},eospbtc:{base:"eos",quote:"pbtc"},powpbtc:{base:"pow",quote:"pbtc"}},accountSchema:{soveos:{buy:"eosio.token",sell:"sovmintofeos"},svxeos:{buy:"eosio.token",sell:"svxmintofeos"},sovusdt:{buy:"tethertether",sell:"sovmintofeos"},eospbtc:{buy:"btc.ptokens",sell:"eosio.token"},powpbtc:{buy:"btc.ptokens",sell:"eosiopowcoin"}},polling:null}),watch:{scatter(t){t&&(this.getBalance(),this.getRate())}},computed:{...Object(ls["b"])({eos:t=>t.blockchain.eos,scatter:t=>t.blockchain.scatter}),pair(){const t=this.$route.params.symbol;return this.schema[t]}},mounted(){this.polling=setInterval(()=>{this.getBalance(),this.getRate()},1e3)},methods:{buy(){const t=this.$options.filters.eosAmountFormat(this.buyAmount,this.pair.quote);this.submit(this.pair.base,t,"buy")},sell(){const t=this.$options.filters.eosAmountFormat(this.sellAmount,this.pair.base);this.submit(this.pair.quote,t,"sell")},submit(t,e,i){const r=this.accountSchema[this.$route.params.symbol][i];"buy"==i?this.buyAmount:this.sellAmount;confirm(`Exchange ${e} for ${t.toUpperCase()}?`)&&this.eos.transaction({actions:[{account:r,name:"transfer",authorization:[{actor:this.scatter.name,permission:"active"}],data:{from:this.scatter.name,to:"sovdexrelays",quantity:e,memo:t.toUpperCase()}}]}).then(()=>{this.$notice.success(`${e} exchanged for ${t.toUpperCase()}`),this.getBalance(),this.$bus.$emit("updateChartData")}).catch(t=>{console.error(t),this.$notice.error("Order error")})},step(t){return"pbtc"==t?1e-4:"eos"==t||"usdt"==t?.01:"pow"==t?.1:1}},beforeDestroy(){this.polling&&clearInterval(this.polling)}},fs=ps,ds=(i("fcea"),i("62ad")),vs=i("a523"),ms=i("0fd9"),ys=i("8654"),gs=Object(Hr["a"])(fs,as,hs,!1,null,"57a815b4",null),bs=gs.exports;Kr()(gs,{VBtn:Jr["a"],VCol:ds["a"],VContainer:vs["a"],VRow:ms["a"],VTextField:ys["a"]});var ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",[i("v-tabs",{attrs:{"show-arrows":"","center-active":"","fixed-tabs":""}},t._l(t.markets,(function(e,r){return i("v-tab",{key:r,attrs:{to:{name:"market",params:{symbol:e.symbol},query:{interval:"5m"}}}},[t._v(t._s(e.name)+" ")])})),1)],1)},Ss=[],xs={data:()=>({markets:[{name:"sov/eos",symbol:"soveos"},{name:"svx/eos",symbol:"svxeos"},{name:"sov/usdt",symbol:"sovusdt"},{name:"eos/pbtc",symbol:"eospbtc"},{name:"pow/pbtc",symbol:"powpbtc"}]})},Ms=xs,Cs=i("4e82"),Ts=i("1c87"),ks=i("7560"),_s=i("80d2"),Rs=i("58df");const Ps=Object(Rs["a"])(Ts["a"],Object(Cs["a"])("tabsBar"),ks["a"]);var Es=Ps.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...Ts["a"].options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){let t=this.to||this.href||"";if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},mounted(){this.onRouteChange()},methods:{click(t){this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle()}},render(t){const{tag:e,data:i}=this.generateRouteLink();return i.attrs={...i.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:0},i.on={...i.on,keydown:t=>{t.keyCode===_s["q"].enter&&this.click(t),this.$emit("keydown",t)}},t(e,i,this.$slots.default)}}),As=(i("1bfb"),i("608c"),i("9d26")),Vs=i("0789"),Ls=i("604c"),$s=i("d9bd"),Fs=i("a026"),Bs=Fs["a"].extend({name:"mobile",props:{mobileBreakpoint:{type:[Number,String],default(){return this.$vuetify?this.$vuetify.breakpoint.mobileBreakpoint:void 0},validator:t=>!isNaN(Number(t))||["xs","sm","md","lg","xl"].includes(String(t))}},computed:{isMobile(){const{mobile:t,width:e,name:i,mobileBreakpoint:r}=this.$vuetify.breakpoint;if(r===this.mobileBreakpoint)return t;const s=parseInt(this.mobileBreakpoint,10),n=!isNaN(s);return n?e<s:i===this.mobileBreakpoint}},created(){this.$attrs.hasOwnProperty("mobile-break-point")&&Object($s["d"])("mobile-break-point","mobile-breakpoint",this)}}),Ds=i("dc22"),Os=i("c3f0");const zs=Object(Rs["a"])(Ls["a"],Bs).extend({name:"base-slide-group",directives:{Resize:Ds["a"],Touch:Os["a"]},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","desktop","mobile"].includes(t)}},data:()=>({internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...Ls["a"].options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$refs.content.style.transform=`translateX(${-t}px)`}},beforeUpdate(){this.internalItemsLength=(this.$children||[]).length},updated(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content"},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const i=`${t[0].toUpperCase()}${t.slice(1)}`,r=this["has"+i];return this.showArrows||r?this.$createElement(As["a"],{props:{disabled:!r}},this[e+"Icon"]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(Vs["b"],[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper"},[this.genContent()])},calculateNewOffset(t,e,i,r){const s=i?-1:1,n=s*r+("prev"===t?-1:1)*e.wrapper;return s*Math.max(Math.min(n,e.content-e.wrapper),0)},onAffixClick(t){this.$emit("click:"+t),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){this.scrollOffset=this.startX-t.touchmoveX},onTouchEnd(){const{content:t,wrapper:e}=this.$refs,i=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-i&&(this.scrollOffset=-i):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=i&&(this.scrollOffset=i)},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=this.calculateCenteredOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=this.calculateUpdatedOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},calculateUpdatedOffset(t,e,i,r){const s=t.clientWidth,n=i?e.content-t.offsetLeft-s:t.offsetLeft;i&&(r=-r);const o=e.wrapper+r,a=s+n,h=.4*s;return n<=r?r=Math.max(n-h,0):o<=a&&(r=Math.min(r-(o-a-h),e.content-e.wrapper)),i?-r:r},calculateCenteredOffset(t,e,i){const{offsetLeft:r,clientWidth:s}=t;if(i){const t=e.content-r-s/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=r+s/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame(()=>{const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper<this.widths.content,this.scrollIntoView()})}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});zs.extend({name:"v-slide-group",provide(){return{slideGroup:this}}});var Is=Fs["a"].extend({name:"ssr-bootable",data:()=>({isBooted:!1}),mounted(){window.requestAnimationFrame(()=>{this.$el.setAttribute("data-booted","true"),this.isBooted=!0})}}),Ns=Object(Rs["a"])(zs,Is,ks["a"]).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...zs.options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){this.isBooted&&this.$emit("call:slider")},genContent(){const t=zs.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const i=this.items,r=t.path,s=e.path;let n=!1,o=!1;for(const a of i)if(a.to===r?n=!0:a.to===s&&(o=!0),n&&o)break;!n&&o&&(this.internalValue=void 0)}},render(t){const e=zs.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),Us=(i("13b3"),i("afdd")),Ws=Ls["a"].extend({name:"v-window",directives:{Touch:Os["a"]},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...Ls["a"].options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,i=e?"-reverse":"";return`v-window-${t}${i}-transition`},hasActiveItems(){return Boolean(this.items.find(t=>!t.disabled))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex((t,e)=>this.internalValue===this.getValue(t,e))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame(()=>this.isBooted=!0)},methods:{genContainer(){const t=[this.$slots.default];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,i){var r;const s={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,i()}},n={"aria-label":this.$vuetify.lang.t("$vuetify.carousel."+t)},o=null!=(r=null==this.$scopedSlots[t]?void 0:this.$scopedSlots[t]({on:s,attrs:n}))?r:[this.$createElement(Us["a"],{props:{icon:!0},attrs:n,on:s},[this.$createElement(As["a"],{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:"v-window__"+t},o)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const i=this.genIcon("prev",e,this.prev);i&&t.push(i)}const i=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&i&&"string"===typeof i){const e=this.genIcon("next",i,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,i=this.items[e];return i.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,i=this.items[e];return i.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const i=this.items.length,r=i-1;return i<=2?t<e:t===r&&0===e||(0!==t||e!==r)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),js=Ws.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...Ws.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||Ls["a"].options.methods.getValue.call(this,t,e)}}}),qs=i("a9ad"),Ys=Object(Rs["a"])(qs["a"]).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),Hs=i("a452");const Xs=Object(Rs["a"])(qs["a"],Hs["a"],ks["a"]);var Ks=Xs.extend().extend({name:"v-tabs",directives:{Resize:Ds["a"]},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:Object(_s["f"])(this.slider.height),left:this.isReversed?void 0:Object(_s["f"])(this.slider.left),right:this.isReversed?Object(_s["f"])(this.slider.right):void 0,top:this.vertical?Object(_s["f"])(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:Object(_s["f"])(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){this.$nextTick(()=>{window.setTimeout(this.callSlider,30)})},methods:{callSlider(){return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick(()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el)return this.slider.width=0,void(this.slider.left=0);const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}}),!0):(this.slider.width=0,!1)},genBar(t,e){const i={style:{height:Object(_s["f"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:t=>{this.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,i),this.setBackgroundColor(this.backgroundColor,i),this.$createElement(Ns,i,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(js,{props:{value:this.internalValue},on:{change:t=>{this.internalValue=t}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(Ys,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const i=[],r=[],s=this.$slots.default||[],n=s.length;for(let o=0;o<n;o++){const n=s[o];if(n.componentOptions)switch(n.componentOptions.Ctor.options.name){case"v-tabs-slider":e=n;break;case"v-tabs-items":t=n;break;case"v-tab-item":i.push(n);break;default:r.push(n)}else r.push(n)}return{tab:r,slider:e,items:t,item:i}}},render(t){const{tab:e,slider:i,items:r,item:s}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,i),this.genItems(r,s)])}}),Js=Object(Hr["a"])(Ms,ws,Ss,!1,null,null,null),Zs=Js.exports;Kr()(Js,{VTab:Es,VTabs:Ks,VToolbar:Zr["a"]});var Qs={data:()=>({renderComponent:!0}),computed:{symbol(){return this.$route.params.symbol||"soveos"}},watch:{symbol(t){this.forceDestroy()}},methods:{forceDestroy(){this.renderComponent=!1,this.$nextTick(()=>this.renderComponent=!0)}},components:{markets:Zs,chart:os,createOrder:bs}},Gs=Qs,tn=(i("2a46"),Object(Hr["a"])(Gs,r,s,!1,null,"189c923a",null));e["default"]=tn.exports;Kr()(tn,{VCol:ds["a"],VContainer:vs["a"],VRow:ms["a"]})},fcea:function(t,e,i){"use strict";var r=i("b936"),s=i.n(r);s.a}}]);
//# sourceMappingURL=chunk-1ce05e0e.js.map