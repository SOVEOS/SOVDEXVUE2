(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b48d"],{beb6:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-row",{staticClass:"justify-center mt-0"},[s("v-col",{attrs:{cols:"12",sm:"12",lg:"8",md:"6"}},[s("balance"),s("dashboard"),s("stake")],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticStyle:{"max-width":"576px"}},[s("v-card",{staticClass:"px-5 py-5",attrs:{elevation:"3"}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6",sm:"12"}},[s("v-text-field",{attrs:{type:"number",min:"0",max:t.balance,label:"Max "+t.balance},model:{value:t.stakeCount,callback:function(e){t.stakeCount=e},expression:"stakeCount"}}),s("v-btn",{attrs:{color:"primary",block:"",elevation:"0",disabled:t.$v.stakeCount.$invalid},on:{click:t.stake}},[s("span",[t._v("Stake ")]),t.stakeCount>0?s("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.stakeCount)+" SVX")]):t._e()])],1),s("v-col",{attrs:{cols:"12",md:"6",sm:"12"}},[s("v-text-field",{attrs:{type:"number",min:"0",max:t.stakedBalance,label:"Max "+t.stakedBalance},model:{value:t.unstakeCount,callback:function(e){t.unstakeCount=e},expression:"unstakeCount"}}),s("v-btn",{attrs:{color:"primary",block:"",elevation:"0",disabled:t.$v.unstakeCount.$invalid},on:{click:t.unstake}},[s("span",[t._v("Unstake ")]),t.unstakeCount>0?s("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.unstakeCount)+" SVX")]):t._e()])],1)],1),s("div",{staticClass:"mt-5 ml-5"},[s("div",{staticClass:"grey--text"},[t._v("Staked "+t._s(t.stakedBalance)+" SVX")]),t.discount>=5?s("div",{staticClass:"grey--text"},[t._v("Discount "+t._s(t.discount)+"%")]):t._e()])],1),s("div",{staticClass:"grey--text mt-5 ml-5"},[t._v(" Stake 777k+ SVX for automatic node payouts ")])],1)},i=[],c=s("2f62"),r=s("b5ae"),l={data:()=>({feeDiscount:0}),computed:{discount(){let t=0;return this.feeDiscount<5?t=0:this.feeDiscount<=10?t=5:this.feeDiscount<15?t=10:this.feeDiscount<20?t=15:this.feeDiscount<25?t=20:this.feeDiscount<30?t=25:this.feeDiscount<35?t=30:this.feeDiscount<40?t=35:this.feeDiscount<45?t=40:this.feeDiscount<50?t=45:this.feeDiscount<55||(this.feeDiscount<60?t=55:this.feeDiscount<65?t=60:this.feeDiscount<70?t=65:this.feeDiscount<75?t=70:this.feeDiscount>=80&&(t=75)),t}},mounted(){},watch:{scatter(t){t&&this.getFeeDiscount()}},methods:{async getFeeDiscount(){const t=await this.eos.getTableRows({json:"true",code:"svxmintofeos",scope:"SVX",table:"stat"}).then(t=>parseFloat(t.rows[0].supply)),e=await this.eos.getTableRows({json:"true",code:"svxmintofeos",scope:this.scatter.name,table:"accounts"}).then(t=>parseFloat(t.rows[0].svxpower));t&&e&&(this.feeDiscount=e/t*1e4)}}},u={mixins:[l],data:()=>({stakeCount:0,unstakeCount:0,balance:0,stakedBalance:0,polling:null}),computed:{...Object(c["b"])({eos:t=>t.blockchain.eos,scatter:t=>t.blockchain.scatter})},watch:{scatter(t){t&&this.getBalance()}},validations(){return{stakeCount:{required:r["required"],between:Object(r["between"])(1,parseFloat(this.balance))},unstakeCount:{required:r["required"],between:Object(r["between"])(1,parseFloat(this.stakedBalance))}}},mounted(){this.polling=setInterval(()=>{this.getBalance(),this.getFeeDiscount()},1e3)},methods:{stake(){confirm(`Stake ${this.stakeCount} SVX?`)&&this.eos.transaction({actions:[{account:"svxmintofeos",name:"stake",authorization:[{actor:this.scatter.name,permission:"active"}],data:{account:this.scatter.name,value:this.$options.filters.eosAmountFormat(this.stakeCount)}}]}).then(()=>{this.$notice.success(`Staked ${this.stakeCount} SVX`),this.getBalance(),this.clear()}).catch(t=>{console.error("[stake | stake]",t),this.$notice.error("Stake error")})},unstake(){confirm(`Un-Stake ${this.unstakeCount} SVX?`)&&this.eos.transaction({actions:[{account:"svxmintofeos",name:"unstake",authorization:[{actor:this.scatter.name,permission:"active"}],data:{account:this.scatter.name,value:this.$options.filters.eosAmountFormat(this.unstakeCount)}}]}).then(()=>{this.$notice.success(`Unstaked ${this.unstakeCount} SVX`),this.getBalance(),this.clear()}).catch(t=>{console.error("[stake | unstake]",t),this.$notice.error("Unstake error")})},getBalance(){this.eos.getTableRows({json:"true",code:"svxmintofeos",scope:this.scatter.name,table:"accounts"}).then(t=>{const e=parseFloat(t.rows[0].balance),s=parseFloat(t.rows[0].storebalance);this.balance=Math.round(e-s),this.stakedBalance=Math.round(s)})},clear(){this.stakeCount=0,this.unstakeCount=0}},beforeDestroy(){this.polling&&clearInterval(this.polling)}},h=u,k=s("2877"),d=s("6544"),m=s.n(d),v=s("8336"),b=s("b0af"),p=s("62ad"),f=s("a523"),C=s("0fd9"),w=s("8654"),x=Object(k["a"])(h,o,i,!1,null,null,null),D=x.exports;m()(x,{VBtn:v["a"],VCard:b["a"],VCol:p["a"],VContainer:f["a"],VRow:C["a"],VTextField:w["a"]});var g={components:{stake:D}},V=g,_=Object(k["a"])(V,a,n,!1,null,null,null);e["default"]=_.exports;m()(_,{VCol:p["a"],VContainer:f["a"],VRow:C["a"]})}}]);
//# sourceMappingURL=chunk-2d21b48d.js.map